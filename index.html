<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Civicism Framework - Interactive Pyramid</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    overflow: hidden;
    background: linear-gradient(135deg, #0a1929 0%, #1a2332 100%);
    height: 100vh;
}

#canvas-container {
    width: 100vw;
    height: 100vh;
    position: relative;
    cursor: grab;
}

#canvas-container.dragging {
    cursor: grabbing;
}

canvas {
    display: block;
}

#domain-network-canvas {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 100;
}

#intersectionality-canvas {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 110;
}

#vortical-progression-canvas {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 120;
}

#vortical-progression-container {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: auto;
    z-index: 121;
    cursor: pointer;
}

.vortical-phase-node {
    position: absolute;
    border-radius: 50%;
    color: white;
    font-weight: 600;
    cursor: pointer;
    border: 3px solid rgba(255, 255, 255, 0.6);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    padding: 0.5rem;
    line-height: 1.2;
    white-space: nowrap;
}

.vortical-phase-node:hover {
    transform: scale(1.2);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
    z-index: 1000;
    border-color: rgba(255, 255, 255, 0.9);
}

#intersectionality-container {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: auto;
    z-index: 111;
    cursor: pointer;
}

.intersectionality-node {
    position: absolute;
    border-radius: 50px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    border: 2px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    padding: 0 8px;
    line-height: 1.2;
}

.intersectionality-node.single-line {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.intersectionality-node.two-lines {
    white-space: normal;
    overflow: visible;
    word-wrap: break-word;
}

.intersectionality-node:hover {
    transform: scale(1.15);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
    z-index: 1000;
    border-color: rgba(255, 255, 255, 0.8);
}

#domain-network-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 101;
}

.domain-network-node {
    position: absolute;
    border-radius: 50px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    border: 2px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: clip;
    line-height: 1;
    padding: 0.8rem 1.2rem;
}

/* Unique colors for each domain */
.domain-network-node[data-domain-id="agriculture"] {
    background: linear-gradient(135deg, rgba(139, 195, 74, 0.95) 0%, rgba(76, 175, 80, 0.95) 100%);
}

.domain-network-node[data-domain-id="economics"] {
    background: linear-gradient(135deg, rgba(255, 193, 7, 0.95) 0%, rgba(255, 152, 0, 0.95) 100%);
}

.domain-network-node[data-domain-id="education"] {
    background: linear-gradient(135deg, rgba(33, 150, 243, 0.95) 0%, rgba(63, 81, 181, 0.95) 100%);
}

.domain-network-node[data-domain-id="entertainment"] {
    background: linear-gradient(135deg, rgba(233, 30, 99, 0.95) 0%, rgba(156, 39, 176, 0.95) 100%);
}

.domain-network-node[data-domain-id="healthcare"] {
    background: linear-gradient(135deg, rgba(244, 67, 54, 0.95) 0%, rgba(229, 57, 53, 0.95) 100%);
}

.domain-network-node[data-domain-id="infrastructure"] {
    background: linear-gradient(135deg, rgba(96, 125, 139, 0.95) 0%, rgba(69, 90, 100, 0.95) 100%);
}

.domain-network-node[data-domain-id="justice"] {
    background: linear-gradient(135deg, rgba(103, 58, 183, 0.95) 0%, rgba(63, 81, 181, 0.95) 100%);
}

.domain-network-node[data-domain-id="security"] {
    background: linear-gradient(135deg, rgba(255, 87, 34, 0.95) 0%, rgba(244, 67, 54, 0.95) 100%);
}

.domain-network-node[data-domain-id="technology"] {
    background: linear-gradient(135deg, rgba(0, 188, 212, 0.95) 0%, rgba(0, 150, 136, 0.95) 100%);
}

.domain-network-node:hover {
    transform: scale(1.15);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
    z-index: 1000;
    border-color: rgba(255, 255, 255, 0.8);
}

.pyramid-layer {
    position: absolute;
    cursor: pointer;
    transition: opacity 0.3s ease, filter 0.3s ease;
}

.pyramid-layer:hover {
    opacity: 0.9;
    filter: brightness(1.2);
}

.pyramid-layer svg {
    width: 100%;
    height: 100%;
}

.layer-label {
    position: absolute;
    color: white;
    font-weight: 700;
    font-size: clamp(1rem, 3vh, 2.5rem);
    text-align: center;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    pointer-events: none;
    z-index: 10;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap;
}

.pyramid-layer.domains .layer-label {
    font-size: clamp(0.9rem, 2.5vh, 2rem);
}

.domain-mesh {
    position: absolute;
    width: 100%;
    height: 90%;
    top: 10%;
    left: 0;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: max(3px, 1.5%);
    padding: max(4px, 2%) max(6px, 3%);
    box-sizing: border-box;
    min-height: 0;
    min-width: 0;
}

.domain-node {
    position: relative;
    background: linear-gradient(135deg, rgba(250, 112, 154, 0.95) 0%, rgba(254, 225, 64, 0.95) 100%);
    border-radius: max(4px, 0.5%);
    padding: max(0.2em, 0.4em) max(0.25em, 0.5em);
    color: white;
    font-weight: 600;
    cursor: pointer;
    border: max(1px, 0.15%) solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    line-height: 1.1;
    white-space: nowrap;
    text-overflow: ellipsis;
    width: 100%;
    height: 100%;
    min-width: 0;
    min-height: 0;
    box-sizing: border-box;
}

.domain-node:hover {
    transform: scale(1.1);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
    z-index: 1000;
    border-color: rgba(255, 255, 255, 0.6);
}

.info-panel {
    position: fixed;
    top: 2%;
    right: 2%;
    background: rgba(255, 255, 255, 0.95);
    padding: 1.5rem;
    border-radius: 15px;
    max-width: min(450px, 30vw);
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    display: none;
    z-index: 2000;
    backdrop-filter: blur(10px);
}

.info-panel.active {
    display: block;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.info-panel h2 {
    color: #2a5298;
    margin-bottom: 1rem;
    font-size: clamp(1.2rem, 2vw, 1.75rem);
}

.info-panel p {
    color: #333;
    line-height: 1.7;
    margin-bottom: 1rem;
    font-size: clamp(0.9rem, 1.2vw, 1rem);
}

.info-description {
    font-weight: 500;
    color: #2a5298;
}

.info-details {
    color: #555;
}

.info-links {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 2px solid rgba(42, 82, 152, 0.2);
}

.info-links h3 {
    color: #2a5298;
    font-size: clamp(1rem, 1.5vw, 1.2rem);
    margin-bottom: 0.75rem;
}

.info-links ul {
    list-style: none;
    padding: 0;
}

.info-links li {
    margin-bottom: 0.5rem;
}

.info-link {
    color: #4a90e2;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
    cursor: pointer;
    display: inline-block;
    padding: 0.25rem 0.5rem;
    border-radius: 5px;
    transition: all 0.2s ease;
}

.info-link:hover {
    color: #2a5298;
    background: rgba(42, 82, 152, 0.1);
    transform: translateX(5px);
}

.info-panel .close-btn {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: #f5576c;
    color: white;
    border: none;
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.info-panel .close-btn:hover {
    background: #d43f52;
}

.controls {
    position: fixed;
    bottom: 2%;
    left: 2%;
    z-index: 1000;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.control-btn {
    background: rgba(255, 255, 255, 0.9);
    border: none;
    padding: 0.75rem 1.25rem;
    border-radius: 25px;
    cursor: pointer;
    font-size: clamp(0.8rem, 1.2vw, 1rem);
    font-weight: 600;
    color: #2a5298;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease;
    white-space: nowrap;
}

.control-btn:hover {
    background: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

/* Desktop: Hide menu toggle and menu, show all buttons directly */
.menu-toggle {
    display: none;
}

.focus-menu {
    display: none;
}

/* Mobile: Show collapsible menu */
@media (max-width: 768px) {
    .controls {
        flex-direction: column;
        gap: 0;
    }

    .control-btn.focus-btn {
        display: none; /* Hide individual focus buttons on mobile - they're in the menu */
    }

    .control-btn:first-child {
        display: block; /* Always show Reset View button */
        width: 100%;
        margin-bottom: 0.5rem;
        text-align: left;
    }

    .menu-toggle {
        display: flex;
        background: rgba(42, 82, 152, 0.9);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 25px;
        cursor: pointer;
        font-size: clamp(0.9rem, 1.3vw, 1.1rem);
        font-weight: 600;
        color: white;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
        align-items: center;
        gap: 0.5rem;
        min-width: 180px;
        width: 100%;
        margin-top: 0.5rem;
    }

    .menu-toggle:hover {
        background: rgba(42, 82, 152, 1);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    .menu-toggle::after {
        content: '▼';
        font-size: 0.8em;
        transition: transform 0.3s ease;
        margin-left: auto;
    }

    .menu-toggle.active::after {
        transform: rotate(180deg);
    }

    .focus-menu {
        display: none;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 0.5rem;
        margin-top: 0.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        max-height: 60vh;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }

    .focus-menu.active {
        display: block;
        animation: slideDown 0.3s ease;
    }

    .focus-menu .control-btn {
        display: block; /* Show buttons inside menu when active */
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Desktop styles - show all buttons expanded */
@media (min-width: 769px) {
    .controls {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }
}

.zoom-controls {
    position: fixed;
    top: 2%;
    left: 2%;
    background: rgba(255, 255, 255, 0.95);
    padding: 1rem;
    border-radius: 15px;
    z-index: 1000;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    align-items: center;
    min-width: 200px;
}

.zoom-indicator {
    font-size: clamp(0.75rem, 1vw, 0.9rem);
    color: #2a5298;
    font-weight: 600;
    text-align: center;
    width: 100%;
}

.zoom-buttons {
    display: flex;
    gap: 0.5rem;
    width: 100%;
    justify-content: center;
}

.zoom-btn {
    background: rgba(42, 82, 152, 0.9);
    border: none;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.5rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.zoom-btn:hover {
    background: rgba(42, 82, 152, 1);
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.zoom-btn:active {
    transform: scale(0.95);
}

.zoom-slider {
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: rgba(42, 82, 152, 0.2);
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer;
}

.zoom-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #2a5298;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease;
}

.zoom-slider::-webkit-slider-thumb:hover {
    background: #1a3d7a;
    transform: scale(1.2);
}

.zoom-slider::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #2a5298;
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease;
}

.zoom-slider::-moz-range-thumb:hover {
    background: #1a3d7a;
    transform: scale(1.2);
}

.network-intelligence-btn {
    position: absolute;
    background: linear-gradient(135deg, rgba(48, 207, 208, 0.9) 0%, rgba(0, 150, 136, 0.9) 100%);
    border: 2px solid rgba(48, 207, 208, 1);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    cursor: pointer;
    font-size: clamp(0.8rem, 1.2vw, 1rem);
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease;
    z-index: 150;
    pointer-events: auto;
    white-space: nowrap;
}

.network-intelligence-btn:hover {
    background: linear-gradient(135deg, rgba(48, 207, 208, 1) 0%, rgba(0, 150, 136, 1) 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(48, 207, 208, 0.5);
    border-color: rgba(255, 255, 255, 0.8);
}

.civicism-btn {
    position: absolute;
    background: linear-gradient(135deg, rgba(138, 43, 226, 0.9) 0%, rgba(75, 0, 130, 0.9) 100%);
    border: 2px solid rgba(138, 43, 226, 1);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    cursor: pointer;
    font-size: clamp(0.9rem, 1.3vw, 1.1rem);
    font-weight: 700;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease;
    z-index: 150;
    pointer-events: auto;
    white-space: nowrap;
}

.civicism-btn:hover {
    background: linear-gradient(135deg, rgba(138, 43, 226, 1) 0%, rgba(75, 0, 130, 1) 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(138, 43, 226, 0.5);
    border-color: rgba(255, 255, 255, 0.8);
}

.vortical-progression-btn {
    position: absolute;
    background: linear-gradient(135deg, rgba(255, 140, 0, 0.9) 0%, rgba(255, 69, 0, 0.9) 100%);
    border: 2px solid rgba(255, 140, 0, 1);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    cursor: pointer;
    font-size: clamp(0.8rem, 1.2vw, 1rem);
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    transition: all 0.2s ease;
    z-index: 150;
    pointer-events: auto;
    white-space: nowrap;
}

.vortical-progression-btn:hover {
    background: linear-gradient(135deg, rgba(255, 140, 0, 1) 0%, rgba(255, 69, 0, 1) 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 140, 0, 0.5);
    border-color: rgba(255, 255, 255, 0.8);
}

/* Mobile Optimizations */
@media (max-width: 768px) {
    .info-panel {
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        max-width: 100%;
        max-height: 100vh;
        border-radius: 0;
        padding: 1rem;
        padding-top: 3.5rem;
    }

    .info-panel h2 {
        font-size: 1.5rem;
    }

    .info-panel p {
        font-size: 1rem;
    }

    .info-panel .close-btn {
        width: 3rem;
        height: 3rem;
        font-size: 1.8rem;
        top: 0.5rem;
        right: 0.5rem;
    }

    .controls {
        bottom: 1%;
        left: 1%;
        right: 1%;
    }

    .menu-toggle {
        width: 100%;
        min-width: auto;
        padding: 1rem 1.5rem;
        font-size: 1rem;
        min-height: 44px;
    }

    .control-btn {
        padding: 1rem 1.2rem;
        font-size: 0.9rem;
        min-height: 44px; /* Minimum touch target size */
    }

    .focus-menu {
        max-height: 50vh;
    }

    .zoom-controls {
        top: 1%;
        left: 1%;
        right: 1%;
        min-width: auto;
        width: auto;
        padding: 0.75rem;
        max-width: calc(100% - 2%);
    }

    .zoom-btn {
        width: 48px;
        height: 48px;
        font-size: 1.8rem;
    }

    .zoom-slider {
        height: 8px;
    }

    .zoom-slider::-webkit-slider-thumb {
        width: 24px;
        height: 24px;
    }

    .zoom-slider::-moz-range-thumb {
        width: 24px;
        height: 24px;
    }

    .network-intelligence-btn,
    .civicism-btn {
        padding: 1rem 1.5rem;
        font-size: 1rem;
        min-height: 44px;
    }

    .domain-network-node,
    .intersectionality-node {
        min-height: 44px;
        padding: 1rem 1.2rem;
    }

    .layer-label {
        font-size: clamp(0.9rem, 4vw, 1.5rem);
    }

    .pyramid-layer.domains .layer-label {
        font-size: clamp(0.8rem, 3.5vw, 1.2rem);
    }
}

@media (max-width: 480px) {
    .menu-toggle {
        width: 100%;
    }

    .control-btn {
        width: 100%;
    }

    .zoom-controls {
        padding: 0.5rem;
    }

    .zoom-indicator {
        font-size: 0.85rem;
    }

    .info-panel {
        padding: 0.75rem;
        padding-top: 3rem;
    }

    .info-panel h2 {
        font-size: 1.3rem;
    }

    .info-panel p {
        font-size: 0.95rem;
    }
}

/* Touch-friendly hover states */
@media (hover: none) and (pointer: coarse) {
    .control-btn:hover,
    .zoom-btn:hover,
    .network-intelligence-btn:hover,
    .civicism-btn:hover,
    .domain-network-node:hover,
    .intersectionality-node:hover,
    .domain-node:hover,
    .pyramid-layer:hover {
        transform: none;
    }

    .control-btn:active,
    .zoom-btn:active {
        transform: scale(0.95);
        opacity: 0.8;
    }

    .info-link:hover {
        transform: none;
    }
}

/* Prevent text selection during pan */
#canvas-container {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
}

/* Improve touch scrolling in info panel */
.info-panel {
    -webkit-overflow-scrolling: touch;
}
    </style>
</head>
<body>
    <div id="canvas-container">
        <canvas id="main-canvas"></canvas>
        <canvas id="domain-network-canvas"></canvas>
        <canvas id="intersectionality-canvas"></canvas>
        <canvas id="vortical-progression-canvas"></canvas>
        <div id="pyramid-container"></div>
        <div id="domain-network-container"></div>
        <div id="intersectionality-container"></div>
        <div id="vortical-progression-container"></div>
        <button id="network-intelligence-btn" class="network-intelligence-btn">Network Intelligence</button>
        <button id="civicism-btn" class="civicism-btn">Civicism</button>
        <button id="vortical-progression-btn" class="vortical-progression-btn">Vortical Progression</button>
    </div>

    <div class="zoom-controls">
        <div class="zoom-indicator" id="zoom-indicator">Zoom: 100%</div>
        <div class="zoom-buttons">
            <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">+</button>
            <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">−</button>
        </div>
        <input type="range" id="zoom-slider" class="zoom-slider" min="25" max="400" value="100" step="5" oninput="setZoomFromSlider(this.value)">
    </div>

    <div class="controls">
        <button class="control-btn" onclick="resetView()">Reset View</button>
        <!-- Desktop: All buttons shown directly -->
        <button class="control-btn focus-btn" onclick="zoomToPeople()">Focus: People</button>
        <button class="control-btn focus-btn" onclick="zoomToDomains()">Focus: Domains</button>
        <button class="control-btn focus-btn" onclick="zoomToGovernance()">Focus: Governance</button>
        <button class="control-btn focus-btn" onclick="zoomToEarth()">Focus: Earth</button>
        <button class="control-btn focus-btn" onclick="focusOnIntersectionality()">Focus: Identity</button>
        <button class="control-btn focus-btn" onclick="focusOnDomainsNetwork()">Focus: Domain Network</button>
        <button class="control-btn focus-btn" onclick="focusOnNetworkIntelligence()">Focus: Network Intelligence</button>
        <button class="control-btn focus-btn" onclick="focusOnVorticalProgression()">Focus: Vortical Progression</button>
        <!-- Mobile: Collapsible menu -->
        <button class="menu-toggle" id="focus-menu-toggle" onclick="toggleFocusMenu()">Focus Options</button>
        <div class="focus-menu" id="focus-menu">
            <button class="control-btn" onclick="zoomToPeople(); toggleFocusMenu();">Focus: People</button>
            <button class="control-btn" onclick="zoomToDomains(); toggleFocusMenu();">Focus: Domains</button>
            <button class="control-btn" onclick="zoomToGovernance(); toggleFocusMenu();">Focus: Governance</button>
            <button class="control-btn" onclick="zoomToEarth(); toggleFocusMenu();">Focus: Earth</button>
            <button class="control-btn" onclick="focusOnIntersectionality(); toggleFocusMenu();">Focus: Identity</button>
            <button class="control-btn" onclick="focusOnDomainsNetwork(); toggleFocusMenu();">Focus: Domain Network</button>
            <button class="control-btn" onclick="focusOnNetworkIntelligence(); toggleFocusMenu();">Focus: Network Intelligence</button>
            <button class="control-btn" onclick="focusOnVorticalProgression(); toggleFocusMenu();">Focus: Vortical Progression</button>
        </div>
    </div>

    <div class="info-panel" id="info-panel">
        <button class="close-btn" onclick="closeInfoPanel()">×</button>
        <div id="info-content"></div>
    </div>

    <script>
// Pyramid dimensions
const pyramidBase = 1200;
const pyramidHeight = 1800;

// Layer heights - Earth is largest (base), People is smallest (apex)
const layerHeights = {
    earth: 500,      // Largest - foundation
    governance: 500,
    domains: 500,
    people: 300      // Smallest - apex
};

// Pyramid layer data - ordered from bottom (Earth) to top (People)
const pyramidData = {
    earth: {
        y: 0,  // Bottom of pyramid
        height: layerHeights.earth,
        title: 'Earth',
        description: 'Earth is the foundation of everything. It provides the air we breathe, the water we drink, the food we eat, and the resources that power our civilization. Every human activity—from growing food to building cities to running technology—depends on Earth\'s natural systems remaining healthy and functional.',
        details: `<h3>Understanding Earth as Foundation</h3>
        <p>Think of Earth like the ground floor of a building. No matter how beautiful or advanced the upper floors are, if the foundation collapses, everything falls. Earth sets the physical limits within which all human activity must operate. We can't create more planet, so we must work within its boundaries.</p>

        <h3>Past: How We've Treated Earth</h3>
        <p>For most of human history, Earth seemed infinite. Small populations had minimal environmental impact. The Industrial Revolution changed everything—we began extracting resources and producing waste at scales that started to damage Earth's natural systems. Previous economic systems (capitalism and communism alike) treated Earth as an infinite resource to exploit for human gain, ignoring the fact that we were undermining our own foundation.</p>

        <h3>Present: Current Challenges</h3>
        <p>Today we face climate change, resource depletion, pollution, biodiversity loss, and ecosystem collapse. These aren't abstract future problems—they're affecting people now, especially those with the least resources to adapt. Island nations face rising seas. Farmers face changing rainfall patterns. Communities near polluted sites face health crises. The foundation is showing cracks.</p>
        <p><strong>Key Challenge:</strong> Environmental harm doesn't affect everyone equally. Wealthy communities can often afford to move or adapt, while poor communities bear the brunt of pollution, resource scarcity, and climate impacts. This is environmental injustice—the same system that damages Earth also determines who suffers most from that damage.</p>

        <h3>Future: Civicism's Approach</h3>
        <p>Civicism places Earth at the foundation to make explicit what was always true: human prosperity is impossible without a healthy planet. Every decision in Domains, Governance, and for People must respect planetary boundaries. This isn't about choosing nature over humans—it's recognizing that protecting Earth <em>is</em> protecting humans.</p>
        <p><strong>Practical Change:</strong> Instead of asking "How can we maximize profit from this resource?" we ask "How can we meet human needs while regenerating Earth's systems?" Resource extraction, energy production, waste management, and agriculture all redesign around sustainability and regeneration.</p>

        <h3>Network Intelligence Role</h3>
        <p>Network intelligence monitors Earth's systems in real-time—tracking carbon levels, water quality, soil health, biodiversity, and resource flows. It models how different human activities affect planetary systems and predicts consequences of proposed actions. Most importantly, it ensures that environmental protection efforts serve everyone, not just those with resources to adapt.</p>
        <p><strong>Example:</strong> When designing flood protection systems, network intelligence considers which communities face the greatest risk (often poor communities in vulnerable areas), ensures protection systems serve them first, and designs solutions that work with natural systems rather than against them.</p>

        <h3>Why This Matters to You</h3>
        <p>Earth's health directly affects your daily life—the quality of air you breathe, the safety of water you drink, the stability of food prices, even the predictability of weather patterns. In Civicism, protecting Earth isn't someone else's problem or a luxury concern—it's the foundation that makes your prosperity possible.</p>`,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Governance', action: 'focus', target: 'governance' },
            { text: 'Network Intelligence', action: 'focus', target: 'network' },
            { text: 'Agriculture', action: 'domain', target: 'agriculture' },
            { text: 'Infrastructure', action: 'domain', target: 'infrastructure' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    governance: {
        y: layerHeights.earth,
        height: layerHeights.governance,
        title: 'Governance',
        description: 'Governance is how we coordinate human activity—the rules, processes, and systems that organize how we work together. It\'s the layer that turns individual actions into collective achievement, ensuring that activities in all domains work together to serve people while respecting Earth.',
        details: `<h3>Understanding Governance</h3>
        <p>Imagine trying to organize a neighborhood garden. You need rules about who can plant where, processes for deciding what to grow, systems for sharing tools and distributing harvest. Scale that up to an entire society, and you have governance—the coordination systems that turn millions of individual actions into collective prosperity.</p>

        <h3>Past: The Separation That Never Made Sense</h3>
        <p>Historically, we separated "business" (operation—actually doing things) from "government" (regulation—making rules about doing things). Businesses ran factories, stores, and services while government created laws and regulations. This separation created constant tension: businesses complained about regulations limiting profit, governments struggled to regulate fast-moving industries, and people got caught in between.</p>
        <p>This separation was artificial. Both business and government were doing the same thing: coordinating human activity. One focused on specific operations (making cars, providing healthcare) while the other focused on broader rules (safety standards, environmental limits). The separation created inefficiency, conflict, and often served those with power more than those without.</p>

        <h3>Present: Current Governance Challenges</h3>
        <p><strong>Corporate Power:</strong> Large corporations often have more practical power than governments, influencing regulations, avoiding accountability, and prioritizing profit over human welfare.</p>
        <p><strong>Regulatory Capture:</strong> Industries influence the agencies meant to regulate them, turning regulation into protection of established interests rather than public good.</p>
        <p><strong>Opacity:</strong> Most people have no meaningful access to how decisions get made—whether in government or in corporations that affect their lives.</p>
        <p><strong>Hierarchical Rigidity:</strong> Both corporate and government structures often concentrate power at the top, limiting feedback from those most affected by decisions.</p>

        <h3>Future: Civicism's Unified Governance</h3>
        <p>Civicism recognizes that business and government are two aspects of the same function: coordination. Instead of maintaining artificial separation, we unify them into transparent governance systems that coordinate activity within and across domains.</p>
        <p><strong>How It Works:</strong></p>
        <ul>
            <li><strong>Domain-Based Committees:</strong> Healthcare workers, patients, and community members govern healthcare. Agricultural workers, farmers, and food security experts govern agriculture. Those closest to the work help coordinate it.</li>
            <li><strong>Scaling Coordination:</strong> Local committees handle local decisions. Regional committees coordinate across localities. National committees handle society-wide coordination. Each level informs the others—relationships are cyclical, not hierarchical.</li>
            <li><strong>Transparent Operations:</strong> Everyone has access to see how decisions get made, how resources flow, and why particular choices happen. Transparency isn't just about accountability—it's about enabling informed participation.</li>
            <li><strong>Cyclical Relationships:</strong> Managers provide direction while workers inform and shape management decisions. Regulators guide operations while operational realities inform and refine regulations. Responsibility flows in circles, not down hierarchies.</li>
        </ul>

        <h3>Network Intelligence Role</h3>
        <p>Network intelligence makes this complex coordination possible by:</p>
        <ul>
            <li><strong>Information Flow:</strong> Ensuring relevant information reaches the right committees at the right time—tracking resource flows, identifying emerging issues, connecting related activities across domains.</li>
            <li><strong>Pattern Recognition:</strong> Identifying when coordination breaks down, when resources accumulate rather than circulate, when outcomes diverge from intentions.</li>
            <li><strong>Decision Support:</strong> Modeling consequences of proposed coordination mechanisms, predicting how different approaches affect different groups, suggesting alternatives when current systems create inequity.</li>
            <li><strong>Feedback Integration:</strong> Continuously gathering input from people affected by coordination decisions and incorporating that feedback into governance processes.</li>
        </ul>
        <p><strong>Example:</strong> When healthcare committees consider new service delivery models, network intelligence provides data on current access patterns, predicts how different models affect different communities, highlights groups currently underserved, and tracks implementation to ensure intended outcomes actually occur.</p>

        <h3>Why This Matters to You</h3>
        <p>Governance directly affects your daily life—whether you can afford housing, access healthcare, find meaningful work, get education, or participate in decisions affecting your community. Civicism's governance makes these coordination systems transparent and participatory rather than opaque and hierarchical, giving you real voice in systems that shape your life.</p>`,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Earth', action: 'focus', target: 'earth' },
            { text: 'Network Intelligence', action: 'focus', target: 'network' },
            { text: 'View All Domains', action: 'focus', target: 'domains-network' },
            { text: 'Economics', action: 'domain', target: 'economics' },
            { text: 'Justice', action: 'domain', target: 'justice' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    domains: {
        y: layerHeights.earth + layerHeights.governance,
        height: layerHeights.domains,
        title: 'Domains',
        description: 'Domains are the different types of activities humans do together—the nine fundamental areas where organized human work happens. Think of them as the categories of things society needs to function: growing food (Agriculture), managing resources (Economics), sharing knowledge (Education), creating culture (Entertainment), maintaining health (Healthcare), building systems (Infrastructure), ensuring fairness (Justice), providing safety (Security), and developing tools (Technology).',
        details: `<h3>Understanding Domains</h3>
        <p>Every human activity falls into one of nine domains. When you go to school, that's Education. When you visit a doctor, that's Healthcare. When you use roads or internet, that's Infrastructure. When you eat food, that's Agriculture. These domains aren't separate silos—they're interconnected parts of one system serving human prosperity.</p>

        <h3>The Nine Domains</h3>
        <ul>
            <li><strong>Agriculture:</strong> Food production, farming, sustainable land use</li>
            <li><strong>Economics:</strong> Resource circulation, value creation, material organization</li>
            <li><strong>Education:</strong> Knowledge transfer, skill development, learning systems</li>
            <li><strong>Entertainment:</strong> Cultural production, artistic expression, joy creation</li>
            <li><strong>Healthcare:</strong> Health services, prevention, medical innovation</li>
            <li><strong>Infrastructure:</strong> Physical and digital systems enabling other domains</li>
            <li><strong>Justice:</strong> Legal systems, dispute resolution, rights protection</li>
            <li><strong>Security:</strong> Protection systems, safety, threat prevention</li>
            <li><strong>Technology:</strong> Tool development, innovation, capability enhancement</li>
        </ul>

        <h3>Past: Disconnected Silos</h3>
        <p>Historically, these domains operated in isolation. Healthcare didn't coordinate with Education about health literacy. Agriculture didn't coordinate with Infrastructure about distribution systems. Economics operated separately from all of them, treating each domain as independent markets rather than interconnected systems.</p>
        <p>This created massive inefficiencies and missed opportunities. Solutions in one domain often created problems in others. Agricultural practices that increased food production (Agriculture) damaged environmental health (Earth and Healthcare). Economic systems that maximized profit (Economics) undermined educational access (Education) and healthcare quality (Healthcare).</p>

        <h3>Present: Current Challenges</h3>
        <p><strong>Siloed Thinking:</strong> Experts in each domain rarely coordinate with others, missing crucial interconnections.</p>
        <p><strong>Market Distortion:</strong> Domains treated as profit centers rather than services for human prosperity, creating perverse incentives.</p>
        <p><strong>Unequal Access:</strong> Some people access all domain services easily while others struggle to access even basic healthcare, education, or food security.</p>
        <p><strong>Innovation Gaps:</strong> Breakthrough solutions often require cross-domain coordination that current structures make difficult.</p>

        <h3>Future: Civicism's Integrated Domains</h3>
        <p>Civicism recognizes that domains must coordinate as an integrated system. Each domain operates through transparent committees (see Governance), but those committees coordinate with committees in other domains to ensure solutions serve the whole system.</p>
        <p><strong>How Integration Works:</strong></p>
        <ul>
            <li><strong>Healthcare coordinates with Education</strong> about health literacy programs</li>
            <li><strong>Agriculture coordinates with Infrastructure</strong> about food distribution networks</li>
            <li><strong>Technology coordinates with all domains</strong> about digital tools serving each area</li>
            <li><strong>Economics coordinates with every domain</strong> about resource flows and circulation</li>
            <li><strong>Justice coordinates with Security</strong> about ensuring protection systems respect rights</li>
        </ul>
        <p>Click "View All Domains" to explore the network showing how all nine domains interconnect. Each domain connects to all eight others, creating a comprehensive system of coordination.</p>

        <h3>Network Intelligence Role</h3>
        <p>Network intelligence enables domain coordination by:</p>
        <ul>
            <li><strong>Cross-Domain Insights:</strong> Identifying how activities in one domain affect others (e.g., how agricultural practices affect healthcare outcomes)</li>
            <li><strong>Resource Optimization:</strong> Ensuring resources flow to domains based on actual need rather than profit potential</li>
            <li><strong>Gap Identification:</strong> Spotting when domain services fail to reach certain communities and coordinating solutions</li>
            <li><strong>Innovation Connection:</strong> Linking innovations across domains (e.g., connecting educational methods to healthcare training)</li>
        </ul>
        <p><strong>Example:</strong> When addressing food insecurity, network intelligence coordinates Agriculture (food production), Economics (resource allocation), Infrastructure (distribution systems), Healthcare (nutrition needs), and Education (food literacy) to create comprehensive solutions rather than isolated interventions.</p>

        <h3>Why This Matters to You</h3>
        <p>Your daily life touches multiple domains constantly. You need healthcare when sick, education to develop skills, infrastructure to move around, security to feel safe, agriculture for food. In Civicism, these domains coordinate to serve you rather than operating as disconnected systems you must navigate alone.</p>`,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Governance', action: 'focus', target: 'governance' },
            { text: 'Earth', action: 'focus', target: 'earth' },
            { text: 'Network Intelligence', action: 'focus', target: 'network' },
            { text: 'View All Domains', action: 'focus', target: 'domains-network' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    people: {
        y: layerHeights.earth + layerHeights.governance + layerHeights.domains,
        height: layerHeights.people,
        title: 'People',
        description: 'People are the point of everything. The entire pyramid—Earth, Governance, Domains—exists for one purpose: enabling human beings to thrive. Not some people. Not average people. Every actual person, in all their complexity, with all their unique needs, capabilities, and experiences.',
        details: `<h3>Understanding People as Purpose</h3>
        <p>Placing People at the apex isn't about human supremacy over nature or other considerations. It's about making explicit what should always be obvious: every system, structure, and decision should ultimately serve human prosperity. When we protect Earth, it's because humans need a healthy planet. When we organize Governance, it's to coordinate human activity. When we operate Domains, it's to serve human needs. Everything points upward to People.</p>

        <h3>Past: Treating People as Categories</h3>
        <p>Previous systems reduced people to simple categories: workers, consumers, citizens, taxpayers. Capitalism saw you primarily as labor or a market. Communism saw you primarily as a worker. Democracy saw you primarily as a voter. These categories made systems simpler to manage but ignored the reality of human complexity.</p>
        <p>A person might be a worker, parent, artist, community member, someone with a disability, someone of a particular ethnicity, someone with specific health needs, and someone with unique dreams and capabilities—all at once. Treating them as just "a worker" or "a consumer" missed most of who they actually are and what they actually need to flourish.</p>

        <h3>Present: Intersectional Reality</h3>
        <p>Today we're beginning to understand what legal scholar Kimberlé Crenshaw articulated as "intersectionality"—the reality that people exist at the intersection of multiple identities and social locations simultaneously. These intersections aren't just additive; they create unique experiences that can't be understood by looking at each factor separately.</p>
        <p><strong>Examples of Intersectional Reality:</strong></p>
        <ul>
            <li>A young Black woman's experience of job discrimination is distinct from both "discrimination as a Black person" and "discrimination as a woman"—it's specifically anti-Black misogyny that operates differently from either alone.</li>
            <li>An elderly immigrant with a disability faces barriers that aren't just age + immigration status + disability added together, but a unique combination that requires specific understanding.</li>
            <li>A rural LGBTQ+ teenager faces challenges distinct from urban LGBTQ+ youth or rural heterosexual teens—the intersection creates specific experiences.</li>
        </ul>
        <p>Current systems struggle with this complexity. Programs designed for "the poor" might miss that poverty affects different communities differently. Healthcare designed for "patients" might miss that different communities have different relationships with medical systems and different health needs.</p>

        <h3>Future: Civicism's Approach to People</h3>
        <p>Civicism recognizes that serving "people" means serving actual individuals in all their intersectional complexity. This doesn't mean creating separate systems for every possible combination of identities—that would be impossible. Instead, it means:</p>
        <ul>
            <li><strong>Flexible Design:</strong> Systems designed to adapt to different needs rather than forcing everyone into one template</li>
            <li><strong>Continuous Feedback:</strong> People most affected by systems have meaningful voice in how those systems operate</li>
            <li><strong>Intersectional Analysis:</strong> Understanding how solutions affect different groups differently and adjusting to ensure everyone benefits</li>
            <li><strong>Circulation Principle:</strong> Resources flow based on actual need, which requires understanding how multiple factors shape what people actually need</li>
        </ul>

        <h3>Network Intelligence Role</h3>
        <p>Network intelligence makes it possible to serve people in their intersectional complexity by:</p>
        <ul>
            <li><strong>Pattern Recognition:</strong> Identifying when solutions work for some groups but not others, revealing hidden barriers</li>
            <li><strong>Personalized Coordination:</strong> Connecting individuals with specific combinations of needs to appropriate resources and opportunities</li>
            <li><strong>Barrier Analysis:</strong> Understanding not just that someone struggles to access healthcare/housing/education, but why—what specific combination of factors creates their specific barriers</li>
            <li><strong>Outcome Tracking:</strong> Monitoring whether changes actually improve life for diverse people, not just average outcomes</li>
        </ul>
        <p><strong>Example:</strong> A single mother who is also a recent immigrant, has a child with special needs, works non-standard hours, and lives in a food desert faces a unique combination of challenges. Network intelligence coordinates appropriate childcare, healthcare access, food programs, education support, and work flexibility—not as separate programs she must navigate separately, but as integrated support recognizing her specific situation.</p>

        <h3>The Circulation Principle</h3>
        <p>Civicism operates on a circulation principle: resources must flow to where they're needed and circulate back from where they accumulate. This is fundamentally different from both capitalist accumulation (where resources concentrate with capital) and communist redistribution (where centralized authority allocates resources).</p>
        <p>Circulation recognizes that prosperity requires movement—like blood in a body or nutrients in an ecosystem. When resources accumulate rather than circulate, the system sickens. When resources flow based on actual need (understood intersectionally), everyone prospers.</p>

        <h3>Why This Matters to You</h3>
        <p>You are not a category or a statistic. You are a unique person with a specific combination of identities, experiences, needs, and capabilities. Civicism is designed to serve YOU—not an abstract average person, but you in all your specific complexity. The systems coordinate around your needs rather than forcing you to navigate disconnected bureaucracies designed for someone else.</p>`,
        relatedLinks: [
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Governance', action: 'focus', target: 'governance' },
            { text: 'Earth', action: 'focus', target: 'earth' },
            { text: 'Network Intelligence', action: 'focus', target: 'network' },
            { text: 'View All Domains', action: 'focus', target: 'domains-network' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' },
            { text: 'Cultural Dimensions', action: 'intersectionality', target: 'cultural-dimensions' },
            { text: '*Isms', action: 'intersectionality', target: 'isms' }
        ]
    }
};

// Domain nodes for network visualization - all equal size
const domainNodes = [
    {
        name: 'Agriculture',
        id: 'agriculture',
        description: 'Agriculture is how humanity feeds itself. It encompasses everything involved in growing food, raising livestock, and managing the natural resources that support these activities. From the family farm to industrial food production, from organic gardens to precision agriculture, this domain is where humans work with Earth to sustain human life.',
        details: `
            <h3>Understanding Agriculture</h3>
            <p>Agriculture connects humans directly to Earth's living systems. It's not just about producing food—it's about managing soil health, water resources, plant genetics, animal welfare, and the complex ecosystems that make food production possible. Every meal you eat connects you to this domain, linking you through food to farmers, land, water, and the web of life that sustains us all.</p>

            <h3>Past: Agriculture as Private Enterprise</h3>
            <p>Historically, agriculture operated through a mix of small family farms and, increasingly, large corporate agribusiness. The Green Revolution of the mid-20th century dramatically increased food production through high-yield crop varieties, synthetic fertilizers, and mechanization—feeding billions who might otherwise have starved. This was a genuine human achievement.</p>
            <p>However, this system created significant problems. Corporate consolidation meant a handful of companies controlled seed patents, agricultural chemicals, and food distribution. Farmers became dependent on expensive inputs they couldn't control. Industrial agriculture degraded soil, depleted aquifers, eliminated biodiversity, and contributed significantly to climate change through its heavy reliance on fossil fuels. Meanwhile, despite massive food production, nearly 800 million people remained chronically hungry—not because there wasn't enough food, but because the economic system didn't ensure food reached those who needed it.</p>
            <p>Small farmers struggled with volatile commodity prices, debt, and competition from subsidized industrial operations. Rural communities declined as agriculture industrialized. Indigenous and traditional farming knowledge was often dismissed in favor of standardized industrial methods that didn't account for local conditions or environmental limits.</p>

            <h3>Present: Tensions and Challenges</h3>
            <p>Today's agriculture faces mounting challenges. Climate change disrupts traditional growing patterns, bringing unpredictable weather, changing pest distributions, and threatening water supplies. Soil degradation from intensive farming reduces productivity. Pollinator populations decline. Aquifers deplete. Agricultural runoff creates dead zones in oceans and contaminates drinking water.</p>
            <p>Economically, farmers struggle with low margins while food corporations profit. Workers in industrial agriculture—often immigrants and people of color—face exploitation, low wages, and unsafe conditions. Access to healthy food follows lines of inequality: affluent communities have farmers' markets and organic options while low-income neighborhoods face food deserts with only highly processed, nutritionally poor options.</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>A farmer can produce abundant corn but earn so little that they need off-farm employment to survive, while agricultural corporations post record profits.</li>
                <li>Technology can optimize every aspect of farming, but the data collected becomes corporate property that farmers can't access or control.</li>
                <li>We produce enough food globally to feed everyone, yet hunger persists because people lack economic access to food.</li>
                <li>Sustainable farming methods exist and work, but economic pressures push farmers toward methods that maximize short-term yields at the expense of long-term soil health.</li>
            </ul>

            <h3>Future: Civicism's Approach to Agriculture</h3>
            <p>Civicism reorganizes agriculture around a fundamental principle: food is for people, and farming must sustain both humans and the Earth that supports us. This means several key shifts:</p>
            <ul>
                <li><strong>Food as Circulation, Not Commodity:</strong> Food circulates to people based on need, not ability to pay. Farmers receive support based on actual food production and land stewardship, not market commodity prices.</li>
                <li><strong>Regenerative by Default:</strong> Agricultural practices must regenerate soil, support biodiversity, conserve water, and sequester carbon. The system rewards farmers for environmental stewardship, not just yield.</li>
                <li><strong>Knowledge Networks:</strong> Farmers share knowledge, data, and innovations openly. Traditional ecological knowledge from indigenous and local farmers integrates with modern science.</li>
                <li><strong>Domain Committee Coordination:</strong> Agricultural committees coordinate from local to national levels, connecting farmers with resources, markets, and support while ensuring environmental standards.</li>
                <li><strong>Intersectional Food Justice:</strong> The system recognizes how food insecurity intersects with race, class, geography, and other factors, designing solutions that address specific barriers different communities face.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence transforms agricultural coordination by:</p>
            <ul>
                <li><strong>Precision Stewardship:</strong> Analyzing soil conditions, weather patterns, pest dynamics, and crop health to optimize farming decisions for both productivity and environmental health—not just maximizing yield but maintaining ecosystem integrity.</li>
                <li><strong>Supply Chain Coordination:</strong> Connecting farmers with processing, distribution, and consumers to reduce waste and ensure food reaches people who need it. Tracking food from farm to table while respecting farmer privacy.</li>
                <li><strong>Resource Optimization:</strong> Managing water use, energy consumption, and input needs across regional agricultural systems to operate within environmental limits while meeting nutritional needs.</li>
                <li><strong>Knowledge Transfer:</strong> Connecting farmers with relevant research, successful practices, and each other—enabling rapid adoption of innovations while preserving valuable local knowledge.</li>
                <li><strong>Climate Adaptation:</strong> Monitoring changing conditions and helping farmers adapt planting times, crop varieties, and practices to maintain productivity as climate shifts.</li>
                <li><strong>Barrier Analysis:</strong> Identifying when certain farmers or communities lack access to resources, markets, or support—and coordinating solutions that address their specific situations.</li>
            </ul>
            <p><strong>Example:</strong> A small-scale farmer practicing regenerative agriculture can access the same level of data-driven insights as industrial operations once had exclusively. Network intelligence analyzes their specific soil, microclimate, and ecosystem to recommend practices that increase yield while improving soil health. It connects them with markets valuing sustainably produced food and coordinates with other local farmers for shared equipment and knowledge. When climate patterns shift, it provides early warning and adaptation strategies. Meanwhile, it tracks the environmental benefits of their stewardship—carbon sequestered, biodiversity supported, water conserved—which factors into the support they receive.</p>

            <h3>Cross-Domain Integration</h3>
            <p>Agriculture doesn't operate alone. It coordinates with Economics (resource allocation and market systems), Infrastructure (transportation and water systems), Technology (agricultural innovation and tools), Healthcare (nutrition and food safety), Education (agricultural knowledge transfer), Justice (land rights and labor protection), and Security (food security). These connections ensure agricultural activity serves human prosperity while respecting Earth's boundaries.</p>

            <h3>Why This Matters to You</h3>
            <p>You eat food every day. That food connects you to farmers, land, water, and the complex systems that make food production possible. In Civicism's agricultural system, the food you eat nourishes you while the production of that food regenerates Earth rather than degrading it. Farmers receive dignified support for their essential work. Food reaches you based on need, not just purchasing power. The agricultural system serves human prosperity and planetary health simultaneously—because human prosperity depends on a healthy planet.</p>
        `,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Earth', action: 'focus', target: 'earth' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Economics', action: 'domain', target: 'economics' },
            { text: 'Infrastructure', action: 'domain', target: 'infrastructure' },
            { text: 'Technology', action: 'domain', target: 'technology' },
            { text: 'Healthcare', action: 'domain', target: 'healthcare' },
            { text: 'Education', action: 'domain', target: 'education' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    {
        name: 'Economics',
        id: 'economics',
        description: 'Economics is how society organizes the production, distribution, and circulation of resources—everything from food and shelter to healthcare and education. It answers fundamental questions: What gets produced? How is it distributed? Who gets access? In Civicism, economics shifts from accumulation to circulation, ensuring resources flow to where they are needed.',
        details: `
            <h3>Understanding Economics</h3>
            <p>Economics is often presented as a neutral science of markets and efficiency, but it's actually a set of choices about how we organize our collective resources. Every economic system embodies values about what matters, who deserves what, and how society should function. The question isn't whether to have an economic system—we need one to coordinate complex societies—but what values that system serves.</p>

            <h3>Past: Accumulation-Based Economics</h3>
            <p>Previous economic systems—capitalism most prominently—organized around accumulation. Capital accumulated with those who owned productive assets. The logic was that concentrating resources with capitalists who would invest them would drive innovation and growth, eventually benefiting everyone through "trickle-down" prosperity.</p>
            <p>This created extraordinary material abundance in some places and for some people. Capitalism's competitive markets and profit motives generated remarkable innovation. Global GDP increased dramatically over the past two centuries. Billions of people gained access to technologies and resources their ancestors couldn't imagine.</p>
            <p>However, accumulation-based economics created deep problems. Wealth concentrated dramatically: by 2024, the richest 1% owned more wealth than the bottom 90% combined. This wasn't a temporary inequality that growth would fix—it was inequality baked into the system's logic. Capital accumulates; those who have resources can multiply them while those without resources fall further behind.</p>
            <p>This inequality mapped onto racial, gender, and geographic lines, reflecting historical patterns of colonialism, slavery, and discrimination. Wealth accumulated in formerly colonizing nations while formerly colonized regions provided cheap labor and resources. Within nations, white communities accumulated wealth through systems that explicitly excluded Black, Indigenous, and other communities of color.</p>
            <p>Meanwhile, the imperative for endless growth to maintain accumulation pushed against planetary boundaries. Economic activity increasingly degraded the environmental systems that sustain human life—treating Earth's resources as infinite inputs and its capacity to absorb waste as unlimited.</p>

            <h3>Present: Crisis of Accumulation</h3>
            <p>Today's economy faces mounting contradictions. We produce enough food to feed everyone, yet people starve. We have empty housing while people live on streets. We have massive wealth alongside desperate poverty. We know environmental limits exist but economic logic demands growth regardless of planetary boundaries.</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>Companies automate work to increase profits, but when people lose income, who buys the products? The system produces efficiency that undermines its own customer base.</li>
                <li>Financial markets reward companies for cutting costs (including worker wages and environmental protections), creating short-term gains that erode long-term social and environmental health.</li>
                <li>Housing becomes an investment vehicle rather than shelter, pricing people out of homes in pursuit of returns for investors.</li>
                <li>Healthcare operates as a profit center rather than a human service, leaving those most in need unable to afford care while investors profit from their desperation.</li>
                <li>Innovation serves whoever can pay rather than humanity's most pressing needs—we get apps for convenience while critical problems languish unsolved.</li>
            </ul>
            <p>The COVID-19 pandemic revealed these contradictions starkly: essential workers keeping society functioning were often lowest-paid and most vulnerable, while stock markets reached record highs even as millions struggled. The economy valued financial assets over human lives.</p>

            <h3>Future: Circulation-Based Economics</h3>
            <p>Civicism reorganizes economics around circulation rather than accumulation. Like blood in a body or nutrients in an ecosystem, resources must flow—moving to where they're needed and circulating back from where they accumulate. This represents a fundamental shift:</p>
            <ul>
                <li><strong>Production for Need, Not Profit:</strong> Economic activity aims to meet human needs within planetary boundaries, not maximize returns to capital. Domains produce what people actually need.</li>
                <li><strong>Circulation Mechanisms:</strong> Resources automatically flow toward need and away from accumulation. Wealth doesn't pool with capital owners but circulates to support human flourishing.</li>
                <li><strong>Intersectional Resource Allocation:</strong> Distribution recognizes that different people and communities need different resources due to their intersecting circumstances. A single parent, recent immigrant, working multiple jobs needs different support than a wealthy retiree.</li>
                <li><strong>Ecological Accounting:</strong> Economic decisions account for environmental costs and benefits, recognizing that destroying Earth's systems destroys the foundation of any economy.</li>
                <li><strong>Domain Committee Coordination:</strong> Economic committees coordinate resource allocation across and within domains, ensuring Agriculture, Healthcare, Infrastructure, and all domains have resources to serve people.</li>
                <li><strong>Labor as Contribution:</strong> People contribute to collective prosperity through their work, receiving support commensurate with their contribution and need—not exploited for surplus value that accumulates with capital owners.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence makes circulation-based economics possible by:</p>
            <ul>
                <li><strong>Resource Flow Tracking:</strong> Monitoring where resources accumulate versus where they're needed, identifying blockages in circulation and coordinating flows to address actual needs.</li>
                <li><strong>Needs Assessment:</strong> Understanding what different people and communities actually need based on their specific intersecting circumstances—not assuming one-size-fits-all solutions.</li>
                <li><strong>Production Coordination:</strong> Connecting production capacity across domains with human needs, ensuring we produce what people need rather than what maximizes profit.</li>
                <li><strong>Ecological Monitoring:</strong> Tracking environmental impacts of economic activity, ensuring we operate within planetary boundaries while meeting human needs.</li>
                <li><strong>Outcome Analysis:</strong> Monitoring whether circulation actually improves lives across diverse communities, identifying when solutions work for some but not others.</li>
                <li><strong>Innovation Direction:</strong> Guiding innovation toward solving pressing human and environmental needs rather than maximizing returns to investors.</li>
            </ul>
            <p><strong>Example:</strong> Network intelligence identifies that a community faces food insecurity not from lack of food production but from insufficient economic access and inadequate transportation infrastructure. It coordinates with Agriculture to direct food flow there, with Infrastructure to improve distribution systems, with Healthcare to address nutrition-related health issues, and with local economic committees to ensure people have the means to access food sustainably. Rather than treating hunger as an individual failing, it addresses the systemic circulation blockages creating the problem.</p>

            <h3>Cross-Domain Integration</h3>
            <p>Economics coordinates with every domain—Agriculture (food production and distribution), Healthcare (resource allocation for health), Education (investment in human development), Infrastructure (resource allocation for systems), Technology (innovation direction), Entertainment (creative economy), Justice (economic rights and fairness), and Security (economic security). Economic coordination ensures all domains have resources to serve people while respecting Earth's boundaries.</p>

            <h3>Why This Matters to You</h3>
            <p>Economics shapes your daily life profoundly—whether you can afford housing, access healthcare, get education, find meaningful work, or have security. In capitalism, you navigate an economic system designed to extract value from your labor and your needs. In Civicism's circulation-based economics, the system coordinates to ensure you have what you need to flourish—not because you can pay for it, but because human prosperity is the point. Resources circulate to serve you based on your actual needs and circumstances, while your contributions support others' flourishing.</p>
        `,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Governance', action: 'focus', target: 'governance' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Agriculture', action: 'domain', target: 'agriculture' },
            { text: 'Technology', action: 'domain', target: 'technology' },
            { text: 'Education', action: 'domain', target: 'education' },
            { text: 'Entertainment', action: 'domain', target: 'entertainment' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    {
        name: 'Education',
        id: 'education',
        description: 'Education is how humans learn—how we transfer knowledge, develop skills, foster critical thinking, and enable each generation to build on what previous generations discovered. From early childhood learning to lifelong development, education shapes human capability and potential.',
        details: `
            <h3>Understanding Education</h3>
            <p>Education is more than schooling, though schools are part of it. It's the entire system through which humans share knowledge and develop capabilities—from parents teaching children to formal institutions, from apprenticeships to research universities, from self-directed learning to collaborative discovery. Education determines who gets to know what, who develops which skills, and how knowledge moves through society.</p>

            <h3>Past: Education for Social Sorting</h3>
            <p>Historically, formal education systems primarily served to sort people into social and economic positions. While publicly stated goals emphasized enlightenment and opportunity, actual functioning reinforced existing hierarchies. Wealthy children attended well-funded schools with enriching opportunities, while poor children attended under-resourced schools training them for manual labor. This wasn't accidental—it was designed this way.</p>
            <p>In the United States, for example, segregated schools explicitly provided inferior education to Black students. Even after formal segregation ended, school funding through local property taxes ensured wealthy (predominantly white) communities had excellent schools while poor (disproportionately Black and brown) communities struggled with crumbling buildings, outdated materials, and overwhelmed teachers.</p>
            <p>Education also served gatekeeping functions—determining who could access professions, who could participate in governance, who was considered "educated" versus "ignorant." The knowledge valued in formal education reflected particular cultural perspectives, often dismissing Indigenous knowledge, working-class expertise, and non-Western traditions as inferior or irrelevant.</p>
            <p>Meanwhile, educational opportunity correlated strongly with parental wealth. Children from affluent families not only attended better-funded schools but had private tutors, enrichment activities, test prep, college counselors—advantages compounding across years of schooling. By the time they applied to university, they appeared more "meritorious," though merit reflected accumulated advantage, not innate capability.</p>

            <h3>Present: Contradictions and Barriers</h3>
            <p>Today's educational systems face mounting contradictions. We recognize education as essential for human development and social participation, yet access remains deeply unequal. We have more educational resources than ever—vast libraries of knowledge online—yet many people lack access or the context to use them effectively.</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>College degrees become increasingly necessary for economic security, yet college becomes increasingly unaffordable, trapping students in debt that constrains their futures.</li>
                <li>Standardized testing claims to measure merit objectively, yet scores correlate more strongly with family income than with actual learning or potential.</li>
                <li>Technology enables personalized learning at scale, yet algorithmic systems can embed and amplify existing biases about who can learn what.</li>
                <li>Schools in wealthy areas offer art, music, advanced sciences, small classes, and enrichment programs while schools serving poor communities struggle to provide basic supplies.</li>
                <li>Educational credentials from elite institutions open doors regardless of what was actually learned, while brilliant people without credentials face closed doors regardless of their capabilities.</li>
                <li>Teachers—doing perhaps society's most important work—are underpaid, overworked, and under-supported, leading to shortages and burnout.</li>
            </ul>
            <p>The pandemic revealed these inequalities starkly. Some students transitioned to remote learning with private spaces, high-speed internet, and parental support. Others shared devices, lacked reliable internet, managed household responsibilities, or worked essential jobs while trying to learn. The achievement gap widened not because some students couldn't learn but because they lacked the resources to learn under those conditions.</p>

            <h3>Future: Civicism's Approach to Education</h3>
            <p>Civicism reorganizes education around human development rather than social sorting. Education exists to enable every person to develop their full potential and contribute to collective prosperity. This means fundamental shifts:</p>
            <ul>
                <li><strong>Universal Access:</strong> Everyone has access to high-quality educational resources and support regardless of geography, economic status, or background. Education is a right, not a commodity.</li>
                <li><strong>Personalized Learning Paths:</strong> Education adapts to each person's learning style, pace, interests, and circumstances rather than forcing everyone through identical experiences. Someone who learns best through hands-on practice gets that; someone who learns best through reading gets that.</li>
                <li><strong>Lifelong Development:</strong> Education isn't confined to youth but supports continuous learning throughout life as people's needs, interests, and circumstances change.</li>
                <li><strong>Knowledge Integration:</strong> Formal academic knowledge integrates with practical experience, traditional wisdom, and diverse ways of knowing—recognizing that expertise takes many forms.</li>
                <li><strong>Domain Connections:</strong> Education connects clearly to how people participate in domains—Agriculture, Healthcare, Technology, etc.—making learning relevant to actual human activity.</li>
                <li><strong>Intersectional Support:</strong> Educational systems recognize how multiple factors shape learning experiences and provide support addressing specific barriers different people face.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence transforms education by:</p>
            <ul>
                <li><strong>Personalized Learning:</strong> Adapting educational experiences to each learner's style, pace, and context—not forcing everyone through identical paths but recognizing diverse ways people learn.</li>
                <li><strong>Knowledge Connection:</strong> Linking learners with knowledge, resources, and teachers relevant to what they're trying to learn—whether academic subjects, practical skills, or domain-specific expertise.</li>
                <li><strong>Barrier Identification:</strong> Recognizing when learners struggle not from inability to learn but from circumstances preventing learning—lack of time, inadequate resources, unsupportive environments—and coordinating solutions.</li>
                <li><strong>Progress Tracking:</strong> Monitoring actual learning and development rather than measuring compliance or sorting—helping learners understand their growth and identifying where they need support.</li>
                <li><strong>Teacher Support:</strong> Providing teachers with insights about how different students learn best, what struggles they face, and what resources would help—enabling teachers to teach more effectively.</li>
                <li><strong>Community Learning:</strong> Connecting learners with each other for collaborative learning, peer support, and knowledge sharing—recognizing that people learn from each other, not just from formal instruction.</li>
            </ul>
            <p><strong>Example:</strong> A young person interested in sustainable agriculture accesses learning experiences connecting ecological science, traditional farming knowledge, modern technology, economic principles, and hands-on practice. Network intelligence adapts content to their learning style, connects them with farmers and researchers, helps them develop expertise through real projects, and links their learning to actual participation in Agriculture domain activities. If they face barriers—working to support family, managing disability, caring for siblings—the system adapts, providing flexible access and appropriate support rather than penalizing them for circumstances beyond their control.</p>

            <h3>Cross-Domain Integration</h3>
            <p>Education connects with every domain. Healthcare requires health education and medical training. Technology needs technical education and digital literacy. Agriculture requires agricultural knowledge transfer. Economics involves understanding resource systems. Entertainment includes cultural learning. Justice requires legal literacy. Security needs understanding of safety. Infrastructure involves engineering and planning knowledge. Education enables participation across all domains.</p>

            <h3>Why This Matters to You</h3>
            <p>Your education shaped who you are and what you can do. In current systems, educational opportunity depends heavily on circumstances of your birth—your family's wealth, your geographic location, your race, your gender, your parents' education. In Civicism's educational system, you have access to knowledge and learning support based on your interests and aspirations, not your parents' income. The system adapts to how you learn best rather than forcing you to adapt to a one-size-fits-all approach. Learning continues throughout your life as your interests evolve and circumstances change, enabling you to develop your full potential and contribute meaningfully to collective prosperity.</p>
        `,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Healthcare', action: 'domain', target: 'healthcare' },
            { text: 'Entertainment', action: 'domain', target: 'entertainment' },
            { text: 'Justice', action: 'domain', target: 'justice' },
            { text: 'Economics', action: 'domain', target: 'economics' },
            { text: 'Security', action: 'domain', target: 'security' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    {
        name: 'Entertainment',
        id: 'entertainment',
        description: 'Entertainment is how humans create and share culture—our stories, music, art, games, performances, and all the creative expressions that make us human. It\'s not frivolous luxury but fundamental to human flourishing, providing meaning, joy, connection, and the cultural narratives that shape how we understand ourselves and each other.',
        details: `
            <h3>Understanding Entertainment</h3>
            <p>Entertainment encompasses everything from ancient storytelling around fires to modern streaming services, from children's play to Olympic competitions, from folk music to symphonies, from street art to galleries. It's how we express creativity, share experiences, explore possibilities, process emotions, build communities, and pass culture across generations. Human prosperity without art, music, story, and play wouldn't be prosperity at all—it would be mere survival.</p>

            <h3>Past: Culture as Commodity</h3>
            <p>Entertainment has always existed, but capitalism transformed culture into commodity. Throughout most of human history, cultural production was embedded in community life—people made music, told stories, created art, and played games together as part of living. Professional entertainers existed, but most cultural production happened participatorily.</p>
            <p>Industrial capitalism changed this. Recording technology, film, broadcasting, and eventually digital media enabled mass production and distribution of culture. This brought benefits—more people could access brilliant performances, stories could reach global audiences, cultural works could be preserved. But it also meant culture became a product to sell.</p>
            <p>This commodification created problems. Major media companies consolidated, controlling what stories got told, whose voices got heard, and what cultural expressions reached audiences. Profit motives shaped cultural production—not what humans needed to flourish but what sold best. Diverse voices, challenging narratives, and culturally specific expressions struggled for space against formulaic blockbusters and commercially safe content.</p>
            <p>Meanwhile, creators often received minimal compensation while corporations profited enormously from their work. Musicians earned pennies per stream while platforms made billions. Writers sold rights for small advances while publishers and studios reaped rewards. The people doing creative work—essential human work—struggled economically while intermediaries accumulated wealth.</p>
            <p>This system also exported dominant culture globally, often drowning out local cultural traditions. Hollywood films, American music, and Western media formats spread worldwide, not necessarily because they were superior but because of economic and distribution power behind them.</p>

            <h3>Present: Digital Disruption and Extraction</h3>
            <p>Digital technology created new possibilities for cultural creation and sharing but also intensified extraction and concentration. Anyone with internet access can theoretically reach global audiences—sounds democratic. But algorithms controlled by a handful of platforms determine what content gets seen, favoring engagement over quality or cultural value.</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>Creators work constantly to produce content for platforms, but most earn barely anything while platforms profit from their labor and user data.</li>
                <li>Recommendation algorithms optimize for engagement (often negative emotions), shaping culture toward outrage and sensationalism rather than meaning or beauty.</li>
                <li>Attention becomes the commodity—platforms compete to capture maximum time regardless of impact on human wellbeing. Entertainment becomes addictive rather than enriching.</li>
                <li>Cultural diversity suffers as algorithms favor content similar to what's already popular, creating homogenization even in seemingly infinite digital spaces.</li>
                <li>Live performance, community cultural production, and participatory culture decline as people consume entertainment passively rather than creating it together.</li>
                <li>Artists face impossible choices: adapt work to algorithmic preferences, struggle in obscurity, or abandon creative work for more economically viable employment.</li>
            </ul>
            <p>The pandemic highlighted entertainment's importance—when isolated, people desperately needed culture for connection, meaning, and joy—but also exposed how poorly we support creators who provide this essential human service.</p>

            <h3>Future: Civicism's Approach to Entertainment</h3>
            <p>Civicism recognizes culture as essential to human flourishing and reorganizes entertainment accordingly:</p>
            <ul>
                <li><strong>Culture as Human Right:</strong> Everyone has access to cultural experiences and the means to participate in cultural creation, not just consume what corporations provide.</li>
                <li><strong>Creator Support:</strong> People doing creative work receive support enabling them to create without starving or conforming to commercial formulas. Cultural value, not just market value, matters.</li>
                <li><strong>Cultural Diversity:</strong> The system actively supports diverse cultural expressions, local traditions, marginalized voices, and experimental work—not just commercially safe blockbusters.</li>
                <li><strong>Participatory Culture:</strong> Entertainment includes both professional creation and community cultural production. People make music, tell stories, create art together, not just consume professionally produced content.</li>
                <li><strong>Platform Coordination:</strong> Digital platforms serve cultural flourishing rather than extracting attention and data. Algorithms surface diverse, meaningful content, not just engagement-optimizing sensationalism.</li>
                <li><strong>Global and Local Balance:</strong> Cultural expression circulates globally while local and traditional cultures thrive, creating rich cultural ecosystems rather than homogenization.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence transforms entertainment by:</p>
            <ul>
                <li><strong>Cultural Discovery:</strong> Helping people find cultural expressions matching their interests while introducing them to diverse perspectives and unexpected discoveries—not trapping them in algorithmic echo chambers.</li>
                <li><strong>Creator Connection:</strong> Linking creators with audiences, collaborators, resources, and support they need to do their work—building cultural networks rather than extracting from isolated creators.</li>
                <li><strong>Resource Allocation:</strong> Directing support to creators based on cultural value and community appreciation, not just commercial metrics—enabling diverse cultural production to flourish.</li>
                <li><strong>Diversity Monitoring:</strong> Identifying when cultural production becomes homogenized or when certain voices are marginalized, coordinating interventions to maintain diversity.</li>
                <li><strong>Community Building:</strong> Facilitating cultural communities where people create and share together, supporting participatory culture alongside professional creation.</li>
                <li><strong>Impact Understanding:</strong> Analyzing how cultural content affects human wellbeing—whether it enriches, connects, and uplifts or whether it degrades attention, increases isolation, or promotes harmful narratives.</li>
            </ul>
            <p><strong>Example:</strong> An aspiring musician creates songs blending traditional music from their culture with contemporary styles. Network intelligence connects them with audiences appreciating that fusion, links them with other musicians doing similar work for collaboration, provides production resources and performance opportunities, and ensures they receive support enabling them to continue creating. Meanwhile, it introduces their music to people who've never encountered their culture's traditions, fostering cross-cultural appreciation. Their work reaches people globally while remaining rooted in specific cultural traditions, enriching global culture without homogenizing it.</p>

            <h3>Cross-Domain Integration</h3>
            <p>Entertainment connects with Education (cultural learning and artistic education), Healthcare (therapeutic entertainment and wellbeing), Technology (entertainment platforms and tools), Economics (creative economy support), Infrastructure (cultural venues and digital infrastructure), Justice (intellectual property and creator rights), and Security (content security and platform safety). These connections ensure cultural production serves human flourishing.</p>

            <h3>Why This Matters to You</h3>
            <p>Culture shapes how you understand the world, yourself, and what's possible. The stories you hear, the music you listen to, the art you see—these aren't trivial entertainments but fundamental parts of being human. In Civicism's entertainment system, you have access to rich, diverse cultural experiences regardless of your economic means. You can participate in creating culture, not just consuming it. The platforms and systems serving entertainment prioritize your wellbeing and enrichment rather than maximizing your engagement for profit. Culture flourishes in its full diversity rather than homogenizing around commercial formulas, enriching human experience for everyone.</p>
        `,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Economics', action: 'domain', target: 'economics' },
            { text: 'Education', action: 'domain', target: 'education' },
            { text: 'Technology', action: 'domain', target: 'technology' },
            { text: 'Healthcare', action: 'domain', target: 'healthcare' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    {
        name: 'Healthcare',
        id: 'healthcare',
        description: 'Healthcare is how we maintain health, treat illness, prevent disease, and support wellbeing. It encompasses everything from prenatal care to end-of-life support, from emergency medicine to chronic disease management, from mental health to physical health, from prevention to cure.',
        details: `
            <h3>Understanding Healthcare</h3>
            <p>Healthcare isn't just medical treatment when sick—it's the entire system supporting human health throughout life. It includes public health measures preventing disease, primary care maintaining wellness, emergency services responding to crises, specialized treatment for complex conditions, mental health support, rehabilitation, and palliative care. Health itself is more than absence of disease—it's physical, mental, emotional, and social wellbeing enabling people to flourish.</p>

            <h3>Past: Healthcare as Privilege</h3>
            <p>Historically, access to healthcare correlated with wealth and power. Those who could pay received care; those who couldn't often suffered and died from treatable conditions. Medical knowledge was closely guarded by professional guilds. Women's healthcare knowledge—midwifery, herbal medicine, community healing—was systematically suppressed, sometimes violently, to establish male-dominated medical professions.</p>
            <p>The 20th century brought remarkable medical advances—antibiotics, vaccines, surgical techniques, diagnostic tools, and treatments that would have seemed miraculous generations earlier. Life expectancy increased dramatically in places where these advances were accessible. Public health measures like clean water, sanitation, and vaccination programs saved billions of lives.</p>
            <p>However, these advances remained unequally distributed. In the United States, healthcare operated primarily as a market good—those with insurance or wealth accessed excellent care while those without faced barriers or bankruptcy. Medical research focused on profitable diseases affecting wealthy populations while neglecting tropical diseases, conditions affecting primarily poor communities, and treatments that wouldn't generate revenue.</p>
            <p>Healthcare also embedded systemic biases. Black patients received inferior care due to racism, both explicit and implicit. Women's pain was dismissed as psychological. LGBTQ+ people faced discrimination. Disabled people were institutionalized rather than supported. Medical research disproportionately studied white male bodies, then applied findings universally despite relevant differences.</p>

            <h3>Present: Contradictions and Inequities</h3>
            <p>Today's healthcare systems face profound contradictions. We have unprecedented medical capabilities yet millions lack access to basic care. The United States spends more per capita on healthcare than any nation yet has worse health outcomes than countries spending far less. Medical debt is the leading cause of personal bankruptcy.</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>Life-saving medications like insulin cost pennies to produce but sell for hundreds of dollars, pricing people out of treatments they need to live.</li>
                <li>Healthcare corporations profit enormously while patients struggle with bills and healthcare workers experience burnout from understaffing and administrative burdens.</li>
                <li>Insurance companies—adding no medical value—extract billions by denying claims and restricting access to maximize profits.</li>
                <li>Preventive care that would save lives and money receives far less attention than lucrative treatments for conditions that could have been prevented.</li>
                <li>Mental health care remains stigmatized and underfunded despite mental health crises affecting millions.</li>
                <li>Rural communities often lack basic healthcare access entirely—no nearby hospitals, no specialists, limited primary care.</li>
                <li>Health disparities persist along racial, economic, and geographic lines—life expectancy varying by decades based on zip code.</li>
            </ul>
            <p>The COVID-19 pandemic exposed these inequities starkly. Essential workers, disproportionately people of color in low-wage jobs, faced highest exposure and death rates. Wealthy communities accessed testing and vaccines first. Underlying conditions making COVID deadlier—diabetes, heart disease, respiratory conditions—themselves reflected healthcare inequities.</p>

            <h3>Future: Civicism's Approach to Healthcare</h3>
            <p>Civicism reorganizes healthcare around a fundamental principle: health is a human right, and healthcare exists to serve human wellbeing, not generate profit. This means:</p>
            <ul>
                <li><strong>Universal Access:</strong> Everyone receives healthcare based on need, not ability to pay. No medical debt, no denied claims, no choosing between medication and rent.</li>
                <li><strong>Prevention-Centered:</strong> Healthcare emphasizes preventing illness through public health, healthy environments, and early intervention—not just treating disease after it develops.</li>
                <li><strong>Intersectional Care:</strong> Healthcare recognizes how multiple factors—race, gender, economic status, geography, disability, age, sexual orientation—intersect to shape health needs and barriers to care, providing appropriate support.</li>
                <li><strong>Holistic Wellbeing:</strong> Healthcare addresses mental, emotional, and social health alongside physical health, recognizing their interconnection.</li>
                <li><strong>Community-Based:</strong> Healthcare integrates into communities rather than isolating in hospitals, supporting health where people live.</li>
                <li><strong>Worker Support:</strong> Healthcare workers receive support enabling them to provide quality care without burning out—appropriate staffing, administrative support, reasonable hours.</li>
                <li><strong>Research for Need:</strong> Medical research targets pressing health needs regardless of profit potential, ensuring conditions affecting marginalized communities receive attention.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence transforms healthcare by:</p>
            <ul>
                <li><strong>Predictive Health:</strong> Analyzing patterns to identify health risks early, enabling prevention before serious illness develops—personalized to each person's specific risk factors and circumstances.</li>
                <li><strong>Diagnostic Support:</strong> Assisting healthcare providers with diagnosis by analyzing symptoms, test results, and medical history—improving accuracy while respecting providers' expertise.</li>
                <li><strong>Treatment Coordination:</strong> Coordinating care across providers, specialists, and services so patients don't fall through gaps or face contradictory treatments.</li>
                <li><strong>Access Navigation:</strong> Helping people access care appropriate to their needs, removing bureaucratic barriers, and coordinating support addressing social determinants of health.</li>
                <li><strong>Outcome Tracking:</strong> Monitoring whether treatments work for diverse populations, identifying when care fails certain groups, and coordinating improvements.</li>
                <li><strong>Public Health Monitoring:</strong> Tracking disease patterns, environmental health hazards, and social factors affecting community health—enabling coordinated public health responses.</li>
                <li><strong>Research Acceleration:</strong> Analyzing medical data to accelerate research into prevention and treatment while protecting patient privacy.</li>
            </ul>
            <p><strong>Example:</strong> Someone experiencing chronic fatigue receives care recognizing how their specific situation—working multiple jobs, caring for elderly parents, living in an area with environmental pollution, managing previous trauma—contributes to their health challenges. Network intelligence coordinates medical care, mental health support, social services, and environmental remediation. It connects them with healthcare providers experienced with their intersecting identities, ensures treatments account for their circumstances, and tracks whether interventions actually improve their wellbeing. If barriers emerge—transportation difficulties, childcare needs, inflexible work schedules—the system coordinates solutions rather than blaming them for "non-compliance."</p>

            <h3>Cross-Domain Integration</h3>
            <p>Healthcare connects with Agriculture (nutrition and food security), Infrastructure (healthcare facilities and clean water), Education (health literacy and medical training), Technology (medical innovation and digital health), Economics (healthcare resource allocation), Justice (healthcare rights and medical ethics), Security (public health and biosecurity), and Entertainment (therapeutic entertainment and wellness). These connections ensure health support serves human flourishing holistically.</p>

            <h3>Why This Matters to You</h3>
            <p>Your health determines whether you can live fully—whether you experience pain or comfort, limitation or capability, vulnerability or security. In Civicism's healthcare system, you receive care based on what you need, not what you can afford. Healthcare providers focus on your wellbeing rather than profit extraction. Your care accounts for your specific circumstances and identities rather than treating you as a generic patient. Prevention keeps you healthy rather than waiting for illness. The system serves your flourishing—because that's what healthcare should do.</p>
        `,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Infrastructure', action: 'domain', target: 'infrastructure' },
            { text: 'Security', action: 'domain', target: 'security' },
            { text: 'Education', action: 'domain', target: 'education' },
            { text: 'Technology', action: 'domain', target: 'technology' },
            { text: 'Justice', action: 'domain', target: 'justice' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    {
        name: 'Infrastructure',
        id: 'infrastructure',
        description: 'Infrastructure comprises the fundamental systems that make modern civilization possible—the roads, bridges, water systems, power grids, internet networks, buildings, and countless other physical and digital structures enabling human activity. Infrastructure is often invisible until it fails, yet it underpins everything.',
        details: `
            <h3>Understanding Infrastructure</h3>
            <p>Infrastructure is the connective tissue of civilization. When you turn on a faucet and water flows, that's infrastructure. When you flip a switch and lights illuminate, that's infrastructure. When you open your phone and connect to the internet, that's infrastructure. When you travel on roads, when buildings shelter you, when waste gets removed—all infrastructure. These systems are so fundamental that we often only notice them when they break down.</p>

            <h3>Past: Infrastructure as Investment</h3>
            <p>Historically, major infrastructure development required collective organization beyond what individuals or families could achieve. Ancient civilizations built aqueducts, roads, and defensive walls through coordinated labor. These projects demonstrated that infrastructure requires social coordination—you can't build a highway system or water network individually.</p>
            <p>The industrial era brought massive infrastructure expansion—railroads, electrical grids, telephone networks, sewers, water treatment plants. In the United States, significant infrastructure development occurred through public investment, particularly in the mid-20th century. The Interstate Highway System, rural electrification, municipal water systems, and other projects dramatically improved living standards and economic productivity.</p>
            <p>However, this infrastructure development was deeply unequal. "Redlining" explicitly excluded Black neighborhoods from investment. Highways were routed through communities of color, destroying neighborhoods while connecting white suburbs. Rural and Indigenous communities often lacked basic services like running water and electricity long after urban areas had them. Infrastructure reinforced segregation and inequality.</p>
            <p>Meanwhile, private companies controlled some infrastructure as profit-making enterprises—particularly telecommunications and energy—creating tensions between service provision and profit extraction. Profit motives meant underinvestment in areas with insufficient returns, leaving some communities underserved.</p>

            <h3>Present: Crumbling and Unequal</h3>
            <p>Today's infrastructure faces multiple crises. Much of America's infrastructure, built in the mid-20th century, is deteriorating. Roads crumble, bridges become unsafe, water systems leak lead, power grids fail during extreme weather. The American Society of Civil Engineers consistently gives U.S. infrastructure failing grades.</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>Water infrastructure failures expose residents to contaminated water—Flint, Michigan being the most infamous but far from alone. Communities with contaminated water are disproportionately poor and Black.</li>
                <li>Power grids fail during heat waves and cold snaps, threatening lives, yet utilities prioritize shareholder returns over infrastructure investment.</li>
                <li>Digital infrastructure—now as essential as water and power—remains unavailable or unaffordable for millions, creating educational and economic barriers.</li>
                <li>Public transit in the U.S. is underfunded and inadequate, forcing car ownership and disadvantaging those who can't afford vehicles while increasing emissions.</li>
                <li>Rural areas often lack basic infrastructure like high-speed internet, creating economic development barriers and isolating residents.</li>
                <li>Climate change demands infrastructure adaptation—flood protection, resilient power systems, green building—yet investment lags while disasters mount.</li>
                <li>Infrastructure work is dangerous, low-paid, and undervalued despite being essential. Construction workers face exploitation, particularly immigrant workers.</li>
            </ul>
            <p>The infrastructure crisis reflects deeper systemic problems—private profit extracted rather than reinvested, political gridlock preventing public investment, and continued inequality in who receives infrastructure benefits.</p>

            <h3>Future: Civicism's Approach to Infrastructure</h3>
            <p>Civicism reorganizes infrastructure around serving human flourishing within planetary boundaries:</p>
            <ul>
                <li><strong>Universal Service:</strong> Everyone has access to essential infrastructure—clean water, sanitation, energy, transportation, internet—regardless of geography or economic status. Infrastructure as a public good, not a market commodity.</li>
                <li><strong>Climate Adaptation:</strong> Infrastructure designed for climate resilience—flood resistance, extreme weather durability, distributed renewable energy, sustainable water management.</li>
                <li><strong>Regenerative Design:</strong> Infrastructure that supports rather than degrades ecosystems—green infrastructure managing stormwater, renewable energy systems, efficient resource use, minimal waste.</li>
                <li><strong>Interconnected Systems:</strong> Recognition that infrastructure systems connect—energy powers water treatment, telecommunications enable grid management, transportation depends on all of them. Coordination across systems rather than siloed management.</li>
                <li><strong>Worker Dignity:</strong> Infrastructure work recognized as essential and dignified, with workers receiving appropriate support, safety protections, and compensation.</li>
                <li><strong>Community Integration:</strong> Infrastructure serving communities rather than dividing them, developed with community input rather than imposed top-down.</li>
                <li><strong>Maintenance Culture:</strong> Ongoing maintenance and improvement rather than building then neglecting, preventing crises through proactive care.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence transforms infrastructure by:</p>
            <ul>
                <li><strong>System Optimization:</strong> Coordinating interconnected infrastructure systems—balancing energy loads, managing water distribution, routing transportation—for efficiency and resilience.</li>
                <li><strong>Predictive Maintenance:</strong> Monitoring infrastructure condition to identify needed maintenance before failure, preventing crises through proactive intervention.</li>
                <li><strong>Resource Efficiency:</strong> Minimizing waste in infrastructure operation—optimizing energy use, reducing water loss, improving transportation efficiency—within environmental limits.</li>
                <li><strong>Climate Adaptation:</strong> Analyzing climate risks to infrastructure and coordinating adaptive measures—strengthening vulnerable systems, developing alternatives, planning for changing conditions.</li>
                <li><strong>Equitable Access:</strong> Identifying where infrastructure fails to serve communities and coordinating solutions addressing those gaps.</li>
                <li><strong>Emergency Response:</strong> During infrastructure failures or disasters, coordinating emergency services, alternative provisions, and rapid repairs to minimize harm.</li>
                <li><strong>Planning Integration:</strong> Supporting infrastructure planning that accounts for all domains' needs, community priorities, and environmental constraints.</li>
            </ul>
            <p><strong>Example:</strong> A community's water infrastructure is aging and climate patterns are changing, bringing more intense storms and longer droughts. Network intelligence monitors system condition, predicts which components need replacement soon, and coordinates upgrades integrating climate resilience—expanded stormwater management, drought-resistant supply sources, updated treatment capacity. It ensures work schedules minimize disruption, coordinates with other infrastructure work to reduce redundant construction, and tracks whether improvements actually reach all neighborhoods equitably. When a storm exceeds system capacity, it coordinates emergency response, alternative water supplies, and expedited repairs while analyzing what additional resilience is needed.</p>

            <h3>Cross-Domain Integration</h3>
            <p>Infrastructure supports every domain. Agriculture needs water systems and transportation. Healthcare requires facilities, energy, and telecommunications. Education needs school buildings and digital infrastructure. Technology depends on digital infrastructure. Economics relies on infrastructure for productivity. Entertainment uses venues and digital networks. Justice requires courthouse facilities and digital access. Security needs communication systems and protective infrastructure. Infrastructure enables everything else.</p>

            <h3>Why This Matters to You</h3>
            <p>Infrastructure shapes your daily life profoundly—whether water flows from your tap, whether power reliably energizes your home, whether internet connects you to information and opportunity, whether roads enable you to travel, whether buildings shelter you safely. When infrastructure serves you reliably, you might not think about it. When it fails—contaminated water, power outages, internet blackouts, crumbling roads—its importance becomes painfully clear. In Civicism's infrastructure system, these essential systems serve everyone reliably, sustainably, and equitably—because human prosperity depends on the systems supporting human activity.</p>
        `,
        relatedLinks: [
            { text: 'Earth', action: 'focus', target: 'earth' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Security', action: 'domain', target: 'security' },
            { text: 'Technology', action: 'domain', target: 'technology' },
            { text: 'Healthcare', action: 'domain', target: 'healthcare' },
            { text: 'Agriculture', action: 'domain', target: 'agriculture' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    {
        name: 'Justice',
        id: 'justice',
        description: 'Justice is how societies establish and enforce rules, resolve disputes, protect rights, and determine consequences for harm. It encompasses legal systems, courts, law enforcement, prisons, and all the mechanisms through which communities maintain order and fairness—or fail to.',
        details: `
            <h3>Understanding Justice</h3>
            <p>Justice ideally means fairness, equity, and appropriate response to wrongdoing. It includes laws defining acceptable behavior, processes for resolving disputes, systems for investigating and adjudicating alleged crimes, and consequences for those who cause harm. Justice also involves protecting rights—ensuring people aren't arbitrarily harmed, discriminated against, or deprived of what they're entitled to. At its best, justice creates security and fairness. At its worst, it becomes a tool of oppression.</p>

            <h3>Past: Justice as Social Control</h3>
            <p>Historically, justice systems served to maintain existing power structures. Laws protected property and privilege while controlling those without power. In the United States, this is starkly evident in how justice has been weaponized against Black Americans—from slavery laws treating humans as property, to Black Codes criminalizing freedom, to convict leasing creating slavery by another name, to ongoing mass incarceration disproportionately targeting Black communities.</p>
            <p>Legal systems explicitly excluded many people from rights. Women couldn't vote, own property, or control their own earnings. Indigenous peoples' legal traditions were suppressed in favor of imposed colonial law. LGBTQ+ people faced criminalization. Immigration laws reflected racist exclusion, particularly against Asian and later Latin American immigrants.</p>
            <p>Even when laws formally extended rights, enforcement remained unequal. Police protected white communities while surveilling and brutalizing communities of color. Courts provided justice for those who could afford lawyers while trapping poor defendants in cycles of fines, fees, and incarceration. Prisons became warehouses for people deemed socially undesirable—disproportionately poor, Black, brown, and mentally ill.</p>
            <p>The "War on Drugs" exemplified this—targeting drugs used predominantly by Black communities with harsh penalties while treating drugs used by white communities leniently, despite similar usage rates. The result was not reduced drug use but mass incarceration destroying Black families and communities.</p>

            <h3>Present: Crisis of Legitimacy</h3>
            <p>Today's justice system faces a crisis of legitimacy. Many recognize that the system doesn't deliver justice equitably—that outcomes depend heavily on race, wealth, and privilege rather than facts and fairness. High-profile cases of police killing unarmed Black people sparked massive protests challenging whether this system can be called "justice" at all.</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>Black Americans are incarcerated at five times the rate of white Americans despite similar rates of lawbreaking—reflecting enforcement patterns, not behavior patterns.</li>
                <li>Wealthy defendants hire expensive lawyers and receive lenient treatment while poor defendants, unable to afford bail, plead guilty to crimes they didn't commit to avoid indefinite pre-trial detention.</li>
                <li>Legal proceedings become incomprehensible to those navigating them, with jargon, procedures, and complexity that effectively deny justice to those without legal expertise or representation.</li>
                <li>Prisons brutalize rather than rehabilitate, creating cycles of reincarceration rather than supporting people to rebuild their lives.</li>
                <li>Police act as occupying forces in many communities, particularly communities of color, creating fear and resentment rather than safety.</li>
                <li>Immigration enforcement separates families, detains people indefinitely, and deports people to countries they barely remember, often for minor violations.</li>
                <li>Legal systems fail survivors of sexual violence, domestic abuse, and other harms—dismissing, blaming, and retraumatizing rather than providing justice.</li>
            </ul>
            <p>The system's failures are not bugs but features—it was designed this way, to control certain populations and protect existing hierarchies. Reform efforts often fail because the problem is systemic, not individual bad actors.</p>

            <h3>Future: Civicism's Approach to Justice</h3>
            <p>Civicism fundamentally reimagines justice around accountability, repair, and prevention rather than punishment and control:</p>
            <ul>
                <li><strong>Restorative Justice:</strong> When harm occurs, focus on accountability, repair, and preventing future harm rather than merely punishing. Involving those harmed, those who caused harm, and community in determining appropriate responses.</li>
                <li><strong>Preventive Justice:</strong> Addressing root causes of harm—poverty, trauma, lack of opportunity, substance abuse—rather than waiting to punish after harm occurs.</li>
                <li><strong>Equitable Process:</strong> Everyone has access to legal representation and fair process regardless of wealth. No one trapped in prison awaiting trial because they can't afford bail.</li>
                <li><strong>Bias Elimination:</strong> Active work to eliminate racial, economic, and other biases from law enforcement, prosecution, adjudication, and sentencing.</li>
                <li><strong>Decarceration:</strong> Dramatic reduction in imprisonment, reserving it only for those who pose serious ongoing danger. Support for healing and reintegration rather than warehousing and punishment.</li>
                <li><strong>Community Safety:</strong> Safety created through meeting human needs, building community connection, and addressing harm causes—not through armed control of marginalized populations.</li>
                <li><strong>Rights Protection:</strong> Vigorous protection of human rights across all domains—healthcare, housing, education, work, environment—not just property rights.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence transforms justice by:</p>
            <ul>
                <li><strong>Bias Detection:</strong> Analyzing justice system patterns to identify racial, economic, and other biases in enforcement, prosecution, and sentencing—making inequity visible and measurable.</li>
                <li><strong>Harm Prevention:</strong> Identifying factors that precede harmful behaviors—poverty, trauma, lack of mental health support—and coordinating interventions preventing harm before it occurs.</li>
                <li><strong>Restorative Coordination:</strong> Facilitating restorative justice processes by connecting affected parties, providing relevant information, and coordinating community support for accountability and repair.</li>
                <li><strong>Legal Access:</strong> Connecting people with appropriate legal resources, information, and representation—ensuring everyone can navigate legal systems effectively.</li>
                <li><strong>Outcome Tracking:</strong> Monitoring whether justice processes actually reduce harm and serve healing, or whether they perpetuate cycles of damage.</li>
                <li><strong>Rights Monitoring:</strong> Identifying when people's rights are violated across domains and coordinating responses ensuring rights protection.</li>
                <li><strong>System Reform:</strong> Analyzing where justice system processes fail to serve justice and supporting communities to redesign them.</li>
            </ul>
            <p><strong>Example:</strong> When someone causes harm—say, through theft driven by desperation—network intelligence coordinates a restorative process. Those harmed express impacts and needs. The person who caused harm explains circumstances leading to it—perhaps job loss, medical debt, and hunger. Rather than imprisonment, the response addresses both: repair to those harmed and support addressing the circumstances that led to harm. This might include economic support, mental health care, job placement, and community accountability. Network intelligence tracks whether this prevents future harm (it usually does) and whether all parties experience the outcome as just (they usually do). Meanwhile, it identifies patterns—if many thefts stem from economic desperation in an area, that signals a need for economic intervention, not more policing.</p>

            <h3>Cross-Domain Integration</h3>
            <p>Justice connects with Security (public safety and law enforcement), Governance (legal frameworks and rights protection), Education (legal literacy and understanding), Healthcare (addressing trauma and mental health), Economics (economic justice and rights), Infrastructure (access to legal systems), Technology (legal technology and digital rights), and Entertainment (intellectual property and cultural rights). These connections ensure justice serves human flourishing rather than social control.</p>

            <h3>Why This Matters to You</h3>
            <p>Justice systems powerfully affect your life—whether you feel safe, whether your rights are protected, whether you face arbitrary control or have genuine security. For many people, particularly Black, Indigenous, immigrant, and poor communities, justice systems are sources of harm and fear rather than protection. In Civicism's justice approach, systems actually serve justice—protecting your rights, responding to harm through repair rather than punishment, creating genuine safety through meeting needs rather than armed control, and ensuring everyone faces fair processes regardless of identity or wealth. The system serves human flourishing rather than maintaining hierarchies of power.</p>
        `,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Governance', action: 'focus', target: 'governance' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Security', action: 'domain', target: 'security' },
            { text: 'Education', action: 'domain', target: 'education' },
            { text: 'Healthcare', action: 'domain', target: 'healthcare' },
            { text: 'Infrastructure', action: 'domain', target: 'infrastructure' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    {
        name: 'Security',
        id: 'security',
        description: 'Security is how we protect people, communities, and systems from harm—whether physical threats, cyber attacks, public health crises, environmental hazards, or other dangers. Security ideally creates safety enabling people to flourish without fear. In practice, security systems often create the opposite—surveillance, control, and harm—particularly for marginalized communities.',
        details: `
            <h3>Understanding Security</h3>
            <p>Security encompasses many forms of protection: physical security (fire services, emergency response, disaster preparation), cybersecurity (protecting digital systems and data), public health security (disease prevention and response), environmental security (protecting against pollution and climate threats), food security (ensuring reliable food access), and economic security (protecting against economic collapse). True security means people can live without constant threat—not just from violence or disaster, but from the insecurity of poverty, discrimination, or environmental degradation.</p>

            <h3>Past: Security as Control</h3>
            <p>Historically, security systems served to protect those with power while controlling those without. Military forces defended empires through conquest. Police forces emerged not to protect communities but to control enslaved people, break strikes, and maintain social hierarchies. Security often meant security for the privileged and surveillance of the marginalized.</p>
            <p>The Cold War militarized security thinking—threats required military responses, security meant armament, and vast resources flowed to military capabilities. The "national security state" grew, with surveillance expanding, military budgets consuming enormous resources, and security justifying restrictions on civil liberties.</p>
            <p>After September 11, 2001, security discourse intensified further. The "War on Terror" led to massive surveillance expansion, erosion of civil liberties, military interventions causing enormous human suffering, and explicit targeting of Muslim communities for surveillance and control. Security became justification for torture, indefinite detention, and killing by drone.</p>
            <p>Meanwhile, actual security needs went unmet. Communities facing poverty, pollution, and discrimination lacked security while resources flowed to military and surveillance systems that often made those communities less safe. Environmental threats mounted without adequate response because they weren't framed as "security" issues.</p>

            <h3>Present: Misallocated and Militarized</h3>
            <p>Today's security systems often fail to provide actual security while consuming enormous resources and creating harm:</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>Military spending approaches $1 trillion annually in the U.S. alone, while climate change—a far greater security threat—receives minimal funding for mitigation and adaptation.</li>
                <li>Police departments receive military equipment and operate like occupying forces in marginalized communities, creating fear rather than safety for residents.</li>
                <li>Mass surveillance monitors entire populations in the name of security, eroding privacy and enabling authoritarian control without demonstrable security benefits.</li>
                <li>Cybersecurity remains inadequate despite sophisticated threats, with critical infrastructure vulnerable to attacks that could cause catastrophic harm.</li>
                <li>Public health security proved woefully inadequate during COVID-19, with fragmented responses, inadequate preparation, and politicization undermining effective pandemic response.</li>
                <li>Economic insecurity affects millions—people one medical bill or missed paycheck from disaster—yet receives little attention as a "security" issue.</li>
                <li>Environmental hazards—pollution, toxic exposure, climate impacts—threaten communities, particularly communities of color, without adequate protection.</li>
                <li>Food security remains precarious for many, with supply chain fragility and economic barriers leaving people hungry.</li>
            </ul>
            <p>Security systems protect corporate interests and privileged communities while treating threats to marginalized communities as unimportant. Security operates as control more than protection.</p>

            <h3>Future: Civicism's Approach to Security</h3>
            <p>Civicism reimagines security around actual human safety and wellbeing:</p>
            <ul>
                <li><strong>Comprehensive Security:</strong> Security includes physical safety, economic security, health security, environmental protection, food security, and digital security—all essential to human flourishing.</li>
                <li><strong>Prevention-Focused:</strong> Security through addressing root causes—poverty, environmental degradation, public health infrastructure—rather than militarized responses to symptoms.</li>
                <li><strong>Community-Based:</strong> Security created through strong communities, mutual care, and meeting needs—not through armed control of marginalized populations.</li>
                <li><strong>Privacy-Preserving:</strong> Security measures that protect rather than violate privacy, recognizing that surveillance itself creates insecurity for many communities.</li>
                <li><strong>Climate Security:</strong> Recognition that climate change is the defining security threat, requiring coordinated global response and rapid transition from fossil fuels.</li>
                <li><strong>Demilitarized:</strong> Dramatic reduction in militarization, shifting resources to actual security needs like pandemic preparedness, climate adaptation, and economic security.</li>
                <li><strong>Rights-Respecting:</strong> Security measures that protect rather than violate human rights, with strong oversight preventing abuse.</li>
                <li><strong>Equitable Protection:</strong> Security serving all communities equally, not just protecting the privileged while controlling the marginalized.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence transforms security by:</p>
            <ul>
                <li><strong>Threat Prediction:</strong> Analyzing patterns to predict and prevent threats before they materialize—whether cyberattacks, public health crises, environmental disasters, or infrastructure failures.</li>
                <li><strong>Emergency Coordination:</strong> During crises, coordinating emergency response across services, ensuring resources reach affected people, and adapting responses in real-time.</li>
                <li><strong>Vulnerability Identification:</strong> Identifying where people, communities, or systems lack security—economic insecurity, environmental threats, health vulnerabilities—and coordinating preventive responses.</li>
                <li><strong>Infrastructure Protection:</strong> Monitoring critical infrastructure for vulnerabilities and coordinating protective measures preventing failures or attacks.</li>
                <li><strong>Privacy Protection:</strong> Ensuring security measures respect privacy, implementing privacy-preserving techniques, and identifying when surveillance harms communities.</li>
                <li><strong>Bias Detection:</strong> Identifying when security systems disproportionately target or harm certain communities, enabling correction of discriminatory practices.</li>
                <li><strong>Resource Allocation:</strong> Directing security resources based on actual needs rather than political priorities—ensuring pandemic preparedness, climate adaptation, and economic security receive appropriate attention.</li>
                <li><strong>De-escalation Support:</strong> In crisis situations, supporting de-escalation rather than militarized responses—connecting people with needed support rather than enforcement.</li>
            </ul>
            <p><strong>Example:</strong> Network intelligence identifies increasing climate-driven wildfire risk in a region based on temperature patterns, vegetation dryness, and historical data. Rather than waiting for disaster, it coordinates preventive measures—vegetation management, fire-resistant infrastructure upgrades, evacuation planning, firefighting resource prepositioning. It ensures vulnerable communities (elderly, disabled, low-income) have evacuation support plans. When fire does occur, it coordinates emergency response, tracks affected populations, ensures resources reach those in need, and coordinates recovery support. Throughout, it protects people's privacy while enabling effective coordination—security through preparation and care, not surveillance and control.</p>

            <h3>Cross-Domain Integration</h3>
            <p>Security connects with Justice (legal protections and rights), Infrastructure (critical systems protection), Healthcare (public health security and emergency response), Technology (cybersecurity and digital protection), Economics (economic security), Agriculture (food security), Education (security awareness and preparedness), Entertainment (content security and platform safety). These connections ensure comprehensive security serving human flourishing.</p>

            <h3>Why This Matters to You</h3>
            <p>Security fundamentally shapes whether you feel safe—whether you fear violence, whether economic precarity haunts you, whether environmental threats endanger you, whether surveillance monitors you, whether crises will be responded to effectively. For many people, particularly communities of color, immigrants, and activists, security systems are sources of threat rather than safety. In Civicism's security approach, systems actually create security—preventing threats through addressing root causes, responding effectively to crises, protecting all communities equitably, and respecting rights and privacy. Security serves human flourishing rather than control and militarization.</p>
        `,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Justice', action: 'domain', target: 'justice' },
            { text: 'Infrastructure', action: 'domain', target: 'infrastructure' },
            { text: 'Healthcare', action: 'domain', target: 'healthcare' },
            { text: 'Technology', action: 'domain', target: 'technology' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    },
    {
        name: 'Technology',
        id: 'technology',
        description: 'Technology is humanity\'s tool-making domain—how we create, develop, and use tools to extend human capability. From stone axes to smartphones, from writing to artificial intelligence, technology amplifies what humans can do. It\'s not separate from other domains but enables and transforms them all.',
        details: `
            <h3>Understanding Technology</h3>
            <p>Technology isn't just computers and apps—it's every tool humans create. Writing is technology. Agriculture is technology. Medicine, art, music—all involve technological tools and techniques. When we talk about "the Technology domain," we mean the organized work of creating new tools and improving existing ones—the research, development, engineering, and innovation that generate technological capabilities used across all domains.</p>

            <h3>Past: Technology for Profit and Power</h3>
            <p>Throughout history, technological development served those with power. Military technology enabled conquest. Industrial technology enriched factory owners while exposing workers to dangerous conditions for minimal pay. Colonial powers used technological advantages to dominate and exploit colonized peoples. Technology development reflected and reinforced existing hierarchies.</p>
            <p>The 20th century brought extraordinary technological acceleration—electricity, automobiles, aviation, antibiotics, computers, internet, smartphones. These innovations transformed human life, enabling capabilities previous generations couldn't imagine. Life expectancy increased. Information became accessible. Communication spanned the globe instantly.</p>
            <p>However, this technological progress came with costs. Industrial technology degraded environments. Automation displaced workers without ensuring their wellbeing. Nuclear technology created existential threats. Technology development concentrated in wealthy nations, creating global inequality. Within nations, technology access followed wealth—creating digital divides that reinforced existing disparities.</p>
            <p>Increasingly, technology corporations accumulated enormous power. Google, Amazon, Facebook, Apple, Microsoft—these companies controlled essential digital infrastructure, harvested user data, and shaped how billions of people accessed information, communicated, and understood the world. Their decisions—what content gets seen, what gets censored, what gets monetized—affected human culture and politics globally, yet they remained private companies accountable primarily to shareholders.</p>

            <h3>Present: Innovation for Extraction</h3>
            <p>Today's technology development operates primarily through venture capital and corporate profit seeking. Innovation flows toward what can generate returns to investors, not necessarily what would benefit humanity most. This creates profound distortions:</p>
            <p><strong>Examples of Current Tensions:</strong></p>
            <ul>
                <li>Massive investment in social media engagement optimization and advertising technology, minimal investment in tools for climate adaptation or poverty reduction.</li>
                <li>Artificial intelligence development focused on automation displacing workers and surveillance enabling control, rather than tools augmenting human capability and freeing people from drudgery.</li>
                <li>Platforms designed to maximize engagement (often through outrage and addiction) rather than human wellbeing, degrading mental health and social cohesion for profit.</li>
                <li>Data extraction as a business model—companies harvest intimate details of users' lives to sell to advertisers, often without meaningful consent or compensation.</li>
                <li>Proprietary technology locked behind intellectual property restrictions, preventing beneficial uses and forcing expensive licensing.</li>
                <li>Technology designed for wealthy markets while pressing needs in low-income communities and developing nations receive minimal innovation.</li>
                <li>Environmental costs of technology—energy consumption, electronic waste, resource extraction—inadequately addressed because they don't affect corporate bottom lines.</li>
                <li>Tech workers experiencing burnout, exploitation, and precarious employment despite working for enormously profitable companies.</li>
            </ul>
            <p>Technology corporations insist they're making the world better while extracting wealth, degrading democratic discourse, violating privacy, exploiting workers, and resisting regulation. The COVID-19 pandemic highlighted this—technology enabled remote work and connection for privileged knowledge workers while essential workers (disproportionately people of color) faced exposure and hardship without technological benefits.</p>

            <h3>Future: Civicism's Approach to Technology</h3>
            <p>Civicism reorganizes technology development around serving human flourishing within planetary boundaries:</p>
            <ul>
                <li><strong>Innovation for Need:</strong> Technology development directed toward pressing human and environmental needs—climate adaptation, healthcare access, education quality, food security—not just investor returns.</li>
                <li><strong>Open Innovation:</strong> Knowledge and tools shared openly rather than locked behind intellectual property, enabling rapid innovation and ensuring beneficial technologies reach everyone.</li>
                <li><strong>Human-Centered Design:</strong> Technology designed to augment human capability, support wellbeing, and enable flourishing—not extract attention, data, or labor.</li>
                <li><strong>Worker Empowerment:</strong> Technology that supports workers rather than displacing them, with displaced workers receiving support transitioning to new meaningful work.</li>
                <li><strong>Environmental Sustainability:</strong> Technology development accounting for environmental costs—energy use, waste, resource extraction—and prioritizing sustainable approaches.</li>
                <li><strong>Privacy and Autonomy:</strong> Technology respecting human privacy and autonomy rather than enabling surveillance and control.</li>
                <li><strong>Accessibility:</strong> Technology designed to be accessible across economic status, geography, disability, age, and technical expertise.</li>
                <li><strong>Domain Integration:</strong> Technology development coordinated with domains' actual needs—healthcare technology supporting healthcare workers, agricultural technology serving farmers, etc.</li>
                <li><strong>Ethical Oversight:</strong> Technology development subject to oversight ensuring it serves human wellbeing, with communities most affected having voice in how technology develops.</li>
            </ul>

            <h3>Network Intelligence Role</h3>
            <p>Network intelligence transforms technology development by:</p>
            <ul>
                <li><strong>Innovation Direction:</strong> Identifying pressing needs across domains and coordinating technology development addressing those needs rather than maximizing profit.</li>
                <li><strong>Research Acceleration:</strong> Analyzing research patterns, connecting relevant knowledge across fields, and accelerating beneficial innovation.</li>
                <li><strong>Impact Assessment:</strong> Monitoring how technology affects human wellbeing, identifying harmful impacts early, and coordinating responses.</li>
                <li><strong>Knowledge Sharing:</strong> Connecting innovators with relevant knowledge, enabling collaborative development, and preventing redundant work.</li>
                <li><strong>Resource Optimization:</strong> Directing research and development resources efficiently toward high-impact innovations.</li>
                <li><strong>Barrier Identification:</strong> Identifying when beneficial technology fails to reach certain communities and coordinating solutions.</li>
                <li><strong>Worker Support:</strong> Helping workers adapt as technology changes their domains, connecting them with training, opportunities, and support.</li>
                <li><strong>Environmental Monitoring:</strong> Tracking environmental impacts of technology development and use, coordinating sustainable approaches.</li>
            </ul>
            <p><strong>Example:</strong> Farmers in a region struggle with climate-changed weather patterns—traditional knowledge about planting times no longer works. Network intelligence identifies this need and coordinates technology development: sensors monitoring local microclimates, AI analyzing patterns to recommend planting strategies, communication systems connecting farmers with each other and researchers. Rather than proprietary corporate technology extracting data and charging licensing fees, this technology is developed openly, shared freely, and designed to serve farmers' needs. The farmers contribute their knowledge to improving the technology, creating a feedback loop. Meanwhile, network intelligence tracks whether the technology actually helps—not just measuring adoption but monitoring whether farmers become more resilient and productive.</p>

            <h3>Cross-Domain Integration</h3>
            <p>Technology supports every domain. Agriculture needs agricultural technology. Healthcare requires medical technology. Education uses educational technology. Infrastructure depends on engineering technology. Entertainment employs entertainment technology. Economics operates through financial technology. Justice uses legal technology. Security requires cybersecurity and protection technology. Technology development must coordinate with all domains to serve their actual needs rather than imposing solutions optimized for profit.</p>

            <h3>Why This Matters to You</h3>
            <p>Technology shapes your daily life profoundly—the tools you use, how you communicate, what information you access, how you work, how you navigate the world. In current systems, technology is often designed to extract from you—your attention, your data, your labor, your money—while serving corporate interests. In Civicism's technology approach, development serves your flourishing—creating tools that support your wellbeing, augment your capabilities, respect your privacy, and enable you to participate fully in domains that matter to you. Technology serves human prosperity rather than corporate profit.</p>
        `,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Infrastructure', action: 'domain', target: 'infrastructure' },
            { text: 'Economics', action: 'domain', target: 'economics' },
            { text: 'Entertainment', action: 'domain', target: 'entertainment' },
            { text: 'Healthcare', action: 'domain', target: 'healthcare' },
            { text: 'Agriculture', action: 'domain', target: 'agriculture' },
            { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
        ]
    }
];

// Domain connections - fully connected mesh (each domain connects to all 8 others)
const domainConnections = [
    // Agriculture connects to all 8 others
    ['Agriculture', 'Economics'],
    ['Agriculture', 'Education'],
    ['Agriculture', 'Entertainment'],
    ['Agriculture', 'Healthcare'],
    ['Agriculture', 'Infrastructure'],
    ['Agriculture', 'Justice'],
    ['Agriculture', 'Security'],
    ['Agriculture', 'Technology'],
    // Economics connects to all 8 others
    ['Economics', 'Education'],
    ['Economics', 'Entertainment'],
    ['Economics', 'Healthcare'],
    ['Economics', 'Infrastructure'],
    ['Economics', 'Justice'],
    ['Economics', 'Security'],
    ['Economics', 'Technology'],
    // Education connects to all 8 others
    ['Education', 'Entertainment'],
    ['Education', 'Healthcare'],
    ['Education', 'Infrastructure'],
    ['Education', 'Justice'],
    ['Education', 'Security'],
    ['Education', 'Technology'],
    // Entertainment connects to all 8 others
    ['Entertainment', 'Healthcare'],
    ['Entertainment', 'Infrastructure'],
    ['Entertainment', 'Justice'],
    ['Entertainment', 'Security'],
    ['Entertainment', 'Technology'],
    // Healthcare connects to all 8 others
    ['Healthcare', 'Infrastructure'],
    ['Healthcare', 'Justice'],
    ['Healthcare', 'Security'],
    ['Healthcare', 'Technology'],
    // Infrastructure connects to all 8 others
    ['Infrastructure', 'Justice'],
    ['Infrastructure', 'Security'],
    ['Infrastructure', 'Technology'],
    // Justice connects to all 8 others
    ['Justice', 'Security'],
    ['Justice', 'Technology'],
    // Security connects to all 8 others
    ['Security', 'Technology']
];

const networkData = {
    title: 'Network Intelligence',
    description: 'Network Intelligence is the digital nervous system that makes Civicism possible. Think of it like the network of nerves in your body—it carries information, coordinates responses, and enables the whole system to function as one integrated organism. It\'s not in control; it\'s in service, helping all parts of the system work together effectively.',
    details: `<h3>Understanding Network Intelligence</h3>
        <p>Imagine trying to coordinate a society of millions of people, thousands of communities, nine interconnected domains, and countless daily decisions—all while respecting planetary boundaries, ensuring resources reach those who need them, and adapting to constantly changing circumstances. Human intelligence alone can't track all that complexity. We need computational intelligence designed specifically to serve human coordination.</p>
        <p>That's Network Intelligence: AI systems designed not to replace human judgment but to support it—providing information, identifying patterns, modeling consequences, and enabling coordination at scales humans can't manage alone.</p>

        <h3>Past: The AI Concern</h3>
        <p>Historically, artificial intelligence has often been developed to serve narrow goals: maximize profit, optimize efficiency, target advertising, automate labor. These AI systems frequently:</p>
        <ul>
            <li>Amplified existing biases (facial recognition failing for dark-skinned faces, hiring algorithms discriminating against women)</li>
            <li>Optimized for metrics that didn't align with human welfare (engagement algorithms promoting outrage, credit algorithms denying opportunity)</li>
            <li>Concentrated power with whoever controlled the systems (surveillance capitalism, algorithmic management)</li>
            <li>Operated as black boxes without transparency or accountability</li>
        </ul>
        <p>These failures happened because AI was designed to serve capital accumulation or centralized control, not human prosperity. The technology itself isn't the problem—the design goals and power structures were.</p>

        <h3>Present: The AI Transition</h3>
        <p>We're at a crucial moment. AI capability is advancing rapidly, creating two possible futures:</p>
        <p><strong>Path 1 (Current Trajectory):</strong> AI continues serving capital accumulation and control, amplifying inequality, concentrating power, and making coordination systems even more opaque and unaccountable.</p>
        <p><strong>Path 2 (Civicism):</strong> AI gets redesigned from the ground up to serve human prosperity, operating transparently within democratic governance, with built-in equity goals and accountability mechanisms.</p>
        <p>The technology is neutral. The system it serves is not. Current AI serves capitalism. Network Intelligence serves Civicism.</p>

        <h3>Future: How Network Intelligence Functions</h3>
        <p><strong>Core Principles:</strong></p>
        <ul>
            <li><strong>Transparency:</strong> People can see how Network Intelligence reaches conclusions, what data it uses, and why it makes recommendations</li>
            <li><strong>Accountability:</strong> Governance committees oversee Network Intelligence, can question its operations, and can override its recommendations</li>
            <li><strong>Equity by Design:</strong> The system is explicitly programmed to recognize intersectional realities and promote circulation rather than accumulation</li>
            <li><strong>Service Not Control:</strong> Network Intelligence provides information and suggestions; humans make decisions</li>
        </ul>

        <p><strong>Practical Functions:</strong></p>

        <p><em>For Earth:</em></p>
        <ul>
            <li>Real-time monitoring of environmental systems (carbon, water, soil, biodiversity)</li>
            <li>Modeling how human activities affect planetary boundaries</li>
            <li>Identifying sustainable paths that meet human needs while regenerating natural systems</li>
            <li>Predicting environmental impacts of proposed activities before they happen</li>
        </ul>

        <p><em>For Governance:</em></p>
        <ul>
            <li>Tracking resource flows to identify accumulation patterns</li>
            <li>Modeling how different coordination mechanisms affect different groups</li>
            <li>Providing governance committees with relevant data for informed decisions</li>
            <li>Connecting related activities across domains and communities</li>
            <li>Identifying when coordination breaks down and suggesting alternatives</li>
        </ul>

        <p><em>For Domains:</em></p>
        <ul>
            <li>Coordinating cross-domain activities (connecting healthcare needs with education programs)</li>
            <li>Optimizing resource allocation based on actual need rather than profit potential</li>
            <li>Identifying gaps in service delivery and unmet needs</li>
            <li>Suggesting innovations by connecting insights across domains</li>
            <li>Tracking whether domain services reach all communities equitably</li>
        </ul>

        <p><em>For People:</em></p>
        <ul>
            <li>Recognizing intersectional needs and connecting people with appropriate resources</li>
            <li>Identifying barriers preventing people from accessing services</li>
            <li>Personalizing coordination while maintaining privacy</li>
            <li>Monitoring whether changes actually improve lives across diverse communities</li>
            <li>Amplifying voices of those most affected by decisions</li>
        </ul>

        <h3>Addressing AI Fears</h3>
        <p><strong>"Won't AI replace human workers?"</strong><br>
        In capitalism, AI replaces workers to reduce costs and maximize profit. In Civicism, AI augments human capability and frees people from tedious tasks while ensuring everyone's needs are met. The goal isn't to minimize human involvement but to maximize human flourishing.</p>

        <p><strong>"Won't AI make biased decisions?"</strong><br>
        AI trained on biased data makes biased decisions—this is a known problem. Network Intelligence is explicitly designed to identify and counteract bias, operating under oversight of diverse governance committees who can identify when it fails and correct it.</p>

        <p><strong>"Won't AI become too powerful?"</strong><br>
        AI becomes dangerous when it operates opaquely under unaccountable control serving narrow goals. Network Intelligence operates transparently under democratic governance serving human prosperity. Its power is checked by human oversight and distributed decision-making.</p>

        <p><strong>"Can we trust AI with important decisions?"</strong><br>
        Network Intelligence doesn't make decisions—it provides information and analysis for human decision-making. Governance committees, composed of actual people with diverse perspectives, make the decisions. AI serves them; they don't serve AI.</p>

        <h3>Network Intelligence vs. Current AI</h3>
        <table style="width: 100%; text-align: left; margin: 1rem 0;">
            <tr style="background: rgba(255,255,255,0.1);">
                <th style="padding: 0.5rem;">Aspect</th>
                <th style="padding: 0.5rem;">Current AI</th>
                <th style="padding: 0.5rem;">Network Intelligence</th>
            </tr>
            <tr>
                <td style="padding: 0.5rem;"><strong>Goal</strong></td>
                <td style="padding: 0.5rem;">Maximize profit/efficiency</td>
                <td style="padding: 0.5rem;">Serve human prosperity</td>
            </tr>
            <tr style="background: rgba(255,255,255,0.05);">
                <td style="padding: 0.5rem;"><strong>Ownership</strong></td>
                <td style="padding: 0.5rem;">Private corporations</td>
                <td style="padding: 0.5rem;">Public governance</td>
            </tr>
            <tr>
                <td style="padding: 0.5rem;"><strong>Transparency</strong></td>
                <td style="padding: 0.5rem;">Black box algorithms</td>
                <td style="padding: 0.5rem;">Open, explainable operations</td>
            </tr>
            <tr style="background: rgba(255,255,255,0.05);">
                <td style="padding: 0.5rem;"><strong>Bias</strong></td>
                <td style="padding: 0.5rem;">Often amplifies inequality</td>
                <td style="padding: 0.5rem;">Designed to identify and counteract bias</td>
            </tr>
            <tr>
                <td style="padding: 0.5rem;"><strong>Role</strong></td>
                <td style="padding: 0.5rem;">Decision-maker or controller</td>
                <td style="padding: 0.5rem;">Information provider and coordinator</td>
            </tr>
        </table>

        <h3>Why This Matters to You</h3>
        <p>Network Intelligence is what makes complex coordination serve you rather than control you. Instead of algorithmic systems designed to extract value from your attention or labor, you have systems designed to ensure resources reach you when you need them, opportunities become available to you, and barriers you face get identified and addressed. It's AI working for human prosperity rather than corporate profit.</p>`,
    relatedLinks: [
        { text: 'People', action: 'focus', target: 'people' },
        { text: 'Domains', action: 'focus', target: 'domains' },
        { text: 'Governance', action: 'focus', target: 'governance' },
        { text: 'Earth', action: 'focus', target: 'earth' },
        { text: 'View All Domains', action: 'focus', target: 'domains-network' },
        { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
    ]
};

const civicismData = {
    title: 'Civicism',
    description: 'Civicism represents a fundamental evolutionary step in how we organize society. It incorporates the meaning-making insights of religion, the material organization wisdom of economic systems, the rational analysis tools of the Enlightenment, and the individual agency principles of modern democracy, while transcending the limitations each displayed when taken alone. This is not about dismantling civilization and starting over, but rather about intelligently reorganizing what already exists to serve human prosperity within planetary boundaries.',
    details: `<h3>Introduction</h3>
        <p>Human civilization has progressed through distinct phases of social organization, each building upon the insights of the previous while addressing its limitations. We began with societies organized around God, where divine authority determined worth and purpose through elaborate religious hierarchies. We evolved into systems organized around Capital, whether through capitalism's market mechanisms or communism's worker-focused responses to material inequality. The Enlightenment brought us systems organized around Reason, elevating rational thought and scientific method as primary guides for human behavior. This gave way to societies organized around the Individual, emphasizing personal rights, freedoms, and self-determination as central values.</p>
        <p>Now we stand at the threshold of the next phase: societies organized around Us - collective human prosperity achieved through intelligent organization that preserves individual agency while optimizing for everyone's welfare. This vortical progression isn't about abandoning the insights of previous phases, but rather synthesizing them at a higher level of complexity and wisdom.</p>
        <p>Civicism represents this fundamental evolutionary step in how we organize society. It incorporates the meaning-making insights of religion, the material organization wisdom of economic systems, the rational analysis tools of the Enlightenment, and the individual agency principles of modern democracy, while transcending the limitations each displayed when taken alone. This is not about dismantling civilization and starting over, but rather about intelligently reorganizing what already exists to serve human prosperity within planetary boundaries.</p>

        <h3>Foundational Framework: Intersectionality and Social Reality</h3>
        <p>Civicism builds upon the groundbreaking work of legal scholar Kimberlé Crenshaw, whose concept of intersectionality provides the theoretical foundation for understanding how people actually exist within society. As Crenshaw explained, intersectionality serves as "a lens, a prism, for seeing the way in which various forms of inequality often operate together and exacerbate each other."</p>
        <p>Traditional approaches to social organization have failed because they treat different aspects of human identity and experience as separate, isolated categories. Capitalism focuses primarily on economic class while ignoring other dimensions of inequality. Communism emphasizes worker identity while sometimes overlooking other forms of oppression. Even well-intentioned diversity efforts often address race OR gender OR sexuality as distinct issues rather than recognizing how these identities intersect and compound.</p>
        <p>Civicism recognizes that every person exists at the intersection of multiple identities, experiences, and social locations simultaneously. People are not just workers or consumers or citizens - they are complex beings whose lives are shaped by the interplay of cultural dimensions (ethnicity, ability, gender, age, sexual orientation, social class, spirituality), systemic factors (historical context, economic structure, social norms), personal experiences (family history, education, life transitions), and relational contexts (community, ancestry, chosen family, connection to place).</p>
        <p>The network intelligence that supports Civicism's pyramid structure must therefore be sophisticated enough to recognize and respond to these intersectional realities. Rather than applying one-size-fits-all solutions, the system must understand that effective resource circulation, opportunity creation, and support systems require nuanced approaches that account for how different forms of advantage and disadvantage interact in each person's life.</p>

        <h3>The Vortical Progression of Human Organization</h3>
        <p>Understanding Civicism requires seeing it within the broader historical spiral of human social development. Each phase emerged as a response to the limitations of its predecessor, yet carried forward essential insights that remain valuable.</p>
        <p><strong>Religion</strong> gave humanity its first large-scale organizing principles, creating meaning systems that could coordinate behavior across vast populations. Religious frameworks established concepts of universal human dignity, moral obligations to others, and recognition that humans need purpose beyond immediate material concerns. However, when divine authority became rigid dogma disconnected from evolving human understanding, societies needed new organizing principles.</p>
        <p><strong>Economic Systems</strong> emerged to address the material realities that religious authority alone couldn't manage. Capitalism harnessed individual self-interest to drive innovation and resource allocation, while communism responded to capitalism's inequalities by emphasizing collective ownership and worker solidarity. Both systems recognized that material organization matters profoundly for human welfare, yet both also became quasi-religious in their devotion to abstract principles rather than concrete human prosperity.</p>
        <p><strong>Enlightenment Reason</strong> emerged to systematize human understanding through rational analysis, scientific method, and evidence-based thinking. This intellectual foundation revolutionized human capability and provided the conceptual tools for organizing society around logic rather than tradition or divine authority.</p>
        <p><strong>Individualism</strong> emerged as wealth and power became more distributed, emphasizing individual rights, personal autonomy, and self-determination. This created unprecedented opportunities for human expression and achievement. Yet individualism taken to extremes creates collective problems that individual action alone cannot solve, from climate change to inequality to complex technological risks.</p>
        <p><strong>Civicism</strong> now emerges as the synthesis of all these insights, grounded in intersectional understanding of how people actually exist in society. From religion, it takes the recognition that humans need meaning and purpose beyond material accumulation. From economic systems, it incorporates sophisticated understanding of how material organization affects human welfare. From the Enlightenment, it embraces rational analysis and evidence-based decision-making. From individualism, it preserves respect for personal agency and individual rights. But it transcends each by using intelligent systems to manage the complexity of optimizing for collective human prosperity while maintaining individual freedom - all while recognizing that people exist at multiple intersections simultaneously.</p>

        <h3>The Four-Level Pyramid Structure</h3>
        <p>Civicism organizes society through a four-level pyramid structure, flowing from top to bottom: People, Domains, Governance, and Earth. This structure makes explicit that everything exists for the betterment of people on Earth. All levels are important and necessary, but the purpose flows downward from people—we organize domains, establish governance, and respect Earth's boundaries all in service of human flourishing.</p>
        <p><strong>People (Apex):</strong> People are the purpose and beneficiaries of the entire system. Every structure, process, and decision exists to serve human prosperity. People are not treated as a homogeneous group, but as individuals whose complex intersecting identities shape their needs, capabilities, and potential contributions.</p>
        <p><strong>Domains:</strong> Domains are the functional areas where human activity happens: Agriculture, Economics, Education, Entertainment, Healthcare, Infrastructure, Justice, Security, and Technology. These are the arenas where people participate in activities that serve collective prosperity.</p>
        <p><strong>Governance:</strong> Governance is the unified coordination layer that organizes and regulates activity within and across domains. This layer represents the synthesis of what were historically separate functions: business (operation) and government (regulation). In Civicism, these are understood as two sides of the same coin—the same coordination function operating through different mechanisms. Governance operates through transparent, domain-based committees that scale from local to national levels, ensuring that everyone has access to the operations of everything.</p>
        <p><strong>Earth (Foundation):</strong> Earth provides the foundation that supports all human endeavors and sets the planetary boundaries within which we must operate. All human activity must respect these boundaries, recognizing that we cannot serve people if we destroy the foundation that sustains us.</p>

        <h3>The Circulation Principle</h3>
        <p>Civicism operates on a circulation principle: resources must flow to where they're needed and circulate back from where they accumulate. This is fundamentally different from both capitalist accumulation (where resources concentrate with capital) and communist redistribution (where centralized authority allocates resources).</p>
        <p>Circulation recognizes that prosperity requires movement—like blood in a body or nutrients in an ecosystem. When resources accumulate rather than circulate, the system sickens. When resources flow based on actual need (understood intersectionally), everyone prospers.</p>

        <h3>Network Intelligence and Intersectional Analysis</h3>
        <p>The network intelligence that supports Civicism's structure must be designed with intersectional analysis at its core. AI agents cannot simply optimize for single variables like "reduce poverty" or "increase employment," but must understand how different interventions affect people differently based on their complex, intersecting social locations.</p>
        <p>For example, a job training program might appear successful if it increases overall employment rates, but intersectional analysis might reveal that it primarily benefits people who already had certain advantages while leaving behind those facing multiple, compounding barriers. Network intelligence equipped with intersectional understanding would recognize this pattern and adjust the program to address the specific obstacles faced by different groups.</p>

        <h3>Why This Matters to You</h3>
        <p>You are not a category or a statistic. You are a unique person with a specific combination of identities, experiences, needs, and capabilities. Civicism is designed to serve YOU—not an abstract average person, but you in all your specific complexity. The systems coordinate around your needs rather than forcing you to navigate disconnected bureaucracies designed for someone else.</p>
        <p>Civicism offers a path forward that honors the insights of intersectionality while maintaining the practical goal of reorganizing society for collective human prosperity. This means building systems that are sophisticated enough to recognize and respond to intersectional realities while remaining focused on the shared goal of creating a society where everyone can thrive.</p>`,
    relatedLinks: [
        { text: 'People', action: 'focus', target: 'people' },
        { text: 'Domains', action: 'focus', target: 'domains' },
        { text: 'Governance', action: 'focus', target: 'governance' },
        { text: 'Earth', action: 'focus', target: 'earth' },
        { text: 'Network Intelligence', action: 'focus', target: 'network' },
        { text: 'View All Domains', action: 'focus', target: 'domains-network' },
        { text: 'Intersectionality', action: 'focus', target: 'intersectionality' }
    ]
};

// Individual data objects for each identity section
const intersectionalitySections = {
    'cultural-dimensions': {
        title: 'Cultural Dimensions',
        description: 'Cultural dimensions represent the socially constructed categories through which societies organize and understand human difference. These dimensions form the foundation of how individuals are perceived, categorized, and treated within their communities and broader society.',
        details: `<h3>Understanding Cultural Dimensions</h3>
        <p>Cultural dimensions represent the socially constructed categories through which societies organize and understand human difference. These dimensions form the foundation of how individuals are perceived, categorized, and treated within their communities and broader society. Unlike biological or essential characteristics, cultural dimensions are created and maintained through social processes, yet they carry profound material consequences for individuals' life experiences.</p>

        <h3>Key Dimensions</h3>
        <p><strong>Ethnicity</strong> serves as one of the most significant cultural dimensions, encompassing not only ancestral origins but also shared cultural practices, languages, traditions, and collective histories. An individual's ethnic background influences their worldview, communication styles, family structures, and relationship to broader social institutions.</p>

        <p><strong>Gender identity and expression</strong> constitute another fundamental cultural dimension that shapes social interactions from birth. Beyond biological sex, gender encompasses the roles, behaviors, expressions, and identities that societies construct around masculinity, femininity, and other gender categories.</p>

        <p><strong>Sexual orientation</strong> adds another layer of complexity to identity formation. How individuals experience and express romantic and sexual attraction influences their relationships, community connections, and interactions with social institutions.</p>

        <p><strong>Age</strong> functions as a unique cultural dimension because it changes throughout an individual's lifetime, affecting how other dimensions are experienced. A young Muslim woman faces different challenges and opportunities than an elderly Muslim woman, even when they share religious, ethnic, and gender identities.</p>

        <p><strong>Ability status</strong>, encompassing physical, cognitive, sensory, and mental health differences, profoundly influences how individuals navigate physical and social environments. The social model of disability recognizes that many barriers faced by people with disabilities stem from social organization rather than individual impairments.</p>

        <p><strong>Social class</strong> represents economic positioning within society but extends beyond income to include education, occupation, cultural capital, and social networks. Class shapes not only material resources but also worldviews, communication styles, and assumptions about how the world works.</p>

        <p><strong>Religious and spiritual identities</strong> provide frameworks for meaning-making, community connection, and moral guidance. These identities intersect with other dimensions in complex ways—being Christian carries different social implications for a white suburban family than for recent immigrants from the Global South.</p>

        <h3>Why This Matters</h3>
        <p>These dimensions are created and maintained through social processes, yet they carry profound material consequences for individuals' life experiences. Understanding how cultural dimensions operate helps us recognize that identity categories are not natural or fixed, but socially constructed—yet their effects are very real in shaping opportunities, experiences, and life outcomes.</p>`,
        relatedLinks: [
            { text: '*Isms', action: 'intersectionality', target: 'isms' },
            { text: 'Systemic Factors', action: 'intersectionality', target: 'systemic-factors' },
            { text: 'Personal Contextual Factors', action: 'intersectionality', target: 'personal-factors' },
            { text: 'Relationality', action: 'intersectionality', target: 'relationality' },
            { text: 'People', action: 'focus', target: 'people' }
        ]
    },
    'isms': {
        title: '*Isms',
        description: 'Systems of oppression, commonly referred to as the various *isms, represent institutionalized patterns of discrimination, prejudice, and unequal treatment that advantage some groups while disadvantaging others.',
        details: `<h3>Understanding Systems of Oppression</h3>
        <p>Systems of oppression, commonly referred to as the various *isms, represent institutionalized patterns of discrimination, prejudice, and unequal treatment that advantage some groups while disadvantaging others. These systems operate at multiple levels, from individual attitudes and behaviors to institutional policies and cultural narratives. Understanding how these systems function and intersect is crucial for comprehending how inequality is created and maintained in society.</p>

        <h3>Key Systems</h3>
        <p><strong>Racism</strong> represents perhaps the most extensively studied system of oppression, involving the systematic disadvantaging of people based on racial and ethnic categories. Modern racism operates through both explicit discrimination and implicit biases embedded in institutional practices. It manifests in disparities in educational outcomes, employment opportunities, healthcare access, criminal justice treatment, and wealth accumulation.</p>

        <p><strong>Sexism</strong> encompasses the systematic disadvantaging of people based on gender, traditionally focusing on the oppression of women but increasingly understood to include discrimination against anyone who challenges gender norms. Sexism operates through wage gaps, occupational segregation, sexual harassment, gender-based violence, and cultural expectations that limit individual expression and opportunities.</p>

        <p><strong>Homophobia, heterosexism, and related forms of discrimination</strong> target individuals based on sexual orientation and gender identity. These systems privilege heterosexuality and traditional gender expressions while marginalizing LGBTQ+ individuals through legal discrimination, social rejection, and cultural invisibility.</p>

        <p><strong>Ableism</strong> represents the systematic discrimination against people with disabilities, operating through both individual attitudes and institutional barriers that assume non-disabled experiences as the norm. Ableism manifests in physical barriers, communication barriers, employment discrimination, and cultural narratives that devalue disabled lives.</p>

        <p><strong>Classism</strong> involves the systematic advantaging of people with higher socioeconomic status while disadvantaging those with lower status. This system operates through differential access to quality education, healthcare, housing, and legal representation.</p>

        <p><strong>Ageism</strong> affects both young and old people, though in different ways. Older adults may face employment discrimination, healthcare neglect, and social isolation, while young people may encounter adultism—the systematic mistreatment and dismissal of young people by adults.</p>

        <p><strong>Religious intolerance</strong> and related forms of discrimination target individuals based on their religious or spiritual beliefs and practices. In many contexts, this includes specific forms like anti-Semitism and Islamophobia that have particular historical and contemporary manifestations.</p>

        <p><strong>Xenophobia</strong> represents fear and hostility toward people perceived as foreign or different, often targeting immigrants, refugees, and anyone who appears "foreign" regardless of their actual citizenship status.</p>

        <h3>Why This Matters</h3>
        <p>These systems intersect with each other in complex ways, creating unique experiences of privilege and oppression that cannot be understood by examining any single system in isolation. Understanding how these systems operate and interact is essential for developing effective strategies to address inequality and create more just societies.</p>`,
        relatedLinks: [
            { text: 'Cultural Dimensions', action: 'intersectionality', target: 'cultural-dimensions' },
            { text: 'Systemic Factors', action: 'intersectionality', target: 'systemic-factors' },
            { text: 'Personal Contextual Factors', action: 'intersectionality', target: 'personal-factors' },
            { text: 'Relationality', action: 'intersectionality', target: 'relationality' },
            { text: 'People', action: 'focus', target: 'people' }
        ]
    },
    'systemic-factors': {
        title: 'Systemic Factors',
        description: 'While cultural dimensions provide the categories through which identity is organized, systemic factors represent the broader structural contexts that determine how those identities are valued, supported, or marginalized within society.',
        details: `<h3>Understanding Systemic Factors</h3>
        <p>While cultural dimensions provide the categories through which identity is organized, systemic factors represent the broader structural contexts that determine how those identities are valued, supported, or marginalized within society. These factors operate at multiple levels, from historical legacies that continue to shape contemporary conditions to immediate policy environments that constrain or enable individual opportunities.</p>

        <h3>Key Factors</h3>
        <p><strong>Historical context</strong> forms the foundation of contemporary systemic factors. Past events, policies, and social movements create lasting effects that ripple through generations. The legacy of colonialism continues to influence the life chances of Indigenous peoples worldwide, while the history of slavery and subsequent legal segregation shapes contemporary racial inequalities in the United States.</p>

        <p><strong>Intergenerational trauma</strong> represents one mechanism through which historical oppression continues to affect contemporary communities. When groups experience systematic violence, displacement, or cultural suppression, the effects extend beyond immediate victims to influence family systems, community structures, and cultural practices across generations.</p>

        <p><strong>The sociocultural environment</strong> encompasses the dominant narratives, cultural norms, and social discourses that shape how different identities are understood and valued. Media representations play a crucial role in this environment, influencing public perceptions and individual self-concepts.</p>

        <p><strong>Political and economic systems</strong> create the immediate structural context within which individuals navigate their daily lives. Policy frameworks determine access to resources, legal protections, and institutional support. Economic systems influence the distribution of wealth, the structure of labor markets, and the availability of economic opportunities.</p>

        <p><strong>The structure of opportunity</strong> represents how systemic factors combine to create different pathways for social mobility and life success. Educational systems, healthcare institutions, housing markets, and employment sectors all contain both formal and informal barriers that affect different groups differently.</p>

        <h3>Why This Matters</h3>
        <p>These factors are not neutral but reflect and reproduce existing patterns of inequality through seemingly objective processes like standardized testing, credit scoring, and professional networking. Understanding systemic factors helps us recognize that individual outcomes are shaped by broader structural forces, not just personal choices or characteristics.</p>`,
        relatedLinks: [
            { text: 'Cultural Dimensions', action: 'intersectionality', target: 'cultural-dimensions' },
            { text: '*Isms', action: 'intersectionality', target: 'isms' },
            { text: 'Personal Contextual Factors', action: 'intersectionality', target: 'personal-factors' },
            { text: 'Relationality', action: 'intersectionality', target: 'relationality' },
            { text: 'People', action: 'focus', target: 'people' }
        ]
    },
    'personal-factors': {
        title: 'Personal Contextual Factors',
        description: 'While systemic factors and relational contexts provide the structural framework for identity development, personal contextual factors represent the individual characteristics, experiences, and circumstances that create unique trajectories within those broader patterns.',
        details: `<h3>Understanding Personal Contextual Factors</h3>
        <p>While systemic factors and relational contexts provide the structural framework for identity development, personal contextual factors represent the individual characteristics, experiences, and circumstances that create unique trajectories within those broader patterns. These factors demonstrate how structural forces play out differently for different individuals, even among those who share similar social positions.</p>

        <h3>Key Factors</h3>
        <p><strong>Biological and genetic factors</strong> provide the physical foundation for individual development, but their effects are mediated by social and environmental contexts. Genetic predispositions interact with environmental factors to influence health, cognitive development, and physical characteristics. However, the social meaning and consequences of these characteristics depend entirely on cultural and systemic factors.</p>

        <p><strong>Family background</strong> creates the immediate context for early identity development through both material circumstances and cultural transmission. Family socioeconomic status affects access to resources, educational opportunities, and social networks. Family cultural practices transmit values, worldviews, and strategies for navigating social environments.</p>

        <p><strong>Individual characteristics</strong> like personality, learning style, and natural talents create unique patterns of strengths and challenges that influence how individuals navigate their social environments. These characteristics interact with cultural dimensions and systemic factors to create different possibilities and constraints.</p>

        <p><strong>Educational experiences</strong> play a crucial role in identity development by providing knowledge, skills, and credentials that affect future opportunities. However, educational experiences are shaped by intersectional identities in complex ways. Students from different backgrounds encounter different expectations, receive different types of support, and have access to different resources within educational institutions.</p>

        <p><strong>Life experiences</strong>, both positive and challenging, shape individual resilience, worldview, and coping strategies. Trauma and adversity can create lasting effects on mental health, relationships, and future possibilities, but these effects are influenced by available support systems, cultural frameworks for understanding suffering, and systemic responses to different types of trauma.</p>

        <p><strong>Developmental context</strong> recognizes that identity formation occurs throughout the lifespan, with different life stages presenting different opportunities and challenges. Early childhood experiences affect neurological development and attachment patterns. Adolescence involves identity exploration and the development of autonomy. Early adulthood often involves major life transitions around education, career, and relationships.</p>

        <h3>Why This Matters</h3>
        <p>These factors demonstrate how structural forces play out differently for different individuals, even among those who share similar social positions. Understanding personal contextual factors helps us recognize both the unique aspects of individual experience and how those experiences are shaped by broader social structures.</p>`,
        relatedLinks: [
            { text: 'Cultural Dimensions', action: 'intersectionality', target: 'cultural-dimensions' },
            { text: '*Isms', action: 'intersectionality', target: 'isms' },
            { text: 'Systemic Factors', action: 'intersectionality', target: 'systemic-factors' },
            { text: 'Relationality', action: 'intersectionality', target: 'relationality' },
            { text: 'People', action: 'focus', target: 'people' }
        ]
    },
    'relationality': {
        title: 'Relationality',
        description: 'Human identity is fundamentally relational, emerging through interactions with others and connections to communities rather than existing as an isolated individual characteristic.',
        details: `<h3>Understanding Relationality</h3>
        <p>Human identity is fundamentally relational, emerging through interactions with others and connections to communities rather than existing as an isolated individual characteristic. Relationality encompasses the full spectrum of connections that shape identity formation, from intimate family relationships to broader community affiliations and connections to place and land.</p>

        <h3>Key Relationships</h3>
        <p><strong>Family structures</strong> provide the initial context for identity development, but families themselves exist in many forms and serve different functions across cultures and communities. Biological families, chosen families, extended kinship networks, and community-based child-rearing arrangements all contribute to identity formation in different ways. The concept of chosen family has become particularly important for individuals whose identities are not supported by their families of origin.</p>

        <p><strong>Community connections</strong> extend identity formation beyond family relationships to include peer groups, cultural communities, professional networks, and interest-based affiliations. These communities provide role models, support systems, and spaces for identity exploration and affirmation. However, community membership is not always straightforward—individuals may find themselves between communities or struggling to find communities that embrace their full intersectional identities.</p>

        <p><strong>Cultural and ancestral ties</strong> connect individuals to broader historical and cultural streams that extend beyond their immediate relationships. Language communities, cultural traditions, spiritual practices, and ancestral knowledge create connections across time and space that influence identity formation. These connections can be sources of strength and resilience, but they can also create tensions when traditional cultural expectations conflict with individual identity development.</p>

        <p><strong>Self-in-relation</strong> recognizes that individual identity is always understood in relationship to others and to social positioning. How individuals understand themselves depends partly on how they are perceived and treated by others, how they fit within social hierarchies, and what roles they occupy within their various communities. This relational aspect of identity helps explain why identity can feel fluid and contextual.</p>

        <p><strong>Geographic and environmental relationships</strong> also shape identity through connections to specific places, landscapes, and built environments. For Indigenous peoples, relationships to traditional lands form fundamental aspects of cultural and spiritual identity. Urban dwellers develop relationships to neighborhoods and cityscapes that influence their worldview and opportunities.</p>

        <h3>Why This Matters</h3>
        <p>Relationality reminds us that identity is not something we possess in isolation but something that emerges through our connections with others. Understanding the relational nature of identity helps us recognize how our sense of self is shaped by our communities, relationships, and social contexts, and how these connections can be sources of both support and constraint.</p>`,
        relatedLinks: [
            { text: 'Cultural Dimensions', action: 'intersectionality', target: 'cultural-dimensions' },
            { text: '*Isms', action: 'intersectionality', target: 'isms' },
            { text: 'Systemic Factors', action: 'intersectionality', target: 'systemic-factors' },
            { text: 'Personal Contextual Factors', action: 'intersectionality', target: 'personal-factors' },
            { text: 'People', action: 'focus', target: 'people' }
        ]
    }
};

// Vortical Progression data
const vorticalPhases = [
    {
        name: 'Religion',
        description: 'First large-scale organizing principles, creating meaning systems that could coordinate behavior across vast populations.',
        details: `<h3>Religion Phase</h3>
        <p>Religion gave humanity its first large-scale organizing principles, creating meaning systems that could coordinate behavior across vast populations. Religious frameworks established concepts of universal human dignity, moral obligations to others, and recognition that humans need purpose beyond immediate material concerns.</p>
        <p>However, when divine authority became rigid dogma disconnected from evolving human understanding, societies needed new organizing principles.</p>`,
        color: 'rgba(255, 215, 0, 0.9)',
        position: 0 // First phase
    },
    {
        name: 'Economic Systems',
        description: 'Emergence of systems to address material realities - capitalism and communism responding to resource organization.',
        details: `<h3>Economic Systems Phase</h3>
        <p>Economic systems emerged to address the material realities that religious authority alone couldn't manage. Capitalism harnessed individual self-interest to drive innovation and resource allocation, while communism responded to capitalism's inequalities by emphasizing collective ownership and worker solidarity.</p>
        <p>Both systems recognized that material organization matters profoundly for human welfare, yet both also became quasi-religious in their devotion to abstract principles rather than concrete human prosperity.</p>`,
        color: 'rgba(255, 140, 0, 0.9)',
        position: 1
    },
    {
        name: 'Enlightenment Reason',
        description: 'Systematizing human understanding through rational analysis, scientific method, and evidence-based thinking.',
        details: `<h3>Enlightenment Reason Phase</h3>
        <p>Enlightenment Reason emerged to systematize human understanding through rational analysis, scientific method, and evidence-based thinking. This intellectual foundation revolutionized human capability and provided the conceptual tools for organizing society around logic rather than tradition or divine authority.</p>
        <p>The Enlightenment largely overlapped with mercantilism in the West, where government-sanctioned trading companies accumulated power and resources, creating the foundation for what would become capitalism.</p>`,
        color: 'rgba(0, 191, 255, 0.9)',
        position: 2
    },
    {
        name: 'Individualism',
        description: 'Emphasis on individual rights, personal autonomy, and self-determination as wealth and power became more distributed.',
        details: `<h3>Individualism Phase</h3>
        <p>Individualism emerged as wealth and power became more distributed, emphasizing individual rights, personal autonomy, and self-determination. This created unprecedented opportunities for human expression and achievement.</p>
        <p>Yet individualism taken to extremes creates collective problems that individual action alone cannot solve, from climate change to inequality to complex technological risks.</p>`,
        color: 'rgba(50, 205, 50, 0.9)',
        position: 3
    },
    {
        name: 'Civicism',
        description: 'Synthesis of all previous insights, using intelligent systems to optimize for collective human prosperity while maintaining individual freedom.',
        details: `<h3>Civicism Phase</h3>
        <p>Civicism now emerges as the synthesis of all these insights, grounded in intersectional understanding of how people actually exist in society. From religion, it takes the recognition that humans need meaning and purpose beyond material accumulation. From economic systems, it incorporates sophisticated understanding of how material organization affects human welfare. From the Enlightenment, it embraces rational analysis and evidence-based decision-making. From individualism, it preserves respect for personal agency and individual rights.</p>
        <p>But it transcends each by using intelligent systems to manage the complexity of optimizing for collective human prosperity while maintaining individual freedom - all while recognizing that people exist at multiple intersections simultaneously.</p>`,
        color: 'rgba(138, 43, 226, 0.9)',
        position: 4
    }
];

const canvas = document.getElementById('main-canvas');
const ctx = canvas.getContext('2d');
const domainNetworkCanvas = document.getElementById('domain-network-canvas');
const domainNetworkCtx = domainNetworkCanvas.getContext('2d');
const intersectionalityCanvas = document.getElementById('intersectionality-canvas');
const intersectionalityCtx = intersectionalityCanvas.getContext('2d');
const vorticalProgressionCanvas = document.getElementById('vortical-progression-canvas');
const vorticalProgressionCtx = vorticalProgressionCanvas.getContext('2d');
const container = document.getElementById('canvas-container');
const pyramidContainer = document.getElementById('pyramid-container');
const domainNetworkContainer = document.getElementById('domain-network-container');
const intersectionalityContainer = document.getElementById('intersectionality-container');
const vorticalProgressionContainer = document.getElementById('vortical-progression-container');
const infoPanel = document.getElementById('info-panel');
const infoContent = document.getElementById('info-content');
const zoomIndicator = document.getElementById('zoom-indicator');

// Canvas setup
function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    domainNetworkCanvas.width = window.innerWidth;
    domainNetworkCanvas.height = window.innerHeight;
    intersectionalityCanvas.width = window.innerWidth;
    intersectionalityCanvas.height = window.innerHeight;
    vorticalProgressionCanvas.width = window.innerWidth;
    vorticalProgressionCanvas.height = window.innerHeight;
    if (typeof pyramidData !== 'undefined') {
        drawNetworkLayer();
        drawDomainNetwork();
    }
    drawIntersectionalityVisualization();
    drawVorticalProgression();
}
window.addEventListener('resize', resizeCanvas);

        // View state
        let viewState = {
            x: 0,
            y: 0,
            scale: 0.35,
            minScale: 0.0875,  // 25% zoom (allows much wider view)
            maxScale: 1.4
        };

// Create pyramid layers
function createPyramidLayers() {
    Object.keys(pyramidData).forEach((key, index) => {
        const layer = pyramidData[key];
        const layerEl = document.createElement('div');
        layerEl.className = `pyramid-layer ${key}`;
        layerEl.dataset.layerKey = key;

        // Create SVG for the trapezoid shape
        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('viewBox', '0 0 1000 1000');
        svg.setAttribute('preserveAspectRatio', 'none');

        const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
        polygon.setAttribute('points', '0,0 1000,0 1000,1000 0,1000');
        polygon.setAttribute('fill', 'url(#gradient-' + key + ')');
        polygon.setAttribute('stroke', 'rgba(255, 255, 255, 0.3)');
        polygon.setAttribute('stroke-width', '2');

        // Create gradient
        const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
        const gradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
        gradient.setAttribute('id', 'gradient-' + key);
        gradient.setAttribute('x1', '0%');
        gradient.setAttribute('y1', '0%');
        gradient.setAttribute('x2', '100%');
        gradient.setAttribute('y2', '0%');

        const stops = {
            people: [{offset: '0%', color: '#667eea'}, {offset: '100%', color: '#764ba2'}],
            domains: [{offset: '0%', color: '#f093fb'}, {offset: '100%', color: '#f5576c'}],
            governance: [{offset: '0%', color: '#4facfe'}, {offset: '100%', color: '#00f2fe'}],
            earth: [{offset: '0%', color: '#43e97b'}, {offset: '100%', color: '#38f9d7'}]
        };

        stops[key].forEach(stop => {
            const stopEl = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
            stopEl.setAttribute('offset', stop.offset);
            stopEl.setAttribute('stop-color', stop.color);
            stopEl.setAttribute('stop-opacity', '0.9');
            gradient.appendChild(stopEl);
        });

        defs.appendChild(gradient);
        svg.appendChild(defs);
        svg.appendChild(polygon);
        layerEl.appendChild(svg);

        layerEl.addEventListener('click', (e) => {
            e.stopPropagation();
            showInfo({
                title: layer.title,
                description: layer.description,
                details: layer.details,
                relatedLinks: layer.relatedLinks || []
            });
        });

        // Ensure touch events work on mobile
        layerEl.addEventListener('touchend', (e) => {
            e.stopPropagation();
            e.preventDefault();
            showInfo({
                title: layer.title,
                description: layer.description,
                details: layer.details,
                relatedLinks: layer.relatedLinks || []
            });
        });
        pyramidContainer.appendChild(layerEl);

        // Add label
        const labelEl = document.createElement('div');
        labelEl.className = 'layer-label';
        labelEl.textContent = layer.title;
        layerEl.appendChild(labelEl);

        // Domains layer no longer contains domain nodes - they're in separate network visualization
    });
}

// Update pyramid positions
function updatePyramidPositions() {
    const screenX = (viewState.x) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y) * viewState.scale + window.innerHeight / 2;
    // Pyramid bottom is at y=0, top is at y=pyramidHeight
    // Center the pyramid vertically on screen
    const pyramidBottomScreenY = screenY + (pyramidHeight / 2) * viewState.scale;

    // Process layers in order from bottom (Earth) to top (People)
    const layerOrder = ['earth', 'governance', 'domains', 'people'];

    layerOrder.forEach((key) => {
        const layer = pyramidData[key];
        const layerEl = document.querySelector(`.pyramid-layer.${key}`);

        // Calculate pyramid width at top and bottom of this layer
        // y=0 is bottom (widest), y=pyramidHeight is top (narrowest)
        const layerBottomY = layer.y;
        const layerTopY = layer.y + layer.height;
        const bottomProgress = layerBottomY / pyramidHeight;  // 0 = bottom, 1 = top
        const topProgress = layerTopY / pyramidHeight;

        // Calculate widths - wider at bottom (progress=0), narrower at top (progress=1)
        const widthAtBottom = pyramidBase * (1 - bottomProgress);
        const widthAtTop = pyramidBase * (1 - topProgress);

        // Calculate screen positions
        const bottomWidth = widthAtBottom * viewState.scale;
        const topWidth = widthAtTop * viewState.scale;
        const height = layer.height * viewState.scale;

        // Calculate Y position - layers stack from bottom up
        const layerBottomScreenY = pyramidBottomScreenY - (layerBottomY * viewState.scale);
        const layerTopScreenY = pyramidBottomScreenY - (layerTopY * viewState.scale);

        // Position the layer element - use bottom width for container (wider base)
        // Center horizontally based on bottom width
        layerEl.style.left = `${screenX - bottomWidth / 2}px`;
        layerEl.style.top = `${layerTopScreenY}px`;
        layerEl.style.width = `${bottomWidth}px`;
        layerEl.style.height = `${height}px`;

        // Update SVG polygon to create trapezoid shape
        // Top should be narrower, bottom wider
        const svg = layerEl.querySelector('svg');
        const polygon = layerEl.querySelector('polygon');
        if (svg && polygon && bottomWidth > 0) {
            if (topWidth < bottomWidth && topWidth > 0) {
                // Normal trapezoid - top narrower than bottom
                const widthRatio = topWidth / bottomWidth;
                const leftOffset = (1 - widthRatio) * 1000 / 2;
                const rightOffset = 1000 - leftOffset;
                // Points: top-left (narrower), top-right (narrower), bottom-right (wider), bottom-left (wider)
                const points = [
                    `${leftOffset},0`,
                    `${rightOffset},0`,
                    `1000,1000`,
                    `0,1000`
                ].join(' ');
                polygon.setAttribute('points', points);
            } else if (topWidth <= 0 || key === 'people') {
                // For People layer (apex), create a triangle pointing up
                const points = `500,0 500,0 1000,1000 0,1000`;
                polygon.setAttribute('points', points);
            } else {
                // Fallback - rectangle if widths are equal
                const points = `0,0 1000,0 1000,1000 0,1000`;
                polygon.setAttribute('points', points);
            }
        }
        layerEl.style.transform = 'none';

        // Update label position - ensure it's visible at all zoom levels
        const labelEl = layerEl.querySelector('.layer-label');
        if (labelEl) {
            // Font size scales proportionally with layer height AND zoom level
            // Base size calculation - proportional to layer height (which already scales with zoom)
            const baseProportionalSize = height * 0.12;
            // Scale with zoom to ensure readability at all zoom levels
            const zoomScaledSize = baseProportionalSize * viewState.scale;
            // Ensure minimum readable size (scales with zoom but never too small)
            const minSize = Math.max(12, 12 * viewState.scale);
            // Cap maximum size
            const maxSize = Math.min(80, height * 0.25);
            const fontSize = Math.max(minSize, Math.min(maxSize, zoomScaledSize));
            labelEl.style.fontSize = `${fontSize}px`;
        }

        // Domain mesh is handled by CSS grid, but ensure nodes are readable
        if (key === 'domains') {
            const domainEls = layerEl.querySelectorAll('.domain-node');
            const meshContainer = layerEl.querySelector('.domain-mesh');
            if (meshContainer && domainEls.length > 0) {
                // Calculate cell size from grid - account for gap and padding
                const meshHeight = height * 0.88; // 88% of layer height
                const meshWidth = bottomWidth * 0.94; // 94% of layer width
                const gap = Math.max(2, height * 0.012); // Minimum 2px gap
                const cellHeight = (meshHeight - (gap * 2)) / 3; // Subtract gaps, divide by rows
                const cellWidth = (meshWidth - (gap * 2)) / 3; // Subtract gaps, divide by cols

                domainEls.forEach((domainEl) => {
                    // Font size should fit within the cell
                    const textLength = domainEl.textContent.length;
                    // Estimate: average character width is ~0.6em, so we need width / (chars * 0.6)
                    const widthBasedSize = (cellWidth * 0.9) / (textLength * 0.65);
                    const heightBasedSize = cellHeight * 0.6; // Use 60% of height for font

                    // Take the smaller of the two to ensure text fits
                    let fontSize = Math.min(widthBasedSize, heightBasedSize);

                    // Ensure minimum readable size - scale with zoom but never below readable threshold
                    const absoluteMinSize = 10; // Absolute minimum for readability
                    const zoomAdjustedMin = Math.max(absoluteMinSize, absoluteMinSize * Math.max(0.2, viewState.scale));
                    fontSize = Math.max(zoomAdjustedMin, fontSize);

                    // Cap maximum size
                    const maxSize = Math.min(16, cellHeight * 0.5);
                    fontSize = Math.min(maxSize, fontSize);

                    domainEl.style.fontSize = `${fontSize}px`;

                    // Padding should be proportional but maintain minimum
                    const paddingV = Math.max(2, Math.min(cellHeight * 0.15, fontSize * 0.4));
                    const paddingH = Math.max(3, Math.min(cellWidth * 0.1, fontSize * 0.5));
                    domainEl.style.padding = `${paddingV}px ${paddingH}px`;
                });
            }
        }
    });

    drawNetworkLayer();
    updateDomainNetworkPositions();
    updateIntersectionalityPositions();
    drawIntersectionalityVisualization();
    updateVorticalProgressionPositions();
    drawVorticalProgression();
    updateZoomIndicator();
}

// Draw network intelligence layer (encasing the pyramid)
function drawNetworkLayer() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const padding = 80;
    const networkBase = pyramidBase + padding * 2;
    const networkHeight = pyramidHeight + padding * 2;

    const screenX = (viewState.x) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y) * viewState.scale + window.innerHeight / 2;

    ctx.strokeStyle = 'rgba(48, 207, 208, 0.6)';
    ctx.lineWidth = 4 * viewState.scale;
    ctx.setLineDash([10 * viewState.scale, 5 * viewState.scale]);

    // Draw outer pyramid outline (network layer) - from bottom up
    const bottomY = screenY + (networkHeight / 2) * viewState.scale;
    const topY = screenY - (networkHeight / 2) * viewState.scale;
    const bottomLeftX = screenX - (networkBase / 2) * viewState.scale;
    const bottomRightX = screenX + (networkBase / 2) * viewState.scale;
    const topX = screenX;

    ctx.beginPath();
    ctx.moveTo(bottomLeftX, bottomY);
    ctx.lineTo(topX, topY);
    ctx.lineTo(bottomRightX, bottomY);
    ctx.closePath();
    ctx.stroke();

    // Draw low-transparency mesh grid inside the Network Intelligence outline
    ctx.save();
    ctx.strokeStyle = 'rgba(48, 207, 208, 1)'; // More visible mesh
    ctx.lineWidth = Math.max(1, 1.5 * viewState.scale); // Slightly thicker lines
    ctx.setLineDash([4 * viewState.scale, 4 * viewState.scale]); // Dotted lines for mesh

    // Create clipping path for the pyramid shape
    ctx.beginPath();
    ctx.moveTo(bottomLeftX, bottomY);
    ctx.lineTo(topX, topY);
    ctx.lineTo(bottomRightX, bottomY);
    ctx.closePath();
    ctx.clip();

    // Draw horizontal grid lines (spacing them evenly)
    const numHorizontalLines = 8; // Number of horizontal grid lines
    for (let i = 1; i < numHorizontalLines; i++) {
        const progress = i / numHorizontalLines; // 0 to 1 from bottom to top
        const y = bottomY - (bottomY - topY) * progress;

        // Calculate width at this Y position (pyramid tapers)
        const widthProgress = 1 - progress; // 1 at bottom, 0 at top
        const widthAtY = networkBase * widthProgress * viewState.scale;
        const leftX = screenX - widthAtY / 2;
        const rightX = screenX + widthAtY / 2;

        ctx.beginPath();
        ctx.moveTo(leftX, y);
        ctx.lineTo(rightX, y);
        ctx.stroke();
    }

    // Draw vertical grid lines (spacing them evenly at the base, converging to top point)
    const numVerticalLines = 6; // Number of vertical grid lines
    for (let i = 1; i < numVerticalLines; i++) {
        const progress = i / numVerticalLines; // 0 to 1 from left to right

        // Calculate X position at the base
        const baseX = bottomLeftX + (bottomRightX - bottomLeftX) * progress;

        // Draw line from base to top point (all vertical lines converge at the apex)
        ctx.beginPath();
        ctx.moveTo(baseX, bottomY);
        ctx.lineTo(topX, topY);
        ctx.stroke();
    }

    ctx.restore(); // Remove clipping path

    // Reset line dash before drawing arrow
    ctx.setLineDash([]);

    // Position Network Intelligence button FIRST, then draw arrow to it
    updateNetworkIntelligenceButton();
    updateCivicismButton();
    updateVorticalProgressionButton();
    drawNetworkIntelligenceArrow();
}

function updateVorticalProgressionButton() {
    const btn = document.getElementById('vortical-progression-btn');
    if (!btn) return;

    // Position button above the grid view
    const offsetX = pyramidBase * 1.1;
    const offsetY = -pyramidHeight * 0.25; // Above the grid

    const screenX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    btn.style.left = `${screenX}px`;
    btn.style.top = `${screenY}px`;
    btn.style.transform = 'translate(-50%, -100%)'; // Center horizontally, align bottom to position
}

function drawNetworkIntelligenceArrow() {
    const btn = document.getElementById('network-intelligence-btn');
    if (!btn) return; // Check if button exists

    // Calculate button position the same way as updateNetworkIntelligenceButton
    // Button is now below the domain network, closer to bottom of pyramid
    const offsetX = -pyramidBase * 1.1; // Same X position as domain network
    const offsetY = pyramidHeight * 0.35; // Below center, closer to bottom

    const screenX = (viewState.x) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y) * viewState.scale + window.innerHeight / 2;

    const buttonScreenX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const buttonScreenY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    // Button position (same as updateNetworkIntelligenceButton)
    const buttonX = buttonScreenX - 20 * viewState.scale;
    const buttonY = buttonScreenY;

    // Button uses transform: translate(-100%, -50%)
    // So its right edge is at buttonX (after being shifted left by 100% of its width)
    // And its vertical center is at buttonY (after being shifted up by 50% of its height)
    const btnRightX = buttonX;
    const btnCenterY = buttonY;

    // Network Intelligence outline positions
    const padding = 80;
    const networkBase = pyramidBase + padding * 2;
    const networkHeight = pyramidHeight + padding * 2;
    const networkBottomY = screenY + (networkHeight / 2) * viewState.scale;
    const networkTopY = screenY - (networkHeight / 2) * viewState.scale;
    const networkBottomLeftX = screenX - (networkBase / 2) * viewState.scale;
    const networkTopX = screenX; // Top of triangle is at center

    // Find a point on the Network Intelligence outline near the bottom (since button is now lower)
    // Use a point about 75% down from the top (or 25% up from bottom) to connect to lower part of pyramid
    const outlineProgress = 0.75; // 75% down from top creates good diagonal angle for lower button
    const outlineY = networkTopY + (networkBottomY - networkTopY) * outlineProgress;

    // Linear interpolation along the left edge at this Y position
    const outlineX = networkBottomLeftX + (networkTopX - networkBottomLeftX) * (1 - outlineProgress);

    // Draw diagonal arrow line from Network Intelligence outline to button
    ctx.strokeStyle = 'rgba(48, 207, 208, 0.9)';
    ctx.lineWidth = Math.max(2, 3 * viewState.scale);
    ctx.setLineDash([10 * viewState.scale, 5 * viewState.scale]);

    ctx.beginPath();
    ctx.moveTo(outlineX, outlineY);
    ctx.lineTo(btnRightX, btnCenterY);
    ctx.stroke();

    // Draw arrowhead pointing to button along the diagonal angle
    const arrowLength = 12 * Math.max(1, viewState.scale);
    const angle = Math.atan2(btnCenterY - outlineY, btnRightX - outlineX);

    ctx.fillStyle = 'rgba(48, 207, 208, 0.9)';
    ctx.beginPath();
    ctx.moveTo(btnRightX, btnCenterY);
    ctx.lineTo(
        btnRightX - arrowLength * Math.cos(angle - Math.PI / 6),
        btnCenterY - arrowLength * Math.sin(angle - Math.PI / 6)
    );
    ctx.lineTo(
        btnRightX - arrowLength * Math.cos(angle + Math.PI / 6),
        btnCenterY - arrowLength * Math.sin(angle + Math.PI / 6)
    );
    ctx.closePath();
    ctx.fill();

    ctx.setLineDash([]);
}

function updateNetworkIntelligenceButton() {
    const btn = document.getElementById('network-intelligence-btn');
    if (!btn) return;

    // Position button below the domain network, closer to the bottom of the pyramid
    // Domain network is at offsetX = -pyramidBase * 1.1, offsetY = 0
    // Position Network Intelligence button below it
    const offsetX = -pyramidBase * 1.1; // Same X position as domain network (left of pyramid)
    const offsetY = pyramidHeight * 0.35; // Below center, closer to bottom of pyramid

    const screenX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    // Position button to the left of the domain network area
    const buttonX = screenX - 20 * viewState.scale;
    const buttonY = screenY;

    btn.style.left = `${buttonX}px`;
    btn.style.top = `${buttonY}px`;
    btn.style.transform = 'translate(-100%, -50%)'; // Align to right edge of button
}

function updateCivicismButton() {
    const btn = document.getElementById('civicism-btn');
    if (!btn) return;

    const screenX = (viewState.x) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y) * viewState.scale + window.innerHeight / 2;

    // Position button above the pyramid, centered horizontally
    const topY = screenY - (pyramidHeight / 2) * viewState.scale;
    const buttonX = screenX;
    const buttonY = topY - 60 * viewState.scale; // Position above the pyramid top

    btn.style.left = `${buttonX}px`;
    btn.style.top = `${buttonY}px`;
    btn.style.transform = 'translate(-50%, -100%)'; // Center horizontally, align bottom to position
}

// Domain network visualization
let domainNetworkNodes = [];
let domainNetworkInitialized = false;

function getPyramidBounds() {
    const screenX = (viewState.x) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y) * viewState.scale + window.innerHeight / 2;
    const pyramidBottomScreenY = screenY + (pyramidHeight / 2) * viewState.scale;
    const pyramidTopScreenY = screenY - (pyramidHeight / 2) * viewState.scale;
    const pyramidLeftX = screenX - (pyramidBase / 2) * viewState.scale;
    const pyramidRightX = screenX + (pyramidBase / 2) * viewState.scale;

    return {
        left: pyramidLeftX,
        right: pyramidRightX,
        top: pyramidTopScreenY,
        bottom: pyramidBottomScreenY,
        centerX: screenX,
        centerY: screenY
    };
}

function initializeDomainNetwork() {
    if (domainNetworkInitialized) return;

    // Position domain network relative to viewState (same logic as updateDomainNetworkPositions)
    const offsetX = -pyramidBase * 1.1; // Offset further to the left of pyramid
    const offsetY = 0; // Same vertical center as pyramid
    const screenX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    // Use world coordinates that scale naturally with viewState
    const worldRadius = 330; // Larger circle to prevent button overlap
    const radius = worldRadius * viewState.scale;
    const angleStep = (Math.PI * 2) / domainNodes.length;

    // Node size in world coordinates
    const worldNodeHeight = 135;
    const nodeHeight = worldNodeHeight * viewState.scale;
    const nodeWidth = nodeHeight * 1.6;
    const fontSize = Math.max(10, Math.min(14, 12 * viewState.scale));

    domainNodes.forEach((domain, idx) => {
        const angle = idx * angleStep - Math.PI / 2; // Start from top
        const x = screenX + Math.cos(angle) * radius;
        const y = screenY + Math.sin(angle) * radius;

        const nodeEl = document.createElement('div');
        nodeEl.className = 'domain-network-node';
        nodeEl.textContent = domain.name;
        nodeEl.dataset.domainId = domain.id;
        nodeEl.setAttribute('data-domain-id', domain.id);
        nodeEl.dataset.domainName = domain.name;

        // Oval shape sized in world coordinates
        nodeEl.style.width = `${nodeWidth}px`;
        nodeEl.style.height = `${nodeHeight}px`;
        nodeEl.style.fontSize = `${fontSize}px`;
        nodeEl.style.left = `${x - nodeWidth / 2}px`;
        nodeEl.style.top = `${y - nodeHeight / 2}px`;

        nodeEl.addEventListener('click', (e) => {
            e.stopPropagation();
            showInfo({
                title: domain.name,
                description: domain.description,
                details: domain.details,
                relatedLinks: domain.relatedLinks
            });
        });

        // Ensure touch events work on mobile
        nodeEl.addEventListener('touchend', (e) => {
            e.stopPropagation();
            e.preventDefault();
            showInfo({
                title: domain.name,
                description: domain.description,
                details: domain.details,
                relatedLinks: domain.relatedLinks
            });
        });

        domainNetworkContainer.appendChild(nodeEl);
        domainNetworkNodes.push({
            element: nodeEl,
            x: x,
            y: y,
            name: domain.name,
            id: domain.id
        });
    });

    domainNetworkInitialized = true;
    drawDomainNetwork();
}

function drawDomainNetwork() {
    domainNetworkCtx.clearRect(0, 0, domainNetworkCanvas.width, domainNetworkCanvas.height);

    if (!domainNetworkInitialized || domainNetworkNodes.length === 0) return;

    // Draw arrow from Domains pyramid layer (PINK) to domain network
    const pyramidBounds = getPyramidBounds();

    // IMPORTANT: Use the Domains layer data directly from pyramidData
    const screenX = (viewState.x) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y) * viewState.scale + window.innerHeight / 2;

    // Domains layer is the THIRD layer from the bottom (after Earth and Governance)
    // Its Y position is measured from the BOTTOM of the pyramid
    const domainsData = pyramidData.domains;
    const domainsBottomY = domainsData.y; // Y from bottom of pyramid
    const domainsTopY = domainsData.y + domainsData.height;

    // Connect from BOTTOM of Domains layer to avoid crossing Network Intelligence line
    const domainsConnectionY = domainsBottomY + (domainsTopY - domainsBottomY) * 0.2; // 20% up from bottom

    // Calculate the width of the pyramid at the connection point
    // Progress from bottom (0) to top (1)
    const progressFromBottom = domainsConnectionY / pyramidHeight;
    const domainsWidthAtConnection = pyramidBase * (1 - progressFromBottom);

    // Calculate the LEFT edge X position of Domains layer at connection point
    const domainsLeftX = screenX - (domainsWidthAtConnection / 2) * viewState.scale;

    // Calculate the screen Y position of the connection point
    // Y is measured from the BOTTOM, so we need to convert to screen coordinates
    const domainsConnectionScreenY = screenY + (pyramidHeight / 2) * viewState.scale - domainsConnectionY * viewState.scale;

    // Calculate domain network center (same as in updateDomainNetworkPositions)
    // Position relative to viewState (moves with camera)
    const offsetX = -pyramidBase * 1.1;
    const offsetY = 0;
    const networkCenterX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const networkCenterY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    // Draw arrow line from Domains layer LEFT edge to domain network center
    domainNetworkCtx.strokeStyle = 'rgba(250, 112, 154, 0.7)';
    domainNetworkCtx.lineWidth = Math.max(2, 3 * viewState.scale);
    domainNetworkCtx.setLineDash([8 * viewState.scale, 4 * viewState.scale]);

    domainNetworkCtx.beginPath();
    domainNetworkCtx.moveTo(domainsLeftX, domainsConnectionScreenY);
    domainNetworkCtx.lineTo(networkCenterX, networkCenterY);
    domainNetworkCtx.stroke();

    // Draw arrowhead pointing to domain network
    const arrowLength = 10 * viewState.scale;
    const angle = Math.atan2(networkCenterY - domainsConnectionScreenY, networkCenterX - domainsLeftX);

    domainNetworkCtx.fillStyle = 'rgba(250, 112, 154, 0.7)';
    domainNetworkCtx.beginPath();
    domainNetworkCtx.moveTo(networkCenterX, networkCenterY);
    domainNetworkCtx.lineTo(
        networkCenterX - arrowLength * Math.cos(angle - Math.PI / 6),
        networkCenterY - arrowLength * Math.sin(angle - Math.PI / 6)
    );
    domainNetworkCtx.lineTo(
        networkCenterX - arrowLength * Math.cos(angle + Math.PI / 6),
        networkCenterY - arrowLength * Math.sin(angle + Math.PI / 6)
    );
    domainNetworkCtx.closePath();
    domainNetworkCtx.fill();

    // Draw connections between domains using node positions - MAKE THEM VISIBLE
    domainNetworkCtx.strokeStyle = 'rgba(250, 112, 154, 0.8)'; // Increased opacity
    domainNetworkCtx.lineWidth = Math.max(2, 3 * viewState.scale); // Thicker lines
    domainNetworkCtx.setLineDash([8 * viewState.scale, 4 * viewState.scale]);

    domainConnections.forEach(([fromName, toName]) => {
        const fromNode = domainNetworkNodes.find(n => n.name === fromName);
        const toNode = domainNetworkNodes.find(n => n.name === toName);

        if (fromNode && toNode && fromNode.x !== undefined && fromNode.y !== undefined) {
            domainNetworkCtx.beginPath();
            domainNetworkCtx.moveTo(fromNode.x, fromNode.y);
            domainNetworkCtx.lineTo(toNode.x, toNode.y);
            domainNetworkCtx.stroke();
        }
    });

    domainNetworkCtx.setLineDash([]);
}

// Intersectionality visualization - mesh network with 5 nodes
let intersectionalityNodes = [];
let intersectionalityInitialized = false;

function initializeIntersectionalityNetwork() {
    if (intersectionalityInitialized) return;

    const intersectionalityNodeData = [
        { id: 'cultural-dimensions', name: 'Cultural Dimensions', color: 'rgba(144, 238, 144, 0.9)' },
        { id: 'isms', name: '*Isms', color: 'rgba(255, 255, 0, 0.9)' },
        { id: 'systemic-factors', name: 'Systemic Factors', color: 'rgba(173, 216, 230, 0.9)' },
        { id: 'personal-factors', name: 'Personal Contextual Factors', color: 'rgba(255, 165, 0, 0.9)' },
        { id: 'relationality', name: 'Relationality', color: 'rgba(138, 43, 226, 0.9)' }
    ];

    intersectionalityNodeData.forEach((nodeData) => {
        const nodeEl = document.createElement('div');
        nodeEl.className = 'intersectionality-node';
        // Set text with line break for "Personal Contextual Factors" to force two lines
        if (nodeData.id === 'personal-factors') {
            nodeEl.innerHTML = 'Personal Contextual<br>Factors';
        } else {
            nodeEl.textContent = nodeData.name;
        }
        nodeEl.dataset.nodeId = nodeData.id;
        nodeEl.style.backgroundColor = nodeData.color;
        intersectionalityContainer.appendChild(nodeEl);
        intersectionalityNodes.push({
            element: nodeEl,
            name: nodeData.name,
            id: nodeData.id,
            x: 0,
            y: 0
        });
    });

    intersectionalityInitialized = true;
}

function updateIntersectionalityPositions() {
    if (!intersectionalityInitialized || intersectionalityNodes.length === 0) return;

    // Position intersectionality network relative to viewState (moves with camera like pyramid)
    // Position to the LEFT of the pyramid, above the domain network
    const offsetX = -pyramidBase * 0.5; // Left of pyramid center
    const offsetY = -pyramidHeight * 0.3; // Higher up (closer to People layer)

    // Calculate screen position using viewState
    const screenX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    // Radius for circular layout - increased for better spacing
    const worldRadius = 240;
    const radius = worldRadius * viewState.scale;
    const angleStep = (Math.PI * 2) / intersectionalityNodes.length;

    // Node size - increased to fit all text
    const worldNodeHeight = 130;
    const nodeHeight = worldNodeHeight * viewState.scale;
    const nodeWidth = nodeHeight * 2.2; // Wider for longer text like "Personal Contextual Factors"
    const baseFontSize = 12 * viewState.scale;
    const fontSize = Math.max(10, Math.min(14, baseFontSize));

    intersectionalityNodes.forEach((node, idx) => {
        if (!node.element) return;

        const angle = idx * angleStep - Math.PI / 2; // Start from top
        const x = screenX + Math.cos(angle) * radius;
        const y = screenY + Math.sin(angle) * radius;

        // Set font size - Cultural Dimensions needs 9px at 100% view (scale 0.35)
        let nodeFontSize = fontSize;
        if (node.id === 'cultural-dimensions') {
            // At 100% view, scale = 0.35, we want 9px
            // So: 9 = baseSize * 0.35, baseSize = 9 / 0.35 = 25.7
            const culturalBaseSize = 25.7;
            nodeFontSize = Math.max(8, Math.min(12, culturalBaseSize * viewState.scale));
        }

        // Allow "Personal Contextual Factors" to wrap to two lines (same size shape)
        if (node.id === 'personal-factors') {
            node.element.classList.add('two-lines');
            node.element.classList.remove('single-line');
        } else {
            node.element.classList.add('single-line');
            node.element.classList.remove('two-lines');
        }

        node.element.style.width = `${nodeWidth}px`;
        node.element.style.height = `${nodeHeight}px`;
        node.element.style.fontSize = `${nodeFontSize}px`;
        node.element.style.left = `${x - nodeWidth / 2}px`;
        node.element.style.top = `${y - nodeHeight / 2}px`;

        node.x = x;
        node.y = y;
    });

    // Store center for click detection
    window.intersectionalityCenter = { x: screenX, y: screenY, radius: radius * 1.3 };
}

function drawIntersectionalityVisualization() {
    if (!intersectionalityCanvas || !intersectionalityCtx || !pyramidData || !pyramidData.people) return;

    intersectionalityCtx.clearRect(0, 0, intersectionalityCanvas.width, intersectionalityCanvas.height);

    if (!intersectionalityInitialized || intersectionalityNodes.length === 0) return;

    // Calculate positions (same as updateIntersectionalityPositions)
    const offsetX = -pyramidBase * 0.5;
    const offsetY = -pyramidHeight * 0.3; // Higher up (closer to People layer)
    const screenX = (viewState.x) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y) * viewState.scale + window.innerHeight / 2;
    const networkCenterX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const networkCenterY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    // Draw mesh connections between all nodes
    intersectionalityCtx.strokeStyle = 'rgba(138, 43, 226, 0.6)'; // Purple to match People layer
    intersectionalityCtx.lineWidth = Math.max(1.5, 2 * viewState.scale);
    intersectionalityCtx.setLineDash([6 * viewState.scale, 3 * viewState.scale]);

    // Connect all nodes to each other (full mesh)
    for (let i = 0; i < intersectionalityNodes.length; i++) {
        for (let j = i + 1; j < intersectionalityNodes.length; j++) {
            const fromNode = intersectionalityNodes[i];
            const toNode = intersectionalityNodes[j];

            if (fromNode.x !== undefined && fromNode.y !== undefined &&
                toNode.x !== undefined && toNode.y !== undefined) {
                intersectionalityCtx.beginPath();
                intersectionalityCtx.moveTo(fromNode.x, fromNode.y);
                intersectionalityCtx.lineTo(toNode.x, toNode.y);
                intersectionalityCtx.stroke();
            }
        }
    }
    intersectionalityCtx.setLineDash([]);

    // Draw connecting line from People layer LEFT edge to intersectionality network
    const peopleData = pyramidData.people;
    const peopleLeftX = screenX - (pyramidBase * (1 - ((peopleData.y + peopleData.height) / pyramidHeight)) / 2) * viewState.scale;
    const peopleConnectionY = screenY - (pyramidHeight / 2) * viewState.scale + (pyramidHeight - (peopleData.y + peopleData.height * 0.3)) * viewState.scale; // 30% up from bottom of People layer

    intersectionalityCtx.strokeStyle = 'rgba(138, 43, 226, 0.7)'; // Purple to match People layer
    intersectionalityCtx.lineWidth = Math.max(2, 2.5 * viewState.scale);
    intersectionalityCtx.setLineDash([6 * viewState.scale, 3 * viewState.scale]);

    intersectionalityCtx.beginPath();
    intersectionalityCtx.moveTo(peopleLeftX, peopleConnectionY);
    intersectionalityCtx.lineTo(networkCenterX, networkCenterY);
    intersectionalityCtx.stroke();

    // Draw arrowhead
    const angle = Math.atan2(networkCenterY - peopleConnectionY, networkCenterX - peopleLeftX);
    const arrowLength = 8 * viewState.scale;
    intersectionalityCtx.fillStyle = 'rgba(138, 43, 226, 0.7)';
    intersectionalityCtx.beginPath();
    intersectionalityCtx.moveTo(networkCenterX, networkCenterY);
    intersectionalityCtx.lineTo(
        networkCenterX - arrowLength * Math.cos(angle - Math.PI / 6),
        networkCenterY - arrowLength * Math.sin(angle - Math.PI / 6)
    );
    intersectionalityCtx.lineTo(
        networkCenterX - arrowLength * Math.cos(angle + Math.PI / 6),
        networkCenterY - arrowLength * Math.sin(angle + Math.PI / 6)
    );
    intersectionalityCtx.closePath();
    intersectionalityCtx.fill();
    intersectionalityCtx.setLineDash([]);
}

function updateDomainNetworkPositions() {
    if (!domainNetworkInitialized || domainNetworkNodes.length === 0) return;

    // Position domain network relative to viewState (moves with camera like pyramid)
    // Domain network is offset to the LEFT of the pyramid center
    const offsetX = -pyramidBase * 1.1; // Offset further to the left of pyramid
    const offsetY = 0; // Same vertical center as pyramid

    // Calculate screen position using viewState (same as pyramid positioning)
    const screenX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    // Radius in world coordinates - will be scaled by viewState when rendered
    const worldRadius = 330; // Larger circle to prevent button overlap
    const radius = worldRadius * viewState.scale;
    const angleStep = (Math.PI * 2) / domainNodes.length;

    // Node size in world coordinates - scales naturally with viewState
    const worldNodeHeight = 135; // Medium size - readable but not oversized
    const nodeHeight = worldNodeHeight * viewState.scale;
    const nodeWidth = nodeHeight * 1.6; // Oval shape (1.6 aspect ratio)
    const fontSize = Math.max(10, Math.min(14, 12 * viewState.scale));

    domainNetworkNodes.forEach((node, idx) => {
        if (!node.element) return;

        const angle = idx * angleStep - Math.PI / 2;
        const x = screenX + Math.cos(angle) * radius;
        const y = screenY + Math.sin(angle) * radius;

        // All domains same size - oval shape, moves with camera
        node.element.style.width = `${nodeWidth}px`;
        node.element.style.height = `${nodeHeight}px`;
        node.element.style.fontSize = `${fontSize}px`;
        node.element.style.left = `${x - nodeWidth / 2}px`;
        node.element.style.top = `${y - nodeHeight / 2}px`;

        node.x = x;
        node.y = y;
    });

    // Redraw connections after updating positions
    setTimeout(() => drawDomainNetwork(), 0);
}

// Vortical Progression visualization - 3D animated line
let vorticalAnimationFrame = 0;
let vorticalAnimationSpeed = 0.5;
let vorticalProgressionInitialized = false;
let animationId = null;

function initializeVorticalProgression() {
    if (vorticalProgressionInitialized) return;
    // No DOM nodes needed - just canvas animation
    vorticalProgressionInitialized = true;
    animateVorticalProgression();
}

function animateVorticalProgression() {
    if (vorticalProgressionInitialized) {
        vorticalAnimationFrame += vorticalAnimationSpeed;
        drawVorticalProgression();
        animationId = requestAnimationFrame(animateVorticalProgression);
    }
}

function updateVorticalProgressionPositions() {
    // No DOM nodes to update - just redraw
    drawVorticalProgression();
}

function drawVorticalProgression() {
    if (!vorticalProgressionCanvas || !vorticalProgressionCtx) return;

    vorticalProgressionCtx.clearRect(0, 0, vorticalProgressionCanvas.width, vorticalProgressionCanvas.height);

    if (!vorticalProgressionInitialized) return;

    // Position to the right of pyramid - small grid view
    const offsetX = pyramidBase * 1.1;
    const offsetY = 0;
    const gridWidth = 350 * viewState.scale;
    const gridHeight = 350 * viewState.scale;

    const screenX = (viewState.x + offsetX) * viewState.scale + window.innerWidth / 2;
    const screenY = (viewState.y + offsetY) * viewState.scale + window.innerHeight / 2;

    // Draw 3D cube grid background
    // Calculate maximum extent of vortical line to ensure grid encapsulates it
    // Make the cube grid even - same size for all dimensions
    const gridSize = 7; // Same size for X, Y, and Z to make a perfect cube

    // Scale factors for each dimension - use same scale for perfect cube
    const cubeScale = Math.min(gridWidth, gridHeight) / (gridSize * 2.5);
    const scaleX = cubeScale;
    const scaleY = cubeScale;
    const scaleZ = cubeScale;

    vorticalProgressionCtx.strokeStyle = 'rgba(255, 140, 0, 0.2)';
    vorticalProgressionCtx.lineWidth = Math.max(0.5, 1 * viewState.scale);

    // Grid boundaries (upright rectangle for the front face)
    const gridLeft = screenX - gridWidth / 2;
    const gridRight = screenX + gridWidth / 2;
    const gridTop = screenY - gridHeight / 2;
    const gridBottom = screenY + gridHeight / 2;

    // Main diagonal goes from bottom-left to top-right (for the vortical line)
    const gridStartX = gridLeft;   // Left
    const gridStartY = gridBottom; // Bottom
    const gridEndX = gridRight;    // Right
    const gridEndY = gridTop;      // Top

    const diagonalAngle = Math.atan2(gridEndY - gridStartY, gridEndX - gridStartX); // Angle of main diagonal
    const perpAngle = diagonalAngle + Math.PI / 2; // Perpendicular angle for X/Z dimensions

    // Standard isometric projection parameters
    // Isometric view: 30 degrees rotation, equal foreshortening
    const isoAngle = Math.PI / 6; // 30 degrees

    // Helper function to project 3D point to 2D (standard isometric)
    // x3d: X axis (height), y3d: Y axis (longer width/time), z3d: Z axis (other width)
    function project3D(x3d, y3d, z3d) {
        // Standard isometric projection formula with different scales for each dimension
        // x' = (x - z) * cos(30°)
        // y' = y + (x + z) * sin(30°)
        const isoX = (x3d * scaleX - z3d * scaleZ) * Math.cos(isoAngle);
        const isoY = y3d * scaleY + (x3d * scaleX + z3d * scaleZ) * Math.sin(isoAngle);

        return {
            x: screenX + isoX,
            y: screenY - isoY // Flip Y for screen coordinates
        };
    }

    // Draw grid lines along X axis (height lines, varying Y and Z)
    // X is the height dimension
    for (let y = -gridSize; y <= gridSize; y += 1) {
        for (let z = -gridSize; z <= gridSize; z += 1) {
            const start = project3D(-gridSize, y, z);
            const end = project3D(gridSize, y, z);
            vorticalProgressionCtx.beginPath();
            vorticalProgressionCtx.moveTo(start.x, start.y);
            vorticalProgressionCtx.lineTo(end.x, end.y);
            vorticalProgressionCtx.stroke();
        }
    }

    // Draw grid lines along Y axis (time lines, varying X and Z)
    for (let x = -gridSize; x <= gridSize; x += 1) {
        for (let z = -gridSize; z <= gridSize; z += 1) {
            const start = project3D(x, -gridSize, z);
            const end = project3D(x, gridSize, z);
            vorticalProgressionCtx.beginPath();
            vorticalProgressionCtx.moveTo(start.x, start.y);
            vorticalProgressionCtx.lineTo(end.x, end.y);
            vorticalProgressionCtx.stroke();
        }
    }

    // Draw grid lines along Z axis (depth lines, varying X and Y)
    for (let x = -gridSize; x <= gridSize; x += 1) {
        for (let y = -gridSize; y <= gridSize; y += 1) {
            const start = project3D(x, y, -gridSize);
            const end = project3D(x, y, gridSize);
            vorticalProgressionCtx.beginPath();
            vorticalProgressionCtx.moveTo(start.x, start.y);
            vorticalProgressionCtx.lineTo(end.x, end.y);
            vorticalProgressionCtx.stroke();
        }
    }

    // Draw 3D vortical line - diagonal from lower-left-back to upper-right-front
    const timeSteps = 300; // Number of points along the spiral
    const timeRange = vorticalAnimationFrame * 0.01; // Current time position (for animation)

    vorticalProgressionCtx.strokeStyle = 'rgba(255, 140, 0, 0.9)';
    vorticalProgressionCtx.lineWidth = Math.max(2, 3 * viewState.scale);

    // Draw the vortical line diagonally through the cube
    vorticalProgressionCtx.beginPath();

    for (let i = 0; i < timeSteps; i++) {
        const t = (i / timeSteps) * Math.PI * 6 + timeRange; // Time parameter for spiral

        // Progress diagonally: lower-left-back (-gridSize, -gridSize, gridSize) to upper-right-front (gridSize, gridSize, -gridSize)
        const progress = i / timeSteps;

        // Main diagonal progression
        const x3d_base = -gridSize + (gridSize * 2) * progress; // X: bottom to top
        const y3d = -gridSize + (gridSize * 2) * progress; // Y (Time): left to right
        const z3d_base = gridSize - (gridSize * 2) * progress; // Z: back to front (gridSize to -gridSize)

        // Add spiral variation around the main diagonal
        const spiralRadius = 0.8; // Small spiral around the diagonal
        const spiralAngle = t * 0.8;

        const x3d = x3d_base + Math.cos(spiralAngle) * spiralRadius;
        const z3d = z3d_base + Math.sin(spiralAngle) * spiralRadius;

        // Project 3D to 2D using the same projection as the grid
        const projected = project3D(x3d, y3d, z3d);

        if (i === 0) {
            vorticalProgressionCtx.moveTo(projected.x, projected.y);
        } else {
            vorticalProgressionCtx.lineTo(projected.x, projected.y);
        }
    }

    vorticalProgressionCtx.stroke();

    // Draw current position indicator (the "now" point)
    const currentT = ((timeSteps - 1) / timeSteps) * Math.PI * 6 + timeRange;
    const currentProgress = (timeSteps - 1) / timeSteps;
    const currentX3d_base = -gridSize + (gridSize * 2) * currentProgress;
    const currentY3d = -gridSize + (gridSize * 2) * currentProgress;
    const currentZ3d_base = gridSize - (gridSize * 2) * currentProgress;
    const currentSpiralRadius = 0.8;
    const currentSpiralAngle = currentT * 0.8;
    const currentX3d = currentX3d_base + Math.cos(currentSpiralAngle) * currentSpiralRadius;
    const currentZ3d = currentZ3d_base + Math.sin(currentSpiralAngle) * currentSpiralRadius;
    const currentProj = project3D(currentX3d, currentY3d, currentZ3d);
    const currentProjX = currentProj.x;
    const currentProjY = currentProj.y;

    // Draw current position as a glowing point
    const gradient = vorticalProgressionCtx.createRadialGradient(
        currentProjX, currentProjY, 0,
        currentProjX, currentProjY, 8 * viewState.scale
    );
    gradient.addColorStop(0, 'rgba(255, 140, 0, 1)');
    gradient.addColorStop(0.5, 'rgba(255, 140, 0, 0.6)');
    gradient.addColorStop(1, 'rgba(255, 140, 0, 0)');

    vorticalProgressionCtx.fillStyle = gradient;
    vorticalProgressionCtx.beginPath();
    vorticalProgressionCtx.arc(currentProjX, currentProjY, 8 * viewState.scale, 0, Math.PI * 2);
    vorticalProgressionCtx.fill();

    // Draw solid center point
    vorticalProgressionCtx.fillStyle = 'rgba(255, 140, 0, 1)';
    vorticalProgressionCtx.beginPath();
    vorticalProgressionCtx.arc(currentProjX, currentProjY, 4 * viewState.scale, 0, Math.PI * 2);
    vorticalProgressionCtx.fill();

    // Draw axis labels with arrows - matching user's sketch
    const fontSize = Math.max(14, 16 * viewState.scale); // Larger font
    const arrowSize = 25 * viewState.scale; // Much larger arrows
    const labelOffset = 60 * viewState.scale;
    vorticalProgressionCtx.fillStyle = 'rgba(255, 140, 0, 1)'; // Orange
    vorticalProgressionCtx.strokeStyle = 'rgba(255, 140, 0, 1)'; // Orange
    vorticalProgressionCtx.lineWidth = Math.max(5, 6 * viewState.scale); // Thicker lines
    vorticalProgressionCtx.font = `bold ${fontSize}px sans-serif`;
    vorticalProgressionCtx.textAlign = 'center';
    vorticalProgressionCtx.textBaseline = 'middle';

    // Helper function to draw a large arrow
    function drawArrow(x, y, angle, length) {
        vorticalProgressionCtx.save();
        vorticalProgressionCtx.translate(x, y);
        vorticalProgressionCtx.rotate(angle);
        // Draw arrow shaft - much thicker
        vorticalProgressionCtx.beginPath();
        vorticalProgressionCtx.moveTo(0, 0);
        vorticalProgressionCtx.lineTo(length, 0);
        vorticalProgressionCtx.stroke();
        // Arrowhead - much larger
        const headSize = arrowSize * 1.2;
        vorticalProgressionCtx.beginPath();
        vorticalProgressionCtx.moveTo(length, 0);
        vorticalProgressionCtx.lineTo(length - headSize, -headSize * 0.6);
        vorticalProgressionCtx.lineTo(length - headSize, headSize * 0.6);
        vorticalProgressionCtx.closePath();
        vorticalProgressionCtx.fill();
        vorticalProgressionCtx.restore();
    }

    // X axis label - far right side with large upward arrow
    const xLabelX = screenX + gridWidth * 0.65;
    const xLabelY = screenY - gridHeight * 0.1; // Move X higher to give Y more space
    vorticalProgressionCtx.fillText('X', xLabelX, xLabelY);
    // Large arrow pointing straight up
    drawArrow(xLabelX, xLabelY - 20 * viewState.scale, -Math.PI / 2, arrowSize * 3);

    // Y axis label (Time) - bottom right, pushed much further right and lower to avoid overlap
    const yLabelX = screenX + gridWidth * 1.1;
    const yLabelY = screenY + gridHeight * 0.8;
    vorticalProgressionCtx.fillText('Y (Time)', yLabelX, yLabelY);
    // Large arrow pointing diagonally UP and to the RIGHT, starting much further from label to avoid overlap
    // Arrow starts well below and to the left of the label
    drawArrow(yLabelX - 150 * viewState.scale, yLabelY + 50 * viewState.scale, -Math.PI / 6, arrowSize * 3.5);

    // Z axis label - bottom left, pushed further left and lower
    const zLabelX = screenX - gridWidth * 0.75;
    const zLabelY = screenY + gridHeight * 0.75;
    vorticalProgressionCtx.fillText('Z', zLabelX, zLabelY);
    // Large arrow pointing diagonally UP and to the LEFT
    drawArrow(zLabelX + 80 * viewState.scale, zLabelY + 10 * viewState.scale, -Math.PI + Math.PI / 6, arrowSize * 3.5);
}

// Pan and zoom
let isDragging = false;
let lastMouseX = 0;
let lastMouseY = 0;

container.addEventListener('mousedown', (e) => {
    // Don't interfere with buttons or interactive elements
    if (e.target.tagName === 'BUTTON' ||
        e.target.classList.contains('info-link') ||
        e.target.closest('.info-panel') ||
        e.target.closest('.zoom-controls') ||
        e.target.closest('.controls') ||
        e.target.closest('.domain-network-node') ||
        e.target.closest('.intersectionality-node') ||
        e.target.closest('.vortical-phase-node') ||
        e.target.closest('.network-intelligence-btn') ||
        e.target.closest('.civicism-btn') ||
        e.target.closest('.vortical-progression-btn')) {
        return;
    }

    // Allow panning on canvas, container, or pyramid layers
    if (e.target === canvas || e.target === container || e.target.classList.contains('pyramid-layer')) {
        isDragging = true;
        container.classList.add('dragging');
        lastMouseX = e.clientX;
        lastMouseY = e.clientY;
    }
});

container.addEventListener('mousemove', (e) => {
    if (isDragging) {
        const deltaX = e.clientX - lastMouseX;
        const deltaY = e.clientY - lastMouseY;
        viewState.x += deltaX / viewState.scale;
        viewState.y += deltaY / viewState.scale;
        lastMouseX = e.clientX;
        lastMouseY = e.clientY;
        updatePyramidPositions();
    }
});

container.addEventListener('mouseup', () => {
    isDragging = false;
    container.classList.remove('dragging');
});

container.addEventListener('mouseleave', () => {
    isDragging = false;
    container.classList.remove('dragging');
});

// Zoom with mouse wheel
container.addEventListener('wheel', (e) => {
    e.preventDefault();
    const delta = e.deltaY > 0 ? 0.9 : 1.1;
    const newScale = Math.max(viewState.minScale, Math.min(viewState.maxScale, viewState.scale * delta));

    const mouseX = e.clientX;
    const mouseY = e.clientY;
    const worldX = (mouseX - window.innerWidth / 2) / viewState.scale - viewState.x;
    const worldY = (mouseY - window.innerHeight / 2) / viewState.scale - viewState.y;

    viewState.scale = newScale;
    viewState.x = (mouseX - window.innerWidth / 2) / viewState.scale - worldX;
    viewState.y = (mouseY - window.innerHeight / 2) / viewState.scale - worldY;

    updatePyramidPositions();
});

// Touch event handlers for mobile
let touchStartDistance = 0;
let touchStartScale = 0;
let touchStartX = 0;
let touchStartY = 0;
let lastTouchX = 0;
let lastTouchY = 0;
let isPinching = false;

function getTouchDistance(touches) {
    const dx = touches[0].clientX - touches[1].clientX;
    const dy = touches[0].clientY - touches[1].clientY;
    return Math.sqrt(dx * dx + dy * dy);
}

function getTouchCenter(touches) {
    return {
        x: (touches[0].clientX + touches[1].clientX) / 2,
        y: (touches[0].clientY + touches[1].clientY) / 2
    };
}

container.addEventListener('touchstart', (e) => {
    // Don't interfere with buttons or interactive elements
    if (e.target.tagName === 'BUTTON' ||
        e.target.classList.contains('info-link') ||
        e.target.closest('.info-panel') ||
        e.target.closest('.zoom-controls') ||
        e.target.closest('.controls') ||
        e.target.closest('.vortical-progression-btn') ||
        e.target.closest('.vortical-phase-node')) {
        return;
    }

    if (e.touches.length === 1) {
        // Single touch - pan
        isDragging = true;
        container.classList.add('dragging');
        lastTouchX = e.touches[0].clientX;
        lastTouchY = e.touches[0].clientY;
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
    } else if (e.touches.length === 2) {
        // Two touches - pinch to zoom
        e.preventDefault();
        isPinching = true;
        isDragging = false;
        touchStartDistance = getTouchDistance(e.touches);
        touchStartScale = viewState.scale;
        const center = getTouchCenter(e.touches);
        touchStartX = center.x;
        touchStartY = center.y;
    }
}, { passive: false });

container.addEventListener('touchmove', (e) => {
    if (e.touches.length === 1 && isDragging && !isPinching) {
        // Single touch pan
        e.preventDefault();
        const deltaX = e.touches[0].clientX - lastTouchX;
        const deltaY = e.touches[0].clientY - lastTouchY;
        viewState.x += deltaX / viewState.scale;
        viewState.y += deltaY / viewState.scale;
        lastTouchX = e.touches[0].clientX;
        lastTouchY = e.touches[0].clientY;
        updatePyramidPositions();
    } else if (e.touches.length === 2 && isPinching) {
        // Pinch to zoom
        e.preventDefault();
        const currentDistance = getTouchDistance(e.touches);
        const scaleRatio = currentDistance / touchStartDistance;
        const newScale = Math.max(
            viewState.minScale,
            Math.min(viewState.maxScale, touchStartScale * scaleRatio)
        );

        const center = getTouchCenter(e.touches);
        const worldX = (center.x - window.innerWidth / 2) / touchStartScale - viewState.x;
        const worldY = (center.y - window.innerHeight / 2) / touchStartScale - viewState.y;

        viewState.scale = newScale;
        viewState.x = (center.x - window.innerWidth / 2) / viewState.scale - worldX;
        viewState.y = (center.y - window.innerHeight / 2) / viewState.scale - worldY;

        updatePyramidPositions();
    }
}, { passive: false });

container.addEventListener('touchend', (e) => {
    if (e.touches.length === 0) {
        // All touches ended
        isDragging = false;
        isPinching = false;
        container.classList.remove('dragging');
    } else if (e.touches.length === 1) {
        // One touch remaining - switch to pan mode
        isPinching = false;
        isDragging = true;
        lastTouchX = e.touches[0].clientX;
        lastTouchY = e.touches[0].clientY;
    }
});

container.addEventListener('touchcancel', () => {
    isDragging = false;
    isPinching = false;
    container.classList.remove('dragging');
});

// Prevent double-tap zoom on mobile (only on canvas/container, not interactive elements)
let lastTap = 0;
container.addEventListener('touchend', (e) => {
    // Only prevent if tapping on canvas/container itself, not buttons or interactive elements
    if (e.target === canvas || e.target === container || e.target.classList.contains('pyramid-layer')) {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - lastTap;
        if (tapLength < 300 && tapLength > 0 && e.touches.length === 0 && !isDragging && !isPinching) {
            e.preventDefault();
            // Could add double-tap zoom here if desired
        }
        lastTap = currentTime;
    }
}, { passive: false });

// Info panel with interactive links
function showInfo(data) {
    let linksHTML = '';
    if (data.relatedLinks && data.relatedLinks.length > 0) {
        linksHTML = '<div class="info-links"><h3>Related:</h3><ul>';
        data.relatedLinks.forEach(link => {
            linksHTML += `<li><a href="#" class="info-link" data-action="${link.action}" data-target="${link.target}">${link.text}</a></li>`;
        });
        linksHTML += '</ul></div>';
    }

    infoContent.innerHTML = `
        <h2>${data.title}</h2>
        <p class="info-description">${data.description}</p>
        <p class="info-details">${data.details}</p>
        ${linksHTML}
    `;

    // Add click handlers for links
    infoContent.querySelectorAll('.info-link').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const action = link.dataset.action;
            const target = link.dataset.target;
            handleInfoLink(action, target);
        });
    });

    infoPanel.classList.add('active');
}

function handleInfoLink(action, target) {
    if (action === 'focus') {
        // Focus on pyramid layer
        if (target === 'people') {
            zoomToPeople();
            setTimeout(() => {
                showInfo({
                    title: pyramidData.people.title,
                    description: pyramidData.people.description,
                    details: pyramidData.people.details,
                    relatedLinks: pyramidData.people.relatedLinks
                });
            }, 500);
        } else if (target === 'domains') {
            zoomToDomains();
            setTimeout(() => {
                showInfo({
                    title: pyramidData.domains.title,
                    description: pyramidData.domains.description,
                    details: pyramidData.domains.details,
                    relatedLinks: pyramidData.domains.relatedLinks
                });
            }, 500);
        } else if (target === 'governance') {
            zoomToGovernance();
            setTimeout(() => {
                showInfo({
                    title: pyramidData.governance.title,
                    description: pyramidData.governance.description,
                    details: pyramidData.governance.details,
                    relatedLinks: pyramidData.governance.relatedLinks
                });
            }, 500);
        } else if (target === 'earth') {
            zoomToEarth();
            setTimeout(() => {
                showInfo({
                    title: pyramidData.earth.title,
                    description: pyramidData.earth.description,
                    details: pyramidData.earth.details,
                    relatedLinks: pyramidData.earth.relatedLinks
                });
            }, 500);
        } else if (target === 'network') {
            zoomToNetwork();
            setTimeout(() => {
                showInfo({
                    title: networkData.title,
                    description: networkData.description,
                    details: networkData.details
                });
            }, 500);
        } else if (target === 'domains-network') {
            focusOnDomainsNetwork();
        } else if (target === 'intersectionality') {
            focusOnIntersectionality();
        } else if (target === 'vortical-progression') {
            focusOnVorticalProgression();
        } else if (target === 'civicism') {
            showCivicismInfo();
        }
    } else if (action === 'domain') {
        // Focus on domain node
        const domain = domainNodes.find(d => d.id === target);
        if (domain) {
            // Find the domain node element and focus on it
            const domainNode = domainNetworkNodes.find(n => n.id === target);
            if (domainNode && domainNode.element) {
                // Calculate position to center on domain
                const rect = domainNode.element.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;

                // Convert screen coordinates to world coordinates
                const worldX = (centerX - window.innerWidth / 2) / viewState.scale - viewState.x;
                const worldY = (centerY - window.innerHeight / 2) / viewState.scale - viewState.y;

                // Animate to domain
                animateToPosition(worldX, worldY, 1.5);

                // Show domain info
                setTimeout(() => {
                    showInfo({
                        title: domain.name,
                        description: domain.description,
                        details: domain.details,
                        relatedLinks: domain.relatedLinks
                    });
                }, 500);
            }
        }
    } else if (action === 'intersectionality') {
        // Show intersectionality section info
        const sectionData = intersectionalitySections[target];
        if (sectionData) {
            showInfo({
                title: sectionData.title,
                description: sectionData.description,
                details: sectionData.details,
                relatedLinks: sectionData.relatedLinks
            });
        }
    }
}

function animateToPosition(targetX, targetY, targetScale) {
    const startX = viewState.x;
    const startY = viewState.y;
    const startScale = viewState.scale;
    const duration = 800;
    const startTime = Date.now();

    function animate() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const ease = 1 - Math.pow(1 - progress, 3); // Ease out cubic

        viewState.x = startX + (targetX - startX) * ease;
        viewState.y = startY + (targetY - startY) * ease;
        viewState.scale = startScale + (targetScale - startScale) * ease;

        updatePyramidPositions();
        drawIntersectionalityVisualization();

        if (progress < 1) {
            requestAnimationFrame(animate);
        }
    }

    animate();
}

function closeInfoPanel() {
    infoPanel.classList.remove('active');
}

// Zoom indicator
function updateZoomIndicator() {
    // Convert scale to percentage: 0.35 scale = 100%
    const zoomPercent = Math.round(viewState.scale / 0.0035);
    zoomIndicator.textContent = `Zoom: ${zoomPercent}%`;

    // Update slider if it exists
    const slider = document.getElementById('zoom-slider');
    if (slider) {
        slider.value = zoomPercent;
    }
}

// Zoom functions
function zoomIn() {
    const newScale = Math.min(viewState.scale * 1.2, viewState.maxScale);
    setZoom(newScale);
}

function zoomOut() {
    const newScale = Math.max(viewState.scale / 1.2, viewState.minScale);
    setZoom(newScale);
}

function setZoom(scale) {
    viewState.scale = scale;
    updatePyramidPositions();
    updateZoomIndicator();
}

function setZoomFromSlider(value) {
    // Convert slider value to scale: 100% on slider = 0.35 scale (full view)
    const scale = value * 0.0035;
    setZoom(scale);
}

// Focus functions
function toggleFocusMenu() {
    const menu = document.getElementById('focus-menu');
    const toggle = document.getElementById('focus-menu-toggle');
    if (menu && toggle) {
        menu.classList.toggle('active');
        toggle.classList.toggle('active');
    }
}

// Close focus menu when clicking outside
document.addEventListener('click', (e) => {
    const menu = document.getElementById('focus-menu');
    const toggle = document.getElementById('focus-menu-toggle');
    if (menu && toggle && !menu.contains(e.target) && !toggle.contains(e.target)) {
        menu.classList.remove('active');
        toggle.classList.remove('active');
    }
});

function resetView() {
    viewState.x = 0;
    viewState.y = 0;
    viewState.scale = 0.35;
    updatePyramidPositions();
}

function zoomToPeople() {
    animateToLayer(pyramidData.people, 1.2);
    setTimeout(() => {
        showInfo({
            title: pyramidData.people.title,
            description: pyramidData.people.description,
            details: pyramidData.people.details,
            relatedLinks: pyramidData.people.relatedLinks
        });
    }, 900);
}

function zoomToDomains() {
    animateToLayer(pyramidData.domains, 1.0);
    setTimeout(() => {
        showInfo({
            title: pyramidData.domains.title,
            description: pyramidData.domains.description,
            details: pyramidData.domains.details,
            relatedLinks: pyramidData.domains.relatedLinks
        });
    }, 900);
}

function zoomToGovernance() {
    animateToLayer(pyramidData.governance, 1.0);
    setTimeout(() => {
        showInfo({
            title: pyramidData.governance.title,
            description: pyramidData.governance.description,
            details: pyramidData.governance.details,
            relatedLinks: pyramidData.governance.relatedLinks
        });
    }, 900);
}

function zoomToEarth() {
    animateToLayer(pyramidData.earth, 1.2);
    setTimeout(() => {
        showInfo({
            title: pyramidData.earth.title,
            description: pyramidData.earth.description,
            details: pyramidData.earth.details,
            relatedLinks: pyramidData.earth.relatedLinks
        });
    }, 900);
}

function zoomToNetwork() {
    viewState.x = 0;
    viewState.y = 0;
    viewState.scale = 0.4165; // 119% zoom (119 * 0.0035)
    updatePyramidPositions();
}

// Just show info panel for Network Intelligence (for clicking the button on the map)
function showNetworkIntelligenceInfo() {
    showInfo({
        title: networkData.title,
        description: networkData.description,
        details: networkData.details,
        relatedLinks: [
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' },
            { text: 'Governance', action: 'focus', target: 'governance' },
            { text: 'Earth', action: 'focus', target: 'earth' },
            { text: 'View All Domains', action: 'focus', target: 'domains-network' }
        ]
    });
}

// Show Civicism info panel
function showCivicismInfo() {
    showInfo({
        title: civicismData.title,
        description: civicismData.description,
        details: civicismData.details,
        relatedLinks: civicismData.relatedLinks
    });
}

// Focus on Network Intelligence (for the "Focus: Network Intelligence" button)
function focusOnNetworkIntelligence() {
    zoomToNetwork();
    setTimeout(() => {
        showInfo({
            title: networkData.title,
            description: networkData.description,
            details: networkData.details,
            relatedLinks: [
                { text: 'People', action: 'focus', target: 'people' },
                { text: 'Domains', action: 'focus', target: 'domains' },
                { text: 'Governance', action: 'focus', target: 'governance' },
                { text: 'Earth', action: 'focus', target: 'earth' },
                { text: 'View All Domains', action: 'focus', target: 'domains-network' }
            ]
        });
    }, 500);
}

// Focus on Identity (for the "Focus: Identity" button)
function focusOnIntersectionality() {
    // Animate to center the identity/intersectionality network in the view
    // Identity network is positioned at offsetX = -pyramidBase * 0.5, offsetY = -pyramidHeight * 0.3
    // To center it on screen, we need viewState.x = -offsetX and viewState.y = -offsetY
    const targetScale = 0.65; // Good zoom level for viewing the mesh
    const targetX = pyramidBase * 0.5; // Opposite of offsetX to center the network
    const targetY = pyramidHeight * 0.3; // Opposite of offsetY to center the network

    const startX = viewState.x;
    const startY = viewState.y;
    const startScale = viewState.scale;

    const duration = 800;
    const startTime = Date.now();

    function animate() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const ease = 1 - Math.pow(1 - progress, 3); // Ease out cubic

        viewState.x = startX + (targetX - startX) * ease;
        viewState.y = startY + (targetY - startY) * ease;
        viewState.scale = startScale + (targetScale - startScale) * ease;

        updatePyramidPositions();
        drawIntersectionalityVisualization();

        if (progress < 1) {
            requestAnimationFrame(animate);
        }
        // No info panel - just like focusOnDomainsNetwork
    }

    animate();
}

function focusOnDomainsNetwork() {
    // Animate to center the domain network in the view
    // Domain network is positioned to the left of the pyramid
    // To center it, we need to shift the view RIGHT (positive X)
    const targetScale = 0.6; // Good zoom level for viewing the mesh
    const targetX = pyramidBase * 0.9; // Shift view right to center the domain network
    const targetY = 0; // Same vertical center as pyramid

    const startX = viewState.x;
    const startY = viewState.y;
    const startScale = viewState.scale;

    const duration = 800;
    const startTime = Date.now();

    function animate() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const ease = 1 - Math.pow(1 - progress, 3);

        viewState.x = startX + (targetX - startX) * ease;
        viewState.y = startY + (targetY - startY) * ease;
        viewState.scale = startScale + (targetScale - startScale) * ease;

        updatePyramidPositions();
        drawIntersectionalityVisualization();

        if (progress < 1) {
            requestAnimationFrame(animate);
        }
    }

    animate();
}

function focusOnVorticalProgression() {
    // Animate to center the vortical progression in the view
    // Vortical progression is positioned at offsetX = pyramidBase * 1.1 (to the right)
    // To center it on screen, we need:
    // screenX = (viewState.x + offsetX) * scale + window.innerWidth / 2 = window.innerWidth / 2
    // So: (viewState.x + offsetX) * scale = 0
    // Therefore: viewState.x = -offsetX = -pyramidBase * 1.1

    const targetScale = 0.65;
    // Calculate target X to center the vortical progression
    // This works for both desktop and mobile because it's based on world coordinates
    const targetX = -pyramidBase * 1.1;
    const targetY = 0; // Same vertical center as pyramid

    const startX = viewState.x;
    const startY = viewState.y;
    const startScale = viewState.scale;

    const duration = 800;
    const startTime = Date.now();

    function animate() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const ease = 1 - Math.pow(1 - progress, 3);

        viewState.x = startX + (targetX - startX) * ease;
        viewState.y = startY + (targetY - startY) * ease;
        viewState.scale = startScale + (targetScale - startScale) * ease;

        updatePyramidPositions();
        drawIntersectionalityVisualization();
        drawVorticalProgression();

        if (progress < 1) {
            requestAnimationFrame(animate);
        } else {
            // Animation complete - show info panel
            setTimeout(() => {
                showVorticalProgressionInfo();
            }, 100);
        }
    }

    animate();
}

function animateToLayer(layer, targetScale) {
    const targetX = 0;
    // Center on the layer - pyramid center is at y=0, layers extend upward
    const layerCenterY = -(pyramidHeight / 2 - (layer.y + layer.height / 2));
    const targetY = layerCenterY;
    const startX = viewState.x;
    const startY = viewState.y;
    const startScale = viewState.scale;

    const duration = 800;
    const startTime = Date.now();

    function animate() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const ease = 1 - Math.pow(1 - progress, 3);

        viewState.x = startX + (targetX - startX) * ease;
        viewState.y = startY + (targetY - startY) * ease;
        viewState.scale = startScale + (targetScale - startScale) * ease;

        updatePyramidPositions();
        drawIntersectionalityVisualization();

        if (progress < 1) {
            requestAnimationFrame(animate);
        }
    }

    animate();
}

// Initial render
createPyramidLayers();
resizeCanvas();
initializeDomainNetwork();
initializeIntersectionalityNetwork();
initializeVorticalProgression();
// Set initial view to 35% zoom
viewState.scale = 0.35;
updatePyramidPositions();

// Ensure Network Intelligence button has event listener
function setupNetworkIntelligenceButton() {
    const networkIntelligenceBtn = document.getElementById('network-intelligence-btn');
    if (networkIntelligenceBtn) {
        // Remove any existing event listeners and onclick
        networkIntelligenceBtn.onclick = null;
        const newBtn = networkIntelligenceBtn.cloneNode(true);
        networkIntelligenceBtn.parentNode.replaceChild(newBtn, networkIntelligenceBtn);

        // Add fresh event listener
        newBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            e.preventDefault();
            showNetworkIntelligenceInfo();
        });
    }
}

// Ensure Civicism button has event listener
function setupCivicismButton() {
    const civicismBtn = document.getElementById('civicism-btn');
    if (civicismBtn) {
        civicismBtn.onclick = null;
        const newBtn = civicismBtn.cloneNode(true);
        civicismBtn.parentNode.replaceChild(newBtn, civicismBtn);

        newBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            e.preventDefault();
            showCivicismInfo();
        });
    }
}

// Setup buttons after initial render
setupNetworkIntelligenceButton();
setupCivicismButton();
setupVorticalProgressionButton();

function setupVorticalProgressionButton() {
    const vorticalBtn = document.getElementById('vortical-progression-btn');
    if (vorticalBtn) {
        vorticalBtn.onclick = null;
        const newBtn = vorticalBtn.cloneNode(true);
        vorticalBtn.parentNode.replaceChild(newBtn, vorticalBtn);

        newBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            e.preventDefault();
            showVorticalProgressionInfo();
        });
    }
}

function showVorticalProgressionInfo() {
    showInfo({
        title: 'Vortical Progression',
        description: 'Vortical progression is how history actually looks when you step back and see the long arc. It\'s a pattern where lots of good and bad things have happened—what counts as good or bad depending on many different factors—but ultimately we\'re still here, and wanting to continue is natural.',
        details: `<h3>Understanding Vortical Progression</h3>
        <p>Vortical progression is a pattern of development that is neither linear nor circular, but spiral—a movement that advances forward while recursively returning to similar themes, questions, and challenges at progressively higher levels of complexity and integration.</p>

        <h3>The Pattern</h3>
        <p>Unlike a simple linear progression that suggests we simply move from one stage to the next, or circular patterns that imply we merely repeat the same cycles, a vortex suggests both forward movement and recursive return. We spiral upward, revisiting similar challenges and themes, but each time with greater sophistication, accumulated wisdom, and more complex tools.</p>

        <h3>The Phases</h3>
        <p>Human civilization has progressed through distinct phases: <strong>Religion</strong> gave us first large-scale organizing principles. <strong>Economic Systems</strong> emerged to address material realities. <strong>Enlightenment Reason</strong> systematized understanding through rational analysis. <strong>Individualism</strong> emphasized personal rights and autonomy. <strong>Civicism</strong> now emerges as the synthesis of all these insights.</p>

        <h3>Ups and Downs</h3>
        <p>History shows us that progression isn't smooth. There are periods of great achievement and periods of terrible suffering. There are breakthroughs and collapses, innovations and destructions. What makes something "good" or "bad" depends on many different factors—who you are, where you are, what you value, what you need.</p>

        <h3>Continuity</h3>
        <p>Despite all the ups and downs, we're still here. Through wars and plagues, through environmental changes and social upheavals, through technological revolutions and cultural transformations, we continue. We adapt, we learn, we reorganize, we find new ways forward even when old ways fail.</p>

        <h3>Wanting to Continue</h3>
        <p>Wanting to continue is natural. Despite all the difficulties, all the setbacks, all the reasons to give up, there's something in us that wants to keep going, to see what happens next, to build on what came before, to pass something on to what comes after.</p>`,
        relatedLinks: [
            { text: 'Civicism', action: 'focus', target: 'civicism' },
            { text: 'People', action: 'focus', target: 'people' },
            { text: 'Domains', action: 'focus', target: 'domains' }
        ]
    });
}

// Setup intersectionality visualization click handler
if (intersectionalityContainer) {
    intersectionalityContainer.addEventListener('click', function(e) {
        // Check if a node was clicked directly
        if (e.target.classList.contains('intersectionality-node')) {
            e.stopPropagation();
            const nodeId = e.target.dataset.nodeId;
            const sectionData = intersectionalitySections[nodeId];
            if (sectionData) {
                showInfo({
                    title: sectionData.title,
                    description: sectionData.description,
                    details: sectionData.details,
                    relatedLinks: sectionData.relatedLinks
                });
            }
            return;
        }

        // Check if click is within intersectionality visualization bounds (for canvas area)
        // If clicking the canvas area, show the first section as default
        if (window.intersectionalityCenter) {
            const rect = intersectionalityCanvas.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const clickY = e.clientY - rect.top;
            const center = window.intersectionalityCenter;
            const distance = Math.sqrt(
                Math.pow(clickX - center.x, 2) + Math.pow(clickY - center.y, 2)
            );

            if (distance <= center.radius) {
                e.stopPropagation();
                // Default to first section (cultural-dimensions)
                const sectionData = intersectionalitySections['cultural-dimensions'];
                if (sectionData) {
                    showInfo({
                        title: sectionData.title,
                        description: sectionData.description,
                        details: sectionData.details,
                        relatedLinks: sectionData.relatedLinks
                    });
                }
            }
        }
    });
}

// Close info panel when clicking outside
document.addEventListener('click', (e) => {
    if (!infoPanel.contains(e.target) &&
        !e.target.classList.contains('pyramid-layer') &&
        !e.target.classList.contains('domain-node') &&
        !e.target.classList.contains('domain-network-node') &&
        !e.target.classList.contains('network-intelligence-btn') &&
        !e.target.classList.contains('civicism-btn') &&
        !e.target.classList.contains('vortical-progression-btn') &&
        !e.target.classList.contains('vortical-phase-node') &&
        !e.target.classList.contains('intersectionality-node') &&
        e.target.id !== 'network-intelligence-btn' &&
        e.target.id !== 'civicism-btn' &&
        e.target.id !== 'intersectionality-container' &&
        e.target.id !== 'intersectionality-canvas') {
        closeInfoPanel();
    }
});
    </script>
</body>
</html>
